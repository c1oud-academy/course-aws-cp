  Қайырлы күн, құрметті студенттер! Сіздерді кезекті Демо-сессияда көргеніме қуаныштымын және бүгін Billing Dashboard туралы айтатын боламыз. Алдыңғы Демо-сессияларда біз AWS Management Console-ді, авторизациядан өтуін және оның ерекшеліктерін қарастырған болатынбыз. Қазіргі таңда AWS Management Console-дің негізгі парақшасына қалай кіру керектігін білуіңіз қажет. Billing Dashboard-пен танысуды осы жерден жалғастыратын боламыз. Billing Dashboard парақшасына өтудің екі түрлі жолы бар: 1-ші жолы – жоғарғы оң жақтағы ашылмалы мәзірде Billing Dashboard-ті таңдау; 2-ші жолы – іздеу жолағында Billing сөзін енгізуді бастау, соңына дейін жазудың қажеті жоқ, себебі алгоритм өзі қажетті сервисті шығарады. Ең бірінші шыққан сервис – бізге қажетті сервис. Біз Billing Dashboard парақшасына өттік, жоғарғы сол жағында біз мәзірдің «Home» пунктіне өткенімізді көреміз. Енді осы негізгі парақшаның әрбір пунктін қарастырып өтейік. Ең біріншісі – AWS summary – біздің бұлттағы негізгі шығындарымыз туралы ақпарат. Бірінші – Current month’s total forecast. Біз сіздермен болжамның қалай есептелетінін қарастырған болатынбыз. Егер біз бұлттағы ресурстарды пайдалану темпін сақтайтын болсақ, онда бұлттағы 1 айдың жалпы шығыны 82$ құрайтын болады. Егер біз ай басынан бастап осы уақытқа дейінгі шығынды көргіміз келсе, біз екінші блокқа қараймыз, ол – Current MTD Balance, MTD – бұл month-to-date дегенді білдіреді. Соңғы, назар аударатын қызықты пункт – ай басынан бастап нақты өткізілген күндерді алдыңғы аймен салыстыру болып табылады. Мысалы, бүгін айдың 4-і, өткен айдың 4-не дейінгі уақытпен салыстырғанда 56%-ға артық шығындалғанбыз, яғни 6$-дан сәл көбірек.
  Келесі слайдта – Highest cost – ең көп шығындалған, ай басынан бері ең көп пайдаланылған сервис түрі, яғни, толық 4 күннің ішінде 10$ жұмсалған, және оның 5$ Amazon Route 53-ке жұмсаған. Бұл өткен айдан 42%-ға артық, ол айда біз Amazon Route 53-ке 3,5$ жұмсаған болатынбыз. Бұл ақпарат алдын-ала қарау, яғни preview үшін ұсынылады. Осы блоктың ең төменгі жағында сіз View your bill сілтемесін көре аласыз, яғни жалпы есеп, ол сілтемеге бассаңыз, экранның сол жағында орналасқан мәзірдің екінші жолы болып табылатын парақшаға өтесіз. Мен сіздерге атап өткім келген келесі блок – ең жиі қолданылатын ең қымбат 5 сервистер. Сіз соңғы 3 айдағы әрбір сервис үшін шығындарды суреттейтін графикті көріп тұрсыз. Осы блоктың оң жағында сіз дәлірек ақпаратты көре аласыз. Мысалы, Registrar-ға ең көп шығындалған – ол Amazon Route 53-ке, яғни домендер сатып алу. Графикте маусым мен шілде айларында домен сатып алынғанын көруге болады, бірақ тамыз айында алынбаған. Сәйкесінше, ешқандай мән көрсетілмеген. Біз мынадай екі сервисті мысалға ала отырып айтсақ: AWS Elemental MediaConvert қызыл сызық және жасыл сызық Amazon EC2 (Amazon Elastic Compute Cloud), онда орта есеппен 3 айда шығын шамамен 10$ болған. Тамыз айында нақты осы екі сервиске жұмсалатын шығындар екі есеге артқанын көреміз.
Мен сізге көрсеткім келген Billing Dashboard парақшасындағы ең соңғы блок – біздегі ең танымал үздік 5 аккаунттың шығыны. Бұл блок AWS Organizations пайдаланушысы болған кезде ғана көрінеді. Бұл аккаунт админ болып табылады, яғни басқа AWS Account-тар осы AWS Account-тан орталықтандырылған түрде басқарылады және осы аккаунтта барлық аккаунттардан жиналған AWS ресурстарын пайдаланудың есебі жиналады, яғни consolidated billing, бір ортақ шотқа біріктіріледі. Мұнда сіз өзіңіздің аккаунттарыңызды салыстыра аласыз. Логикалық тұрғыдан алғанда, бұл алдыңғы блокпен бірдей: сіз оларды бір-бірімен салыстыра аласыз, соңғы 3 айдағы орташа мәнді көре аласыз және өткен айда белгілі бір аккаунтқа қанша уақыт кеткенін көре аласыз.
Біз сол жақтағы мәзірде келесі парақшаға өтеміз. Бұл Bills парақшасы, яғни сіздің төлеуге арналған шот-фактураларыңыз. Бұл слайдта 2022 жылдың қыркүйек айына арналған шығындардың мысалы көрсетілген, ол әлі аяқталған жоқ. Мұнда сіз біздің шығындарымызды сервистер бойынша да, аккаунттар бойынша да көре аласыз. Оның қалай көрінетінін сервистің бір мысалымен қарастырайық. Егер біз AWS CodeBuild-ті ашсақ, алдымен аймақ бойынша бөлінетінімізді көреміз, содан кейін аймақты ашсақ, әр аймақ сіз таңдаған сервиске байланысты өзгеретін топтарға бөлінеді. Осы топтың ішінде белгілі бір операциялар бар, олар мүмкіндігінше тұтынудың қандай болғанын және осы тұтыну үшін тиісті төлемді ақшалай түрде көрсетеді. Екінші жолды мұқият қарастырайық, онда сіз 100 минут үшін 0$ төлейсіз және мәтінде AWS CodeBuild Free Tier деп жазылып тұр. Біз сіздермен AWS Free Tier туралы сөйлестік, бұл AWS-ті сынап көргісі келген жаңа AWS Account-тар үшін арналған мүмкіндік. Бір жыл ішінде әр айға белгілі бір несие беріледі. Несиелер купондар сияқты, оларды жұмсай аласыз. Біздің жағдайда AWS CodeBuild жобасында жұмыс жасау үшін барлығы 100 минут берілді және көріп отырғаныңыздай, біз бұл үшін ештеңе төлемейміз. Одан артық жұмсалған 3,276 минут үшін AWS CodeBuild жобасының тарифтік шкаласы бойынша 16$-дан сәл артық төледік.
Жарайды, біз сіздермен бірге әрі қарай жылжимыз. Billing and Cost Management аясындағы келесі сервис түрі – бұл AWS Cost and Usage Reports. Естеріңізде болса, бұл – бұлтты шығындар туралы ақпаратты барлық мәліметтермен мүмкіндігінше толық ақпаратпен жасауға мүмкіндік беретін сервис. Есеп жасау үшін сіз бірнеше түрлі параметрлерді таңдауыңыз керек. Ол creat report батырмасын басу арқылы жүзеге асырылады. Содан кейін қажеттілігіңізге байланысты жүктелетін форматты таңдаңыз, қайда жүктелетінін, қандай түрде, қандай қарқындылықпен жүктелетінін көрсетіңіз — жинақталып па немесе жинақталмай ма. Бұл ақпарат қазірдің өзінде осы деректермен байланысып, өз шешіміңізді құра алатындай етіп жасалған.
AWS Cost Explorer-ді сипаттауға және қарауға көшпес бұрын, мен сізге Cost Allocation tags көрсеткім келеді. Бұл – AWS Cost Explorer-де қолдануға болатын, тег кілттерінің жиынтығын анықтау үшін, бұлтты шығындар деректерін фильтрлеу немесе бөлу үшін берілетін мүмкіндік. Мысал ретінде нақты адамды ала отырып тегтер туралы айтып берейін. Қыздың тұрғанын елестетіп көріңізші, оған тегтер дайындап көрейік: Tag key – шаш, мағынасы – ұзын; Tag key – шаштың түсі, мағынасы – қызыл, тағы бір мысал, көйлек – ол Tag key, ал мағынасы – ұзын. Осылайша біз адамды сипаттай аламыз. Біздің жағдайда белгілі бір пайдалы ақпаратты нақты AWS ресурсына жібере аламыз. Мысалы, біз виртуалды серверді құрамыз және оған environment тегін бекітеміз, мысалы, dev немесе prod. Әрі қарай, осы виртуалды серверде Application айналады, ол Tag key – Application және Tag  value – мысалы, Application 1 немесе Application 2 және т.б. Яғни, сіз бұл ресурс туралы мүмкіндігінше көп ақпаратты тегтерде сақтай алатындығыңызды түсінесіз, осылайша, біріншіден, осы ресурсты ашқан кезде, оның не үшін жасалғанын түсінесіз. Сонымен қатар, біз Cost Allocation tags-те белгілі бір тегті іске қосқан кезде, яғни сізде барлық ресурстар үшін жасайтын Tag key-лердің белгілі бір жиынтығы болады, біз оны AWS Cost Explorer-де іске қосқан кезде, сіз оны осы тегтер бойынша фильтрлеуге немесе топтастыруға мүмкіндік аласыз. Кейбір ресурстарда белгілі бір тег болмаса, ол көрсетілмеген деп белгіленеді және осы топтың жалпы шығындары, яғни көрсетілген тегі жоқ ресурстар тобы үшін де көрсетіледі.
Келесі парақша – Free Tier. Бұл парақшада Free Tier бағдарламасына қатысатын сіз пайдаланып жатқан ресурстар туралы ақпаратты көрсетіледі. Сондай-ақ, әрбір ресурс үшін, әрбір сервис үшін берілген несиелердің қаншасын пайдаландыңыз, сол көрсетіледі. Мысалы, CodeBuild, 3-ші жолақ, Free Tier бөлігі ретінде берілген барлық 100 минут қазірдің өзінде 100% толық игерілгенін көре аламыз. Осылайша, егер сіз Free Tier-ді қолдансаңыз және артық төлем жасағыңыз келмесе, осы парақшаны жиі тексеріп отырыңыз: егер сіз 100%-ға жақындасаңыз, оны пайдалануды тоқтатуыңыз керек немесе оны оңтайландыруға тырысыңыз. Сонымен қатар, сіз жаңа аккаунтты тіркей аласыз және сол жерде осы сервисті пайдалануды жалғастыра аласыз. Бұған тыйым салынбайды, бұлай жасауға болады. Тағы бір нұсқа – біздің Free Tier несиелеріміз әр айдың басында беріледі, ал егер сіз асығыс болмасаңыз, айдың соңына дейін күтуіңізге болады, әр айдың бірінде жыл бойы сізге жаңа несиелер беріледі. Осылайша, келесі айда біз CodeBuild жобасы үшін тағы 100 тегін минут аламыз.
Әрі қарай, AWS Cost Explorer-ге назар аударайық, бұл өте қызықты сервис, және маған өте ұнайды. Себебі, өте қарапайым және жақсы құралды қолдана отырып дұрыс шешім қабылдай аласыз немесе бұлтты инфрақұрылымыңыздағы шамадан тыс үлкен шығындарды анықтау үшін шығындарыңызды әр түрлі жағынан қарастыра аласыз. Сонымен, сол жақта мәзір бар, AWS Cost Explorer батырмасын басыңыз, AWS Cost Explorer-дің парақшасы ашылады, ол сізді AWS Cost Explorer-дің Dashboard сілтемесіне бағыттайды, оны басқан кезде келесі парақша ашылады. Біз Dashboard парақшасын қарастырмаймыз, өйткені ол сирек қолданылады, біз тікелей Cost Explorer-ге барайық. Мұны 2 жолмен жасауға болады: экранның сол жағындағы мәзірде Cost Explorer деп аталатын екінші сілтемені пайдаланыңыз немесе осы сервистің Dashboard парақшасында View in Cost Explorer батырмасын басыңыз, сонда сіз Cost Explorer парақшасына өтесіз. Мұнда не істей алатынымызды көрейік. Біріншіден, сіз жоғарғы жағындағы кезеңді таңдап, күн немесе ай бойынша ақпаратты көре аласыз. Екі нұсқа да сіз іздеген мәліметке байланысты пайдалы болуы мүмкін. Төменде топтастырулар туралы ақпарат берілген, яғни, ұсынылған нұсқалардың біреуін бассақ, күн бойынша сервистерге бөлінетін шығындарды қарастыратын болсақ, ол күн аясында топтастырылады. Келесі слайдта мұның барлығын көре аламыз. Басқа тағы қандай топтастырулар бар екенін көрейік. «More» қойындысындағы танымалдарының ішінен бұрыннан ұсынылғандарға қоса, топтастыруға болатын қосымша опцияларды көре аласыз. Сонымен қатар, сіз мына жерден тегті көре аласыз.  Мұнда бұрын Cost Allocation tags-ке енгізілген барлық тегтер берілген, белсенділері, active, осы жерде көрсетіледі. Cost Explorer-дің оң жағында фильтрді көруге болады: бір сервис ішіндегі шығындарды немесе бір аккаунт ішіндегі шығындарды немесе бір аймақ ішіндегі шығындарды көруге өте ыңғайлы. Енді сервис бойынша топтастыруды жасап көрейік. Сіз оның қаншалықты түрлі-түсті екенін көріп отырсыз. Тіпті көңіл-күй де көтеріледі. Аздап талдау жасап көрейік. Ең бірінші көзге түсетін қоңыр бағаналар, Amazon Route 53-ке тиесілі, бұл 1 тамыз және 31 тамыз күндері болған. Осы күндері бұл сервиске арнайы байланыстырылған белгілі бір шығындар болған сияқты. Келесі күлгін түс – AWS Elemental MediaConvert – бұл сервис тамыз айының соңғы күндерінде белсенді қолданылған. Дәл осындай логика бойынша сіз барлық басқа сервистердің шығындарын көре аласыз. Қалған майда ашық жасыл түсті бағаналар – others. Бұл others біріктірілген басқа сервистер, және біз көп жұмсаған басқа танымал сервистермен салыстырғанда аз бөлігі болып табылады. Төменде сіз әр күн үшін, әр сервис үшін белгілі бір әрекетке қанша доллар жұмсағаныңызды көре аласыз. Қажетті шығыс деректерінің түрін дайындағаннан кейін топтау, фильтр бойынша және т.б. арқылы жасалған барлық параметрлерді есеп ретінде сақтауға болады. Жоғарғы жағында Save as... батырмасын көресіз. Сонымен қатар, біраз уақыттан кейін қайтып оралған кезде, сіз бұрыннан сақталған есепті ашып, оны бірдей параметрлер болатын пішінде көре аласыз, бірақ жаңа кезеңде, жаңа деректерде және сіздің шығындарыңыз үшін динамикада суреттің қалай өзгеретінін көре аласыз. Billing Dashboard парақшасына оралайық, ол сол жақтағы мәзірде, одан біз Cost Explorer-ге ауыстық. Ал енді әрі қарай жалғастырайық.
Бұл – AWS Budgets. Бұл – біз сіздермен дәрісте талқылаған сервис. Сіз оны мына жерден таба аласыз. Бұл аккаунтта бір бюджет орнатылған, егер статус ОК болса, онда бюджет асып кетпеген. Бюджетке нақты не кіретінін көрейік: тіркелген сома 150$, шектеулі пайдалану уақыты жақындағанда қандай да бір ескерту келеді. Бұл жағдайда, мысалы, хабарландыру келіп, аккаунт иесі белгіленген шығындарға жақындап келе жатқанын және бұл туралы бірдеңе істеу керек екенін көреді, немесе, кем дегенде, бұл – біз есептегендей ақша жұмсалғанын көрсететін қосымша ақпарат. Сіз осы қызмет аясында көптеген сервистерді баптай аласыз; доллармен өлшенетін сомамен шектелудің қажеті жоқ. Сондай-ақ, usage-ке байланыстыруға болады, мысалы, AWS CodeBuild сервисі үшін бюджетті орнатуға болады. Егер AWS CodeBuild жобасының жұмыс уақыты 10 000 минутқа жетсе, сіз хабарлама аласыз немесе қандай да бір әрекет болады. Сонымен қатар, әр бюджет ішінде сіз бірнеше қадамдарды реттей аласыз және олар оған икемді. Бірақ идеясы, егер бізде AWS CodeBuild жобалары үшін 10 000 минут берілсе, ол айдың ортасына қарай 50%-ға жетсе, бұл бүкіл айға есептелген 10 000 минуттың  жартысын өткіздік деген сөз, бірақ әлі 15 күн болған жоқ. Осылайша, біз сол жылдамдықпен 10 000 минуттан асатынымызды алдын ала білеміз және мұнымен бірдеңе жасау керек. Сіз тек 50% ғана емес, кез-келген мөлшерде өзгерте аласыз, бұл өте икемді құрал. Мен сізге оны пайдалануды ұсынамын. Сізге мұндай күрделі формада қажет болмауы мүмкін. Бірақ мен өзіңіздің жеке AWS аккаунтыңызды ашқан кезде, сіз сол жерде жоба жасауды жоспарласаңыз, бекітілген соманы Total budget-ке келтіруді ұмытпаңыз. Кез келген соманы, шартты түрде 50$ немесе 100$ салыңыз, сонда осы уақыт ішінде сіз жұмыс істеп жатқан кезде AWS Budgets-тің хабарландыруларын алмасаңыз, бұл сіздің бір ай бойы осы бюджетте екеніңізді білдіреді, бұл сіздің шығындарыңыз. Егер хабарлама келсе, сәйкесінше сіз кез келген уақытта осы ақпаратты пайдалана отырып, кейбір тиісті шараларды қолдана аласыз.
Сонымен, біз осы Демоны аяқтап жатырмыз, негізгі ойларды қарастырдық, яғни Billing Dashboard-тан бастап, Billing Dashboard-тың мәзіріндегі бар барлық сервистермен аяқтадық. Біз бұлт инженерінің жұмысында жиі қолданылатын кейстерді қарастырдық. Бұл Демо-сессия пайдалы болды деп ойлаймын және сіз болашақта бұлттағы шығындарыңызды қадағалай аласыз деп үміттенемін. Көріскенше, сау болыңыз!


   Қайырлы күн, құрметті студенттер! Сіздердің барлығыңызды "Зертханалық жұмысқа кіріспе" сессиясында көргеніме қуаныштымын. Зертханалық жұмыстың тақырыбы - AWS IAM сервисімен егжей-тегжейлі танысу. Сонымен, бастайық.
   Зертханалық жұмысқа жету үшін бізге AWS Academy-де AWS Academy Cloud Foundations курсын ашу керек. Әрі қарай, Modules қойындысында, төртінші модульге кіріп, төртінші модульдің белсенділіктерін ашқан кезде, төменгі жағында сіз "Lab 1 – Introduction to AWS IAM" көресіз. Осы сілтемені басу арқылы сізге vocareum сервисін пайдалану шарттары көрсетілген парақша көрсетілуі мүмкін. Бұл - бізге зертханалық жұмыстарды ұсынатын сервис. Сіз бұл шарттармен асықпай таныса аласыз. Дайын болғаннан кейін, төменгі жағында "I Agree" батырмасы болады, оны басу арқылы біз зертханалық жұмыстың негізгі парақшасына өтеміз.
   Зертханалық жұмыстың негізгі парақшасында әдепкі бойынша README және Terminal терезелері көрсетіледі. Зертханалық жұмыстың аясында орындауымыз керек барлық қадамдарды көрсететін README терезесін бүкіл парақшаға кеңейту үшін Terminal терезесін өшірейік. Сонымен қатар, сіз өзіңіздің сессияңыз үшін жаңа AWS аккаунтын құруды бастау үшін "Start Lab" батырмасын басуға болады.
   Сонымен, біз бастаймыз. Біз осы зертханалық жұмыстың не туралы екенін, оны сәтті аяқтау үшін не істеу керектігін түсіну үшін осы README құжатының барлық бөліктерін қарастырамыз. Зертханалық жұмыстың тақырыбы - AWS IAM. Біз білетіндей, бұл Identity and Access Management сервисі, ол бізге барлық identity, яғни пайдаланушылар, рөлдер, топтар, сондай-ақ біздің барлық security credentials, яғни логиндер, парольдер, access keys, MFA және т. б. реттеуге мүмкіндік береді, сонымен қатар біздің identity-лерге AWS ресурстарына қол жеткізуді орнатуға мүмкіндік береді. Бұл диаграммада біз жұмыс істейтін AWS ресурстары көрсетілген. Зертханалық жұмыс аясында біз қандай пайдаланушылар мен топтар құрылғанын қарастырамыз. Сондай-ақ, құрылған IAM топтарға қандай policy тіркелгенін көреміз. Әрі қарай, біз бір жаттығу орындаймыз, атап айтқанда AWS сервистеріне қол жеткізу үшін пайдаланушыларды кейбір IAM топтарына қосамыз. Осыдан кейін сіздің IAM пайдаланушыларыңыз үшін бұлтта авторизация сілтемесін қайдан табуға болатындығын көреміз. Ең соңғысы, біз әртүрлі policy-лермен тәжірибе жасаймыз. Сондай-ақ, осы зертханалық жұмыс аясында басқа AWS сервистеріне қол жетімділік жоқ екенін атап өткен жөн. Сіз кіруге тыйым салынғанын және бұл сіздің зертханалық жұмысыңыздың нәтижесіне әсер етпейтіні туралы тиісті хабарламаны көресіз.
   Мұнда AWS IAM сервисі туралы қысқаша ақпарат берілген. Біз IAM пайдаланушыларын, рөлдерін құрып, басқара алатынымызды, сондай-ақ permissions реттей алатынымызды білеміз, яғни бұл identity-лер үшін қол жетімділік. Тағы бір мәселе, federated users-пен жұмыс істеу мүмкіндігі бар. Бұл AWS бұлтына кіру үшін әдетте корпоративтік ортадан үшінші тараптың кіру құпия сөзін пайдаланатын пайдаланушылар. Зертханалық жұмысты орындау үшін жалпы 40 минут бөлінеді. Бұл көп жағдайда жеткілікті. Естеріңізге сала кетейін, егер бұл уақыт сізге жетпесе, зертханалық жұмысты аяқтамай, Start lab-ты басу керек. Осылайша, таймер жаңартылады және сізде осы зертханалық жұмысты аяқтау үшін қосымша 40 минут пайда болады.
Біз зертханалық жұмысты бастаймыз. Мұнда мен 1-ден бастап барлық қадамдардың нөмірленуі бар екенін атап өткім келеді. Сондай-ақ, бірнеше қадамдарды топқа біріктіруге болады. Мысал ретінде, Management Console негізгі парақшасын ашу үшін 1-4 қадамдары жасалынады. 1-қадамда жаңа AWS аккаунтын құруды бастау үшін Start Lab батырмасын басу керек екендігі айтылады. Әрі қарай, пайда болған терезеде AWS аккаунт жасалғанын көрсететін "Lab status: ready" дегенді күтуіміз керек. Біз бұл терезені жабамыз, содан кейін AWS батырмасын басамыз. Осыдан кейін біз AWS Management Console-дің негізгі парақшасына өтеміз. 4-қадамда бізге екі парақшамен жұмыс істеу керек екендігі айтылады. Бірінші парақша - AWS Management Console, ал екіншісі - зертханалық жұмыстың бөлігі ретінде жасалуы керек барлық қадамдар көрсетілген AWS Academy парақшасы. Ыңғайлы жұмыс істеу үшін браузерде екі терезе аша аламыз немесе осы екі парақшаның арасында жылдам ауысу үшін басқа браузерде AWS Management Console аша аламыз. Біз әрі қарай жүреміз.
   Task 1: Біз жасаған AWS аккаунтында қандай пайдаланушылар мен топтар бар екенін көруіміз керек. 5-қадамда біз IAM сервисін ашуымыз керек екендігі айтылады. Әрі қарай, осы AWS аккаунтындағы барлық пайдаланушылардың парақшалары ашылуы үшін сол жақ навигация мәзірінде Users қойындысын ашу керек. Бізде үш пайдаланушы бар екенін көреміз. Бұл user-1, user-2 және user-3. User-1 пайдаланушысын басып, Permissions қойындысын ашайық. Біз бұл пайдаланушы үшін бекітілген Permissions жоқ екенін көреміз. Әрі қарай, Groups қойындысын ашып, осы пайдаланушының қандай топтарға жататынын көрейік. Біз бұл пайдаланушының топтардың ешқайсысына жатпайтынын көреміз. Әрі қарай, Security credentials қойындысын басыңыз және бұл пайдаланушының AWS Management Console үшін орнатылған құпия сөзі бар екенін көреміз. 11-қадамда сол жақ мәзірде User groups қойындысын басу керек және біз осы AWS аккаунтындағы барлық топтарды көреміз. Біздің зертханалық жұмыс аясында барлығы үш топ алдын-ала құрылады. Бұл EC2-Admin, EC2-Support және S3-Support. EC2-Support тобын ашайық. Біз осы топтың парақшасында боламыз. Төменгі жағында Permissions қойындысын таңдап, осы топқа қандай policy қосылғанын көреміз. Бұл топқа AmazonEC2ReadOnlyAccess деп аталатын бір Managed Policy бекітілген. Бұл AWS-тің Managed Policy-і, оны AWS өзі әзірлейді және басқарады. Сіз бұл policies қажет болған жағдайда пайдалана аласыз. Тағы бір айта кететін жайт, policy-дегі өзгерістер осы policy-ді сақтау сәтінде бірден күшіне енеді. Осылайша, осы policy-ге байланған барлық identity бірден жаңа қол жетімділікке ие болады. 14-қадамда AmazonEC2ReadOnlyAccess policy құжатын кеңейту үшін «+» батырмасын басу керек. Еске саламын, policy құжаты - бұл рұқсат етілген немесе тыйым салынған, белгілі бір ресурстың басқа ресурсқа қол жетімділік туралы ақпарат беретін құжат. Егер біз нақты осы policy туралы айтатын болсақ, онда біз Amazon EC2, Elastic Load Balancing, CloudWatch және Auto Scaling сервистеріндегі List немесе Describe-тен басталатын әрекеттерге қол жеткізуді қамтамасыз етеміз. Осылайша, бұл policy support маманның рөлі үшін өте қолайлы. IAM policy ішінде біз оның бірнеше бөліктен тұратынын көреміз, яғни кейбір құрылым бар. Сипатталуы керек бірінші блок – Effect, Allow немесе Deny екі мәндерін қабылдай алады. Келесі Action - біз қандай әрекеттерге немесе операцияларға рұқсат беретінімізді немесе тыйым салатынымызды сипаттаймыз. Action-да белгілі бір сервис аясындағы сервис атаулары мен операциялар қос нүкте арқылы бөлінгенін ескеріңіз. Үшінші блок - бұл кіруге рұқсат етілген немесе тыйым салынған AWS ресурстардың тізімін сипаттайтын Resource. Осымен біз policy құжатын қарауды аяқтадық. "- "батырмасын басып, сол жақ навигация мәзірінен User groups қойындысына өтейік. 17-қадамда біз келесі S3-Support тобын ашуымыз керек. Permissions қойындысына өтіп, осы топқа AmazonS3ReadOnlyAccess policy-і қосылғанына көз жеткізу керек. "+" батырмасын басу арқылы осы policy мазмұнын егжей-тегжейлі қарастырайық. Бұл policy Get және List-тен басталатын әрекеттер үшін Amazon S3 сервисіне кіруге мүмкіндік беретінін көреміз. Policy мазмұнымен танысқаннан кейін, policy мазмұнын жабу үшін "-" белгішесін басуымыз керек. Біз әрі қарай жүреміз.
   EC2-Admin үшінші тобын толығырақ көру үшін сол жақ навигация мәзірінде User groups қойындысын басу керек. Біз Permissions қойындысына өтіп, осы топқа қандай policy тіркелгенін көруіміз керек. Сіз бұл топтағы Permissions алдыңғы топтардан ерекшеленетінін көресіз, атап айтқанда алдыңғы екі топта Managed Policy болған. EC2-Admin тобы жағдайында біз Inline Policy-ді көреміз. Inline Policy дегеніміз не? Бұл біз identity-ге, яғни User, Group немесе Role-ге осы ресурста әрекет ететін ерекше рөлді байланыстырады. Inline Policy біз әдетте белгілі бір identity үшін бірегей қолжетімділікті беру үшін пайдаланамыз. Бірнеше identity-ге тіркелуі мүмкін policy құру қажет болған жағдайда, жеке policy құру ұсынылады, содан кейін біз оны рөлге, топтарға немесе пайдаланушыға байланыстырамыз. Inline policy мазмұнымен танысу үшін "+" белгішесін басайық. Біз Amazon EC2 сервисіне кіру Describe сөзінен басталатын әрекеттер үшін берілгенін көреміз, сонымен қатар бізде инстанстарды қосу және тоқтату мүмкіндігі бар. Біз EC2-Admin Inline Policy тобымен танысқаннан кейін "-" белгішесін басып, әрі қарай жүруіміз керек.
   Зертханалық жұмыстың қалған бөлігінде біз кейбір business case, яғни бұлт инженерлері орындайтын практикалық тапсырманы орындаймыз. Бізде тез дамып келе жатқан компания бар деп елестетіп көрейік, барлық IT-инфрақұрылымы AWS-те орналасқан және бұл компания Amazon EC2 және S3 сервистерін белсенді қолданады. Сондай-ақ, бізге жаңа қызметкерлер жұмысқа орналасты және олардың лауазымдық міндеттеріне байланысты бұлт ішінде қажетті қол жетімділікті беру керек деп елестетіп көрейік. Атап айтқанда, user-1 үшін Amazon S3 сервисіне S3-Support тобына қосу арқылы Read Only қол жетімділігін, яғни оқу режимін беру керек. Екінші пайдаланушы, яғни user-2, Amazon EC2 сервисіне оқу режимінде қол жеткізу үшін EC2-Support тобына қосыңыз. Біздің үшінші пайдаланушыны EC2-Admin тобына қосыңыз, осылайша Amazon EC2 сервисіне оқуға рұқсат берумен қатар, оның Amazon EC2 Instance тоқтату және іске қосу мүмкіндігі де болады.
   Енді біз жоғарыда айтқанның бәрін жасаймыз және қадамдармен қозғаламыз. Ең алдымен, біз user-1-ді policy AmazonS3ReadOnlyAccess алу үшін S3-Support тобына қосуымыз керек. Ол үшін 24-қадамда навигациялық мәзірдің сол жағында User groups қойындысын таңдау керек. Ашылған парақшада S3-Support тобын таңдау керек. Әрі қарай, осы парақшада Users қойындысын таңдау керек. Біз бұл топта бірде-бір пайдаланушыны көрмейміз, сондықтан Add users батырмасын басыңыз, содан кейін біз барлық мүмкін identity бар парақшаға бағытталамыз, яғни осы топқа қосуға болатын пайдаланушылар. Пайдаланушылар тізімінде біз user-1-ді таңдап, Add Users батырмасын басуымыз керек, содан кейін user-1 пайдаланушысы S3-Support тобына қосылады. Әрі қарай, біз нақты сол әрекеттерді орындауымыз керек және EC2-Support тобына user-2, EC2-Admin тобына user-3 қосуымыз керек. Осы әрекеттердің барлығын орындағаннан кейін біз бәрін дұрыс орындағанымызға көз жеткізуіміз керек. Ол үшін навигациялық мәзірдің сол жағында осы AWS аккаунтындағы барлық қол жетімді топтар пайда болуы үшін User groups қойындысын басу керек. Сондай-ақ, сіз әр топ үшін қосымша ақпаратты көресіз, атап айтқанда әр топтағы пайдаланушылар саны бар баған. Әр топта бір пайдаланушы болуы керек. Егер солай болса, онда сіз екінші тапсырманы дұрыс орындадыңыз және біз үшіншіге көшеміз.
   Үшінші тапсырмада біз өз пайдаланушыларымыздың, яғни олар үшін берілген policy-лерді тексеру үшін AWS аккаунтындағы IAM users атынан тіркелуіміз керек. Ол үшін сол жақтағы навигация мәзірінде ең жоғарғы жағындағы Dashboard қойындысын басу керек. Парақша ашылғаннан кейін оң жақта сіз IAM users sign-in link сілтемесін көресіз, яғни бұл сіздің қызметкерлеріңізге AWS аккаунтындағы IAM пайдаланушыларына кіре алуы үшін жіберілетін сілтеме. Бұл сілтемені басқа жерге көшірейік, өйткені бізге тағы бірнеше рет қажет болады. Сіз кез-келген басқа браузерді немесе сол браузерде жаңа инкогнито терезесін ашып, біз көшірген сілтемені ашуыңыз керек. AWS Management Console-да ашылған авторизация парақшасында пайдаланушы ретінде біз user-1-ді, паролі ретінде Lab-Password1 енгіземіз. Бұл сіз үшін басқа болуы мүмкін, сондықтан сіз AWS Academy ашылған зертханалық жұмыс парақшасына қарайсыз. Сәтті авторизациядан кейін біз S3-Support тобы арқылы берілген пайдаланушылардың policy шынымен жұмыс істейтінін тексеру үшін Amazon S3 сервисіне ауысуымыз керек. Сіз осы зертханалық жұмыстың аясында жасалған жалғыз bucket-ті көруіңіз керек, сонымен қатар осы bucket мазмұнын ашуда қиындықтар туындамауы керек. Бұл bucket-те объектілер құрылмағандықтан, сіз ештеңе көрмейсіз, бірақ кем дегенде осы bucket ішіне кіре алатын боласыз және кіруге тыйым салу туралы хабарлама шықпауы керек. Бұл пайдаланушының қажетті кіру рұқсаттары бар екеніне көз жеткізгеннен кейін, бұл пайдаланушының Amazon EC2 сервисіне кіру мүмкіндігі бар-жоғын тексерейік. Естеріңізге сала кетейік, бұл пайдаланушы үшін біз Amazon EC2 сервисіне қол жетімділің бермедік, сондықтан егер сіз осы сервисті ашсаңыз, сол жақ навигациялық мәзірде Instances қойындысына өтсеңіз, сіз кіруге тыйым салынғанын көресіз және "You are not authorized to perform this operation" деген хабарлама пайда болады, яғни сізде бұл операцияны орындау үшін құқықтар жоқ.
   Жарайды, енді user-1 пайдаланушысының атынан AWS Management Console-інен шығып, басқа пайдаланушының атынан кірейік. Ол үшін AWS Management Console жоғарғы оң жағында пайдаланушының аты мен Account ID бар батырманы басу керек, ашылмалы мәзірде Sign Out батырмасын басыңыз, яғни бірінші пайдаланушының атынан AWS Management Console шыққаннан кейін, біз сол сілтемені пайдалануымыз керек, бірақ credentials, яғни екінші пайдаланушының логині мен паролін енгізуіміз керек. Пайдаланушы - бұл user-2, ал Password - Lab-Password2. Естеріңізге сала кетейік, құпия сөз әртүрлі болуы мүмкін, сондықтан сіз AWS Academy парақшасынан қайта тексеруіңіз керек. Сәтті авторизациядан кейін Amazon EC2 сервисіне көшейік. Естеріңізге сала кетейік, бұл пайдаланушы үшін біз тек оқу режимінде ғана Amazon EC2 сервисіне құқық бердік. Instances қойындысына өткеннен кейін, осы AWS аккаунтында бар инстанстардың тізімі көрсетіледі. 
   Егер сіз бар инстанстардың тізімін көрмесеңіз, сіз басқа аймақта болуыңыз мүмкін. Осы зертханалық жұмыстың аясында барлық инстанстар North Virginia немесе us-east-1 аймағында құрылды. Егер сізде басқа аймақ болса, AWS Management Console жоғарғы оң жағында қажетті аймақты таңдаңыз, содан кейін инстанстар тізімі көрсетіледі. Бірнеше инстанстың ішінде сіз LabHost деп аталатын инстанстың бар екенін көресіз. Оны тоқтатуға тырысайық. Ол үшін LabHost сервисін таңдап, содан кейін Instance state батырмасын басып, ашылмалы әрекеттер тізімінде Stop instance тармағын басыңыз. Қалқымалы терезеде сіз бұл инстансты шынымен тоқтатқыңыз келе ме, жоқ па сұралады, біз бұл әрекетті растау үшін Stop батырмасын басуымыз керек. Осыдан кейін сіз бұл пайдаланушыға бұл әрекетті орындауға рұқсат етілмегені туралы хабарламаны көресіз. Шынында да, біз бұл пайдаланушы үшін бұл құқықтарды берген жоқпыз, сондықтан барлық policy дұрыс жұмыс істейді. Енді user-2 пайдаланушысының атынан Amazon S3 сервисін ашуға тырыссақ не болатынын тексерейік. Сондай-ақ, біз Amazon S3 сервисіне ешқандай рұқсат бермегенімізді еске саламын, сондықтан бұл сервисті ашқан кезде сіз buckets тізімін көрсетуге құқығыңыз жоқ деген хабарды көресіз. Сонымен қатар, сіз Create Bucket батырмасы да белсенді емес екенін байқайсыз, бұл пайдаланушының бұл әрекетке құқығы жоқ екенін көрсетеді.
Жарайды, енді үшінші пайдаланушы атынан кірейік. Ол үшін біз user-2 пайдаланушысының атынан шығуымыз керек. Біз жоғарғы оң жақта Account ID батырмасын басуымыз керек, ашылмалы тізім көрсетіледі және сол жерде ең соңғы элементті таңдау керек. Енді AWS Management Console-де сол авторизация сілтемесін пайдаланып, біз user-3 пайдаланушысының атынан кіреміз. Ол үшін IAM user name өрісіне user-3, lab-Password3 паролін енгізу керек. Сізде бұл әртүрлі болуы мүмкін, сондықтан AWS Academy парақшасынан қайта тексеріңіз. Біз авторизациядан сәтті өткеннен кейін Amazon EC2 сервисіне көшейік. Сізге бар EC2 тізімі көрсетіледі. Егер бұл тізім көрсетілмесе, дұрыс аймақта екеніңізді тексеріңіз. Бізге North Virginia немесе us-east-1 аймағы қажет. Қажетті инстанстардың тізімін көргеннен кейін біз LabHost деп аталатын инстансты таңдауымыз керек, содан кейін оны тоқтатуға тырысуымыз керек. Ол үшін Instance state батырмасын басып, ашылмалы тізімде Stop instance әрекетін басыңыз. Бұл әрекетті растайтын қалқымалы терезе пайда болады. Біз бұл әрекетті растаймыз, ол үшін Stop батырмасын басамыз. Осыдан кейін біз әрекетіміздің сәтті орындалғанын, инстанстың тоқтатылғанын көреміз, сонымен қатар инстанстар тізімінде instance LabHost stopping күйіне ауысқанын көреміз. Егер біз тағы біраз уақыт күтіп, тізімді жаңарту белгішесін бассақ, біздің сервис stopped күйіне ауысқанын көреміз, яғни толығымен тоқтады. Бұл жағдайда біз осы пайдаланушының атынан шығып, инкогнито терезесін жаба аламыз.
   Осымен біз зертханалық жұмысымызды аяқтадық. Сізге AWS Academy ішіндегі зертханалық жұмыстан да дұрыс шығу керек екенін еске салғым келеді. Ол үшін негізгі мәзірде End Lab батырмасын басыңыз. Қалқымалы терезеде сіз бұл әрекетті растап, Yes батырмасын басуыңыз керек. Содан кейін тағы бір қалқымалы терезе пайда болады, онда сіз "You may close this message box now...", яғни біз бұл хабарламаны жаба аламыз, сонымен қатар AWS Academy-ден шыға аламыз.
   Осымен біз зертханалық жұмысты шолу сессиясын аяқтадық. Мен сіздерді құттықтаймын. Бұл зертханалық жұмысты өз бетіңізше орындауда қиындықтар туындамайды деп үміттенемін. Егер кейбір қиындықтар туындаса, сіз әрқашан қайта оралуыңызға немесе осы белсенділікті, яғни зертханалық жұмысқа шолуды қайта көруіңізге болады. Егер тағы да басқа қиындықтар туындаса, сіз осы зертханалық жұмысты егжей-тегжейлі орындап жатқан зертханалық жұмысты талдау белсенділігін көре аласыз, онда біз не істеу керектігін көресіз. Егер сіз өзіңіз жасай алмасаңыз, мен сізге кез-келген жағдайда зертханалық жұмысты талдауды қайта қарауды ұсынамын, кем дегенде, бүкіл процестің қалай жүретінін көріп, AWS Management Console-де жұмыс туралы жалпы түсінік алуыңыз керек. 
Осы зертханалық жұмыста не үйренетінімізді қорытындылай келе, біз үшін алдын ала жасалған AWS аккаунтында қандай пайдаланушылар, қандай топтар бар екенін қарастырдық. Әрі қарай, біз осы топтардың қандай policy-лері бар екенін қарастырдық, содан кейін әрбір бұлт инженері кезіктіретін практикалық жұмысты орындадық, атап айтқанда, пайдаланушыларды осы пайдаланушылардың лауазымдық міндеттері шеңберінде тиісті IAM топтарына қосуға тырыстық. Сондай-ақ, біз IAM sign-In URL мекенжайын, яғни AWS аккаунтының ішіндегі пайдаланушылардың IAM логиніне арнайы сілтемені табуды үйрендік. Біз мұны бірнеше рет жасадық, сондай-ақ AWS IAM сервисінің ішіндегі белгілі бір пайдаланушылардың қандай рұқсаттары бар екеніне тәжірибе жасадық.
   Осымен біз зертханалық жұмысқа шолу сессиясын аяқтаймыз және келесі белсенділіктерімізде кездескенше!
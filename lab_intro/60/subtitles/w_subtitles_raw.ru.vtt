WEBVTT

00:00:00.000 --> 00:00:03.480
Добрый день, уважаемые студенты!

00:00:03.480 --> 00:00:07.880
Я рад вас всех видеть на очередной сессии «Введение

00:00:07.880 --> 00:00:10.120
в лабораторную работу».

00:00:10.120 --> 00:00:14.500
В сегодняшней лабораторной работе мы с вами тесно

00:00:14.500 --> 00:00:17.320
поработаем с сервисом Amazon VPC.

00:00:17.320 --> 00:00:18.520
Итак, давайте начнем.

00:00:18.520 --> 00:00:23.840
Для того, чтобы начать выполнять лабораторную работу, нам

00:00:23.840 --> 00:00:26.560
необходимо её предварительно открыть.

00:00:26.560 --> 00:00:30.200
Для того, чтобы до него добраться, давайте авторизуемся

00:00:30.200 --> 00:00:37.200
в AWS Academy, откроем соответствующий курс Cloud Foundations.

00:00:37.200 --> 00:00:48.680
Далее откроем в левом навигационном меню курса вкладку Modules.

00:00:48.680 --> 00:00:52.280
Далее нам необходимо перейти на пятый модуль — это Networking

00:00:52.280 --> 00:00:54.080
and Content Delivery.

00:00:54.080 --> 00:00:58.040
Если мы раскроем все активности пятого модуля, то мы увидим

00:00:58.040 --> 00:01:01.480
в нижней части лабораторную работу вторую, которая

00:01:01.480 --> 00:01:04.880
называется «Build your VPC and Launch your web server».

00:01:04.880 --> 00:01:07.380
Давайте нажмем на эту ссылку для того, чтобы перейти

00:01:07.380 --> 00:01:11.980
на основную страницу лабораторной работы.

00:01:11.980 --> 00:01:14.480
Мы добрались до основной страницы лабораторной

00:01:14.480 --> 00:01:15.480
работы.

00:01:15.480 --> 00:01:21.360
Оптонально вы можете иницировать создание AWS аккаунта для

00:01:21.360 --> 00:01:22.640
вашей сессии.

00:01:22.640 --> 00:01:25.880
Для этого необходимо нажать на кнопку Start Lab.

00:01:25.880 --> 00:01:29.680
Также я рекомендую закрыть окно терминала для того,

00:01:29.680 --> 00:01:36.160
чтобы информация с заданием лабораторной работы отобразилась

00:01:36.160 --> 00:01:37.440
на всю страницу.

00:01:37.440 --> 00:01:44.440
В этой лабораторной работе мы с вами подробнее поработаем

00:01:44.440 --> 00:01:47.880
с сервисом Amazon VPC.

00:01:47.880 --> 00:01:52.600
Amazon VPC — это сервис, который позволяет вам внутри облачных

00:01:52.600 --> 00:01:58.080
облаков AWS построить такую же сеть, которую мы строим

00:01:58.080 --> 00:02:00.840
в традиционном дата-центре, только в облаке.

00:02:00.840 --> 00:02:05.200
Все необходимые компоненты и настройки доступны.

00:02:05.200 --> 00:02:09.560
После выполнения этой лабораторной работы мы с вами научимся

00:02:09.560 --> 00:02:15.440
с использованием AWS Management Console создавать VPC, создавать

00:02:15.440 --> 00:02:19.120
сабнеты, конфигурировать security-группы, а также запускать

00:02:19.120 --> 00:02:23.200
EC2-инстанции в VPC.

00:02:23.200 --> 00:02:29.560
В среднем выполнение этой лабораторной работы занимает

00:02:29.560 --> 00:02:30.960
30 минут.

00:02:30.960 --> 00:02:34.680
Если вам требуется больше времени, никаких ограничений

00:02:34.680 --> 00:02:37.960
и проблем с этим нет, по умолчанию для выполнения

00:02:37.960 --> 00:02:40.400
этой лабораторной работы уделяется полтора часа.

00:02:40.400 --> 00:02:49.600
Я вам напоминаю, что специально для нашей сессии лабораторной

00:02:49.600 --> 00:02:53.760
работы создается временный реальный AWS-аккаунт.

00:02:53.760 --> 00:02:57.720
Он создается с некоторыми ограничениями, поэтому

00:02:57.720 --> 00:03:01.080
при попытке открыть сервис, который не предусмотрен

00:03:01.080 --> 00:03:06.480
лабораторной работой, либо использовании функционала,

00:03:06.480 --> 00:03:08.840
который также не предусмотрен лабораторной работой, вы

00:03:08.840 --> 00:03:11.080
можете видеть ошибки доступа.

00:03:11.080 --> 00:03:15.480
Это нормально, такое следует ожидать, поэтому рекомендуется

00:03:15.480 --> 00:03:18.340
сконцентрироваться на той задаче, которая дана

00:03:18.340 --> 00:03:22.320
в рамках лабораторной работы, и для этих целей все необходимые

00:03:22.320 --> 00:03:26.640
ресурсы активированы и доступны.

00:03:26.640 --> 00:03:30.080
На этой диаграмме вы можете увидеть конечный результат

00:03:30.080 --> 00:03:34.000
после успешного выполнения всех пунктов лабораторной

00:03:34.000 --> 00:03:35.000
работы.

00:03:35.000 --> 00:03:38.000
На первый взгляд может показаться сложной, но

00:03:38.000 --> 00:03:42.440
ни в коем случае не следует переживать, потому как мы

00:03:42.440 --> 00:03:45.420
пройдемся по каждому шагу, там где необходимы будут

00:03:45.420 --> 00:03:48.440
данные соответствующие комментарии, и после выполнения

00:03:48.440 --> 00:03:53.020
всех этих шагов вместе мы сможем воссоздать эту

00:03:53.020 --> 00:03:57.960
диаграмму внутри облака AWS.

00:03:57.960 --> 00:04:02.600
Самая первая задача, необходимо добраться до основной страницы

00:04:02.600 --> 00:04:04.920
AWS Management Console.

00:04:04.920 --> 00:04:10.560
Для этого в основном меню лабораторной работы необходимо

00:04:10.560 --> 00:04:14.600
нажать на кнопку Lab Start, появится всплывающее окно,

00:04:14.600 --> 00:04:17.840
в котором через некоторое время появится сообщение

00:04:17.840 --> 00:04:19.040
Lab Status Ready.

00:04:19.040 --> 00:04:22.840
Это говорит о том, что временный AWS аккаунт успешно создан

00:04:22.840 --> 00:04:25.720
и вы можете закрывать это всплывающее окно, после

00:04:25.720 --> 00:04:29.480
чего необходимо нажать на кнопку AWS.

00:04:29.480 --> 00:04:34.320
По нажатию этой кнопки вы откроете AWS Management Console

00:04:34.320 --> 00:04:38.760
и в целом делаете все необходимое, чтобы перейти к следующим

00:04:38.760 --> 00:04:40.040
шагам.

00:04:40.040 --> 00:04:44.280
Здесь одна рекомендация, для того чтобы удобнее

00:04:44.280 --> 00:04:49.400
переключаться к заданию и обратно в AWS Management Console

00:04:49.400 --> 00:04:53.920
есть возможность скопировать ссылку этой кнопки и открыть

00:04:53.920 --> 00:05:01.000
AWS Management Console либо в Inkognito режиме, либо в другом браузере.

00:05:01.000 --> 00:05:04.040
Как только мы перешли на главную страницу AWS Management

00:05:04.040 --> 00:05:08.320
Console, в лабораторной работе рекомендуется нажать на

00:05:08.320 --> 00:05:16.640
кнопку сверху слева Services и выбрать сервис VPC.

00:05:16.640 --> 00:05:21.360
Более быстрый вариант это в специальной строке для

00:05:21.360 --> 00:05:25.120
поиска сервисов ввести VPC и самая первая ссылка будет

00:05:25.120 --> 00:05:27.480
ссылка на необходимый нам сервис.

00:05:27.480 --> 00:05:32.440
Давайте перейдем на сервис VPC.

00:05:32.440 --> 00:05:35.840
Как только откроется основная страница сервиса Amazon VPC,

00:05:35.840 --> 00:05:40.320
нам необходимо в левом навигационном меню убедиться, что включена

00:05:40.320 --> 00:05:43.520
опция New VPC Experience.

00:05:43.520 --> 00:05:47.880
Если она не включена, то нажмите на переключатель,

00:05:47.880 --> 00:05:51.760
для того чтобы вы переключились на новый интерфейс сервиса

00:05:51.760 --> 00:05:53.680
Amazon VPC.

00:05:53.680 --> 00:05:56.160
Как только вы переключились, необходимо там же в левом

00:05:56.160 --> 00:06:01.960
навигационном меню перейти на вкладку VPC Dashboard.

00:06:01.960 --> 00:06:05.480
В отобразившейся странице необходимо нажать на кнопку

00:06:05.480 --> 00:06:11.960
Create VPC для того, чтобы начать иницировать создание нового

00:06:11.960 --> 00:06:13.960
VPC.

00:06:13.960 --> 00:06:20.920
В новой открышейся странице, в левом навигационном

00:06:20.920 --> 00:06:26.880
меню VPC Settings, нам необходимо выбрать VPC End Morph.

00:06:26.880 --> 00:06:30.880
Далее в Name Tag необходимо ввести значения вместо

00:06:30.880 --> 00:06:34.800
Project написать Lab, а также оставить включенную опцию

00:06:34.800 --> 00:06:38.720
After Generate, то есть флажок.

00:06:38.720 --> 00:06:42.120
Если посмотреть чуть ниже, есть возможность ввести

00:06:42.120 --> 00:06:46.080
наш IPv4 CIDR блок.

00:06:46.080 --> 00:06:52.600
Давайте введем значение 10.3.0.16.

00:06:52.600 --> 00:06:56.600
Далее укажем, что у нас будет одна Availability зона.

00:06:56.600 --> 00:07:05.640
Также у нас будет по одному Public Subnet и Private Subnet.

00:07:05.640 --> 00:07:10.040
Ниже есть секция Customize Subnets CIDR blocks, необходимо ее

00:07:10.040 --> 00:07:13.080
развернуть для того, чтобы явно указать, какие CIDR

00:07:13.080 --> 00:07:15.760
блоки относятся к нашим сабнетам.

00:07:15.760 --> 00:07:23.120
Для Public Subnet давайте укажем 10.0.0.0.0.24, для Private Subnet укажем

00:07:23.120 --> 00:07:27.440
10.0.1.0.24.

00:07:27.440 --> 00:07:33.280
Это все в Availability зоне US East 1A.

00:07:33.280 --> 00:07:37.800
Далее мы укажем, что нам нужен NAT Gateway в одной Availability

00:07:37.800 --> 00:07:42.120
зоне, поэтому выберем опцию In 1AZ.

00:07:42.120 --> 00:07:46.020
Для VPC Endpoints выберем вариант None, так как мы в этой лаборатурной

00:07:46.020 --> 00:07:51.040
работе не будем использовать VPC Endpoints.

00:07:51.040 --> 00:07:55.600
Еще ниже есть настройка DNS Host Name и DNS Resolution, нам

00:07:55.600 --> 00:07:58.760
необходимо эти варианты оставить включенными,

00:07:58.760 --> 00:08:02.040
то есть enabled.

00:08:02.040 --> 00:08:06.480
Вы можете увидеть с правой стороны превью и необходимо

00:08:06.480 --> 00:08:11.720
проверить, что все совпадает, а именно VPC это Lab-VPC.

00:08:11.720 --> 00:08:18.720
Далее сабнеты у нас находятся в Availability зоне US East 1A.

00:08:18.720 --> 00:08:34.920
Название Public Subnet Lab-Subnet-Public1 US East 1A, Private Subnet Lab-Subnet Private1 US East 1A.

00:08:34.920 --> 00:08:40.560
Далее у нас есть два road table, первый Lab-RTB-Public, второй

00:08:40.560 --> 00:08:43.560
Lab-RTB-Private1 US East 1A.

00:08:43.560 --> 00:08:50.360
То есть два road table на каждый из видов сабнетов.

00:08:50.360 --> 00:08:53.600
Далее необходимо удостовериться, что наши Network Connections это

00:08:53.600 --> 00:09:01.400
Lab-IGV, то есть интернет-гейтвей, а второй это Lab-NAT Public1 US East 1A,

00:09:01.400 --> 00:09:05.520
то есть NAT-гейтвей, который находится в Availability зоне

00:09:05.520 --> 00:09:06.520
1A.

00:09:06.520 --> 00:09:12.440
Здесь все необходимые настройки совпадают, нам необходимо

00:09:12.440 --> 00:09:16.300
в нижней части нажать на кнопку Create VPC.

00:09:16.300 --> 00:09:19.240
Вы перейдете на страницу со статусами создания

00:09:19.240 --> 00:09:23.880
каждого из ресурсов внутри нашего VPC.

00:09:23.880 --> 00:09:26.480
Создание NAT-гейтвей потребует несколько минут, поэтому

00:09:26.480 --> 00:09:29.180
нам необходимо подождать пока все ресурсы будут

00:09:29.180 --> 00:09:37.040
успешно созданы и внизу отобразится кнопка View VPC.

00:09:37.040 --> 00:09:39.560
Как только отобразится и станет доступна эта кнопка,

00:09:39.560 --> 00:09:42.600
нам необходимо на нее нажать, после чего мы перейдем

00:09:42.600 --> 00:09:49.480
на страницу с нашим VPC.

00:09:49.480 --> 00:09:54.000
Мы с вами таким образом успешно создали VPC, в котором есть

00:09:54.000 --> 00:09:57.000
два сабнета, один Public, другой Private.

00:09:57.000 --> 00:10:00.920
Оба сабнета находятся в одной Availability зоне и для

00:10:00.920 --> 00:10:06.200
каждого сабнета было создано отдельный road table.

00:10:06.200 --> 00:10:09.520
Помимо этих компонентов также были созданы интернет-гейтвей

00:10:09.520 --> 00:10:10.520
и NAT-гейтвей.

00:10:10.520 --> 00:10:17.320
Для того, чтобы посмотреть соответствующие компоненты,

00:10:17.320 --> 00:10:20.920
в левом навигационном меню вы можете перейти на соответствующие

00:10:20.920 --> 00:10:21.920
вкладки.

00:10:21.920 --> 00:10:24.360
Например, сабнеты для того, чтобы посмотреть детали

00:10:24.360 --> 00:10:27.760
созданных из существующих сабнетов, либо road tables для

00:10:27.760 --> 00:10:30.680
того, чтобы посмотреть какие road tables есть на этой

00:10:30.680 --> 00:10:31.680
AWS аккаунте.

00:10:31.680 --> 00:10:36.080
В этой диаграмме вы можете видеть ту часть, которую

00:10:36.080 --> 00:10:38.120
мы на текущий момент создали.

00:10:38.120 --> 00:10:43.240
Оставшуюся часть мы будем создавать в AWS Management Console

00:10:43.240 --> 00:10:44.800
в следующих наших задачах.

00:10:44.800 --> 00:10:50.120
Здесь бы хотелось бы также обратить внимание и напомнить,

00:10:50.120 --> 00:10:54.040
что интернет-гейтвей это тот ресурс в рамках VPC,

00:10:54.040 --> 00:10:58.800
который дает возможность нашим EC2-инстанцам выходить

00:10:58.800 --> 00:11:01.760
в интернет, а также быть доступными из интернета.

00:11:01.760 --> 00:11:12.040
У нас есть public subnet, который называется lab-subnet public1-useast1a.

00:11:12.040 --> 00:11:18.200
У него CIDR блок 10.0.0.0.0-24.

00:11:18.200 --> 00:11:26.880
Это говорит о том, что 24 бита среди 32 битов IP-адреса

00:11:26.880 --> 00:11:27.880
они зафиксированы.

00:11:27.880 --> 00:11:31.200
Значит, 8 битов в последних они могут меняться.

00:11:31.200 --> 00:11:36.000
Если мы говорим 8 битов, это значит 2 в степени 8 256

00:11:36.000 --> 00:11:39.920
уникальных IP-адресов, которые начинаются с первого IP-адреса,

00:11:39.920 --> 00:11:44.280
это 10.0.0.0.

00:11:44.280 --> 00:11:48.000
И самое последнее значение, которое может принимать

00:11:48.000 --> 00:11:55.120
этот CIDR блок, это 10.0.0.255.

00:11:55.120 --> 00:11:59.080
Таким образом, также для этого subnet указывает следующую

00:11:59.080 --> 00:12:04.280
маску, это 10.0.0.x, который говорит о том, что для последнего

00:12:04.280 --> 00:12:07.680
блока может приниматься любое возможное значение.

00:12:07.680 --> 00:12:13.640
А как мы с вами помним, каждый блок, часть IP V4-адреса,

00:12:13.640 --> 00:12:24.440
это 8 битов, что равносильно уникальным 256 значениям.

00:12:24.440 --> 00:12:32.040
А это значит значение от 0 до 255 включительно.

00:12:32.040 --> 00:12:36.640
Следующий компонент, который мы создали в рамках VPC, это

00:12:36.640 --> 00:12:43.720
NAT-гейтвей, который позволяет для instance и C2-инстенсов

00:12:43.720 --> 00:12:49.280
внутри private subnet выходить в интернет.

00:12:49.280 --> 00:12:55.200
Но отличительная особенность NAT-гейтвей, это то, что эти

00:12:55.200 --> 00:12:59.760
инстенсы внутри private subnet недоступны из интернета.

00:12:59.760 --> 00:13:03.120
Таким образом, они защищены от прямого обращения.

00:13:03.120 --> 00:13:08.120
Если мы говорим про наш private subnet, который называется

00:13:08.120 --> 00:13:14.000
lab-subnet-private-1-useast-1a, то у него CIDR блок немножко

00:13:14.000 --> 00:13:19.720
отличается, это 10.0.1.0.24.

00:13:19.720 --> 00:13:23.840
Слеш 24 означает также, что в этом CIDR блоке у нас есть

00:13:23.840 --> 00:13:32.040
256 IP-адресов, которые начинаются с 10.0.1.0 и заканчивается

00:13:32.040 --> 00:13:36.480
10.0.1.255.

00:13:36.480 --> 00:13:45.480
Также этот CIDR блок обозначает как 10.0.1.x.

00:13:45.480 --> 00:13:48.600
Мы с вами добрались до второй задачи.

00:13:48.600 --> 00:13:51.600
Здесь мы будем создавать дополнительные subnets внутри

00:13:51.600 --> 00:13:55.480
нашего VPC.

00:13:55.480 --> 00:13:59.680
Эти новые VPC будут находиться во второй availability zone.

00:13:59.680 --> 00:14:02.600
Также здесь хотелось бы отметить, что если внутри

00:14:02.600 --> 00:14:06.120
VPC у нас находится несколько availability zone, то мы говорим

00:14:06.120 --> 00:14:10.760
про наше решение, наша инфраструктура, она highly available, что соответствует

00:14:10.760 --> 00:14:13.760
best practices AWS.

00:14:13.760 --> 00:14:17.680
Когда мы создаем VPC и ее компоненты, используя помощник, как

00:14:17.680 --> 00:14:22.640
мы сделали ранее, то все те компоненты, которые создались,

00:14:22.640 --> 00:14:25.920
они могут быть удалены, изменены, а также можем создавать

00:14:25.920 --> 00:14:29.360
новые компоненты внутри этого VPC.

00:14:29.360 --> 00:14:31.440
Давайте создадим дополнительные subnets.

00:14:31.440 --> 00:14:36.920
Для этого необходимо в левом навигационном меню перейти

00:14:36.920 --> 00:14:38.600
на вкладку subnets.

00:14:38.600 --> 00:14:43.240
Мы сейчас будем создавать второй public subnet.

00:14:43.240 --> 00:14:47.760
Необходимо на открытой странице со списком subnets нажать

00:14:47.760 --> 00:14:50.680
на кнопку create subnet.

00:14:50.680 --> 00:14:54.800
На открытой странице по созданию нового subnet необходимо

00:14:54.800 --> 00:14:57.640
ввести следующие входные данные.

00:14:57.640 --> 00:15:03.760
Как VPC ID мы указываем lab VPC, выбираем lab VPC из выпадающего

00:15:03.760 --> 00:15:04.760
меню.

00:15:04.760 --> 00:15:09.720
Далее как subnet name мы указываем lab subnet public to.

00:15:09.720 --> 00:15:13.880
Как availability zone нам необходимо выбрать отличную от предыдущей

00:15:13.880 --> 00:15:15.360
availability zone.

00:15:15.360 --> 00:15:19.640
Как пример давайте выберем US East 1B.

00:15:19.640 --> 00:15:24.320
Как cedar block укажем не пересекающийся cedar block с предыдущими

00:15:24.320 --> 00:15:29.800
subnets, а именно 10.2.0.24.

00:15:29.800 --> 00:15:35.160
В этом cedar block также присутствует 256 IP адресов.

00:15:35.160 --> 00:15:40.840
В нижней части страницы необходимо нажать на кнопку

00:15:40.840 --> 00:15:44.160
create subnet для того чтобы ее создать.

00:15:44.160 --> 00:15:48.560
Давайте теперь создадим второй private subnet.

00:15:48.560 --> 00:15:52.300
Для этого также необходимо нажать на кнопку create subnet

00:15:52.300 --> 00:15:54.840
и ввести следующие значения.

00:15:54.840 --> 00:16:00.560
Как VPC ID необходимо в выпадающем списке выбрать наш созданный

00:16:00.560 --> 00:16:02.680
VPC lab VPC.

00:16:02.680 --> 00:16:08.020
Далее как subnet name указать lab subnet private to.

00:16:08.020 --> 00:16:12.280
Как availability zone необходимо выбрать вторую availability

00:16:12.280 --> 00:16:14.920
зону, а именно US East 1B.

00:16:14.920 --> 00:16:18.960
И как cedar block необходимо указать следующий доступный

00:16:18.960 --> 00:16:26.280
cedar block следующий набор из 256 IP адресов, а именно

00:16:26.280 --> 00:16:32.680
10.0.3.0.24.

00:16:32.680 --> 00:16:36.000
Как только мы это все заполняем необходимо нажать на кнопку

00:16:36.000 --> 00:16:40.040
create subnet для того чтобы этот private subnet создался.

00:16:40.040 --> 00:16:49.680
Для того чтобы предоставить доступ в интернет для инстенсов

00:16:49.680 --> 00:16:53.700
внутри второго private subnet нам необходимо этот трафик

00:16:53.700 --> 00:16:56.000
пустить через NAT gateway.

00:16:56.000 --> 00:17:01.280
NAT gateway как мы с вами помним мы создавали в первой availability

00:17:01.280 --> 00:17:02.280
зоне.

00:17:02.280 --> 00:17:05.440
Для того чтобы этот трафик направить на NAT gateway мы

00:17:05.440 --> 00:17:07.440
будем использовать road table.

00:17:07.440 --> 00:17:11.840
Road table это некий набор правил или так называемых

00:17:11.840 --> 00:17:19.800
root roots of root, который определяет каким образом трафик может

00:17:19.800 --> 00:17:26.240
двигаться внутри нашей VPC.

00:17:26.240 --> 00:17:30.680
Далее нам необходимо перейти на вкладку road tables в левом

00:17:30.680 --> 00:17:33.560
навигационном меню.

00:17:33.560 --> 00:17:36.520
На открывшейся странице необходимо выбрать road table

00:17:36.520 --> 00:17:37.520
lab-rtb-private1-useast1.

00:17:37.520 --> 00:17:43.720
Это тот road table который создался вместе с созданием

00:17:43.720 --> 00:17:45.680
VPC.

00:17:45.680 --> 00:17:49.640
Как только мы выбираем этот road table внизу выходит дополнительная

00:17:49.640 --> 00:17:53.960
информация и необходимо нажать на вкладку roads.

00:17:53.960 --> 00:18:00.920
В этой вкладке будет один единственный road который

00:18:00.920 --> 00:18:04.520
как target указывает наш NAT gateway, а как destination указывает

00:18:04.520 --> 00:18:05.520
интернет.

00:18:05.520 --> 00:18:11.000
Этот road позволяет всем сабнетам, private сабнетам, которые

00:18:11.000 --> 00:18:14.520
привязаны к этому road table через NAT gateway выходить

00:18:14.520 --> 00:18:16.200
в интернет.

00:18:16.200 --> 00:18:19.800
Таким образом для всех инстинсов внутри private сабнета становится

00:18:19.800 --> 00:18:23.440
доступным интернет, но из интернета и извне до этих

00:18:23.440 --> 00:18:25.400
инстинсов добраться невозможно.

00:18:25.400 --> 00:18:32.240
Что нам необходимо сделать так это второй созданный

00:18:32.240 --> 00:18:35.120
private сабнет привязать к этому road table.

00:18:35.120 --> 00:18:40.000
Для этого необходимо нажать на вкладку subnet associations и

00:18:40.000 --> 00:18:48.040
в отобразившейся вкладке необходимо нажать на кнопку

00:18:48.040 --> 00:18:51.160
edit subnet associations.

00:18:51.160 --> 00:18:55.000
Мы увидим список сабнетов, а также те сабнеты которые

00:18:55.000 --> 00:18:59.760
уже привязаны к этому road table они будут отмечены.

00:18:59.760 --> 00:19:03.500
В нашем случае это первый private subnet который мы создавали

00:19:03.500 --> 00:19:08.240
вместе с VPC это lab subnet private 1 use east 1a.

00:19:08.240 --> 00:19:09.880
Он уже будет выбран.

00:19:09.880 --> 00:19:13.240
Нам необходимо дополнительно выбрать созданный нами

00:19:13.240 --> 00:19:16.080
subnet lab subnet private 2.

00:19:16.080 --> 00:19:25.480
Отмечаем ее галочкой и нажимаем на кнопку save associations.

00:19:25.480 --> 00:19:32.360
Теперь нам необходимо ко второму road table привязать

00:19:32.360 --> 00:19:34.400
второй созданный public subnet.

00:19:34.400 --> 00:19:40.080
Для этого выбираем road table lab rtb public.

00:19:40.080 --> 00:19:45.720
Если открыть вкладку roads то мы увидим там также

00:19:45.720 --> 00:19:50.520
один road один путь где как destination указан интернет

00:19:50.520 --> 00:19:52.040
и как target интернет gateway.

00:19:52.040 --> 00:19:57.600
Что нам необходимо сделать это второй public subnet привязать

00:19:57.600 --> 00:19:59.680
к этому road table.

00:19:59.680 --> 00:20:03.880
Для этого необходимо перейти на вкладку subnet associations

00:20:03.880 --> 00:20:07.960
и также нажать на кнопку edit subnet associations.

00:20:07.960 --> 00:20:11.280
Здесь вы увидите список существующих сабнетов

00:20:11.280 --> 00:20:14.920
и те сабнеты которые уже привязаны к этому road table

00:20:14.920 --> 00:20:16.680
будут отмечены галочкой.

00:20:16.680 --> 00:20:21.680
А именно это lab subnet public 1 use east 1a.

00:20:21.680 --> 00:20:25.200
Нам дополнительно необходимо поставить галочку возле

00:20:25.200 --> 00:20:30.080
второго созданного public subnet который называется lab subnet

00:20:30.080 --> 00:20:31.080
public 2.

00:20:31.080 --> 00:20:36.480
После чего нажать на кнопку save associations.

00:20:36.480 --> 00:20:39.160
Как только мы завершим все эти действия то все

00:20:39.160 --> 00:20:43.640
то что мы создали внутри AWS аккаунта в диаграмме

00:20:43.640 --> 00:20:46.640
можно отобразить следующим образом.

00:20:46.640 --> 00:20:50.680
Мы видим что у нас появились два дополнительных сабнета

00:20:50.680 --> 00:20:54.920
которые привязаны к соответствующим road table и находятся в

00:20:54.920 --> 00:20:58.800
во второй availability зоне.

00:20:58.800 --> 00:21:02.160
Мы добрались до третьего задания и здесь нам необходимо

00:21:02.160 --> 00:21:06.000
создать security группу внутри нашего VPC.

00:21:06.000 --> 00:21:08.000
Что такое security группа?

00:21:08.000 --> 00:21:10.880
Это тот ресурс который выступает как виртуальный

00:21:10.880 --> 00:21:17.640
firewall для наших EC2 инстенсов и защищает от нежелательного

00:21:17.640 --> 00:21:21.440
интернет трафика и разрешает только тот трафик который

00:21:21.440 --> 00:21:23.400
разрешен.

00:21:23.400 --> 00:21:26.520
Для того чтобы создать security группу нам необходимо

00:21:26.520 --> 00:21:29.400
в левом навигационном меню перейти на вкладку

00:21:29.400 --> 00:21:31.160
security groups.

00:21:31.160 --> 00:21:35.080
В открывшейся вкладке необходимо нажать страницы необходимо

00:21:35.080 --> 00:21:38.920
нажать на кнопку create security group.

00:21:38.920 --> 00:21:42.280
Далее указать необходимые данные для нашей новой

00:21:42.280 --> 00:21:43.800
security группы.

00:21:43.800 --> 00:21:46.600
Как имя укажем web security group.

00:21:46.600 --> 00:21:52.040
Как description можем добавить enable HTTP access.

00:21:52.040 --> 00:21:57.960
Как VPC необходимо убрать предложенный вариант VPC

00:21:57.960 --> 00:22:05.400
и в выпадающем меню выбрать наш созданный VPC lab VPC.

00:22:05.400 --> 00:22:11.120
Далее в inbound рулах необходимо нажать на кнопку add rule

00:22:11.120 --> 00:22:13.440
и добавить следующие значения.

00:22:13.440 --> 00:22:18.840
Как тип мы указываем HTTP, как source указываем anyway IPv4

00:22:18.840 --> 00:22:22.520
то есть весь интернет и как description описание

00:22:22.520 --> 00:22:26.200
можно написать перемист web requests.

00:22:26.200 --> 00:22:29.560
Необходимо прокрутить ниже и нажать на кнопку

00:22:29.560 --> 00:22:31.720
create security group.

00:22:31.720 --> 00:22:37.080
Таким образом мы создали с вами security группу которую

00:22:37.080 --> 00:22:43.640
привяжем к ec2 instance.

00:22:43.640 --> 00:22:47.400
Мы переходим к четвертому заданию где нам необходимо

00:22:47.400 --> 00:22:50.960
создать наш веб сервер.

00:22:50.960 --> 00:22:58.040
Веб сервер это ec2 instance и нам необходимо его сконфигурировать

00:22:58.040 --> 00:23:01.920
чтобы он выступал как веб сервер.

00:23:01.920 --> 00:23:05.320
Для того чтобы создать ec2 instance нам необходимо перейти

00:23:05.320 --> 00:23:06.440
на этот сервис.

00:23:06.440 --> 00:23:07.960
Для этого есть несколько путей.

00:23:07.960 --> 00:23:13.720
В лабораторной работе рекомендуется нажать на кнопку services и

00:23:13.720 --> 00:23:16.160
там найти сервис ec2.

00:23:16.160 --> 00:23:20.560
Более быстрый и простой вариант это в специальной

00:23:20.560 --> 00:23:23.280
строке поиска сервисов начать вводить нужный нам

00:23:23.280 --> 00:23:26.280
сервис в нашем случае ec2.

00:23:26.280 --> 00:23:29.920
Как только вы начнете вводить отобразится ниже ссылка

00:23:29.920 --> 00:23:33.000
на соответствующие сервисы.

00:23:33.000 --> 00:23:37.560
И самая первая ссылка будет та ссылка которая нам нужна.

00:23:37.560 --> 00:23:39.560
Давайте на нее перейдем.

00:23:39.560 --> 00:23:41.760
Как только мы перейдем на основную страницу сервиса

00:23:41.760 --> 00:23:45.480
ec2 нам необходимо нажать на кнопку launch instance чтобы

00:23:45.480 --> 00:23:47.080
создать новый instance.

00:23:47.080 --> 00:23:50.240
В открывшейся странице давайте введем как имя

00:23:50.240 --> 00:23:51.840
веб сервер one.

00:23:51.840 --> 00:23:57.160
Следует иметь в виду также что то значение которое

00:23:57.160 --> 00:24:03.960
мы сейчас ввели оно будет значением для тега с ключом

00:24:03.960 --> 00:24:04.960
name.

00:24:04.960 --> 00:24:09.440
То есть создается пара ключ значения внутри тегов

00:24:09.440 --> 00:24:13.840
как ключ выступает name как value значение выступает

00:24:13.840 --> 00:24:17.200
то значение которое мы ввели в этом поле.

00:24:17.200 --> 00:24:19.480
Следующее нам необходимо определиться с AMI.

00:24:19.480 --> 00:24:23.720
AMI это Amazon Machine Instance и мы выбираем ее для того чтобы

00:24:23.720 --> 00:24:27.080
понять какая операционная система будет установлена

00:24:27.080 --> 00:24:29.400
в нашем EC2 instance.

00:24:29.400 --> 00:24:32.680
Давайте оставим все значения по дефолту а именно Amazon

00:24:32.680 --> 00:24:42.000
Linux и второе поле это Amazon Linux 2 AMI в скобках HVM.

00:24:42.000 --> 00:24:49.280
Следующая настройка это тип instance.

00:24:49.280 --> 00:24:54.560
Предлагается оставить дефолтовое значение t2.micro.

00:24:54.560 --> 00:24:58.440
Когда мы выбираем значение instance type мы определяем какое

00:24:58.440 --> 00:25:02.760
железо какое hardware будет подключено к нашему instance.

00:25:02.760 --> 00:25:06.680
Это может быть сильный мощный сервер либо какой то слабый

00:25:06.680 --> 00:25:10.200
но дешевый сервер.

00:25:10.200 --> 00:25:15.800
Далее необходимо выбрать key player то есть ключи для

00:25:15.800 --> 00:25:19.640
того чтобы иметь возможность подключаться по SSH к нашему

00:25:19.640 --> 00:25:20.640
серверу.

00:25:20.640 --> 00:25:27.080
Давайте в выпадающем меню выберем walk key это тот SSH

00:25:27.080 --> 00:25:31.560
ключ который предварительно был для нас создан.

00:25:31.560 --> 00:25:34.640
Далее мы переходим к настройкам сетей.

00:25:34.640 --> 00:25:39.680
Для этого необходимо в секции network settings нажать

00:25:39.680 --> 00:25:44.320
на кнопку edit для того чтобы ввести соответствующие

00:25:44.320 --> 00:25:45.320
правки.

00:25:45.320 --> 00:25:48.000
Как network мы выбираем labvpc.

00:25:48.000 --> 00:25:51.960
Далее как subnet выбираем созданный нами вручную

00:25:51.960 --> 00:25:56.040
публичный subnet это lab-subnet-public2.

00:25:56.040 --> 00:26:00.320
Далее в пункте auto assign public IP выбираем enable для

00:26:00.320 --> 00:26:04.600
того чтобы для этого сервера выделился временный public

00:26:04.600 --> 00:26:09.240
IP на который мы сможем с интернета обращаться.

00:26:09.240 --> 00:26:14.280
Далее есть настройки security group то есть нам необходимо

00:26:14.280 --> 00:26:18.600
в секции firewall выбрать select an existing security group то

00:26:18.600 --> 00:26:21.800
есть выбрать security группу которая уже существует

00:26:21.800 --> 00:26:27.560
и для common security groups отметить галочкой web security группу.

00:26:27.560 --> 00:26:32.520
Это та security группа которую мы создавали с вами ранее.

00:26:32.520 --> 00:26:37.240
После того как мы привяжем эту security группу то до

00:26:37.240 --> 00:26:45.360
этого EC2 instance будет разрешен доступ по HTTP из интернета.

00:26:45.360 --> 00:26:48.600
Мы заканчиваем настройку сетей дальше мы переходим

00:26:48.600 --> 00:26:52.640
к настройкам жестких дисков.

00:26:52.640 --> 00:26:56.960
Здесь нет необходимости менять какие либо настройки

00:26:56.960 --> 00:26:59.000
мы все оставляем по умолчанию.

00:26:59.000 --> 00:27:02.800
По умолчанию как root volume то есть корневой жесткий

00:27:02.800 --> 00:27:07.440
диск создается SSD жесткий диск общего назначения

00:27:07.440 --> 00:27:12.320
general purpose и выделяется 8 гигабайт памяти.

00:27:12.320 --> 00:27:17.240
По необходимости вы можете добавлять больше жестких

00:27:17.240 --> 00:27:20.080
дисков также вы можете вместо 8 гигабайт выбрать

00:27:20.080 --> 00:27:23.360
большее значение но в рамках лабораторной работы это

00:27:23.360 --> 00:27:24.360
не требуется.

00:27:24.360 --> 00:27:30.120
Чуть ниже у нас также есть специальная настройка

00:27:30.120 --> 00:27:35.400
которая находится в секции Advanced details называется user

00:27:35.400 --> 00:27:36.400
data.

00:27:36.400 --> 00:27:42.000
User data это специальное поле куда вы можете ввести ваши

00:27:42.000 --> 00:27:45.600
команды скрипты которые запустятся ровно один

00:27:45.600 --> 00:27:51.080
раз в момент первого запуска вашего instance.

00:27:51.080 --> 00:27:54.680
Если мы скопируем и ставим следующий кусок кода то

00:27:54.680 --> 00:28:00.240
есть набор команд то мы в момент запуска нашего

00:28:00.240 --> 00:28:10.680
instance загрузим и установим а также запустим php веб-приложение.

00:28:10.680 --> 00:28:14.960
Как только мы закончили с настройками user data нам

00:28:14.960 --> 00:28:19.440
необходимо в правой части нажать на кнопку launch instance

00:28:19.440 --> 00:28:22.080
вы увидите сообщение о том что операция была выполнена

00:28:22.080 --> 00:28:26.200
успешно и в новой странице необходимо нажать на кнопку

00:28:26.200 --> 00:28:28.360
view all instances.

00:28:28.360 --> 00:28:33.800
Вас перенаправить на страницу со всеми instance в этом AWS

00:28:33.800 --> 00:28:35.640
аккаунте и соответствующем регионе.

00:28:35.640 --> 00:28:43.360
В этом списке вы также увидите созданный нами instance который

00:28:43.360 --> 00:28:45.600
называется web server 1.

00:28:45.600 --> 00:28:48.160
Нам необходимо подождать несколько минут до того

00:28:48.160 --> 00:28:54.800
момента как колонка status check не будет заполнена значением

00:28:54.800 --> 00:28:57.440
2 из 2 все проверки пройдены.

00:28:57.440 --> 00:29:00.640
Для того чтобы обновлять состояние вы можете нажимать

00:29:00.640 --> 00:29:06.360
на соответствующий иконку обновления.

00:29:06.360 --> 00:29:12.980
Как только пройдет несколько минут и status check обновится

00:29:12.980 --> 00:29:19.120
давайте выберем наш instance и как только мы это сделаем

00:29:19.120 --> 00:29:22.480
нижней части отобразится дополнительная информация

00:29:22.480 --> 00:29:24.200
об этом инстанции.

00:29:24.200 --> 00:29:29.360
Во вкладке details нам необходимо будет скопировать public ipv4

00:29:29.360 --> 00:29:38.240
DNS далее скопировать скопированный ip-адрес необходимо в режиме

00:29:38.240 --> 00:29:43.480
incognito в браузере в новом окне ставить строку поиска

00:29:43.480 --> 00:29:45.360
и нажать enter.

00:29:45.360 --> 00:29:48.640
Как только вы это нажмете откроется страница созданная

00:29:48.640 --> 00:29:52.900
нами которая обслуживается нашим веб сервером и вы

00:29:52.900 --> 00:29:57.520
должны увидеть логотип AWS и также некоторую мета информацию

00:29:57.520 --> 00:29:59.880
о нашем инстанции.

00:29:59.880 --> 00:30:02.260
Если вы все это увидели это говорит о том что вы

00:30:02.260 --> 00:30:04.160
все шаги выполнили верно.

00:30:04.160 --> 00:30:07.160
Я вас поздравляю с окончанием нашей лабораторной работы.

00:30:07.160 --> 00:30:15.020
Ниже вы видите диаграмму в котором указаны все компоненты

00:30:15.020 --> 00:30:21.720
которые мы создали в рамках нашей лабораторной работы.

00:30:21.720 --> 00:30:24.720
На этом еще раз поздравляю мы закончили лабораторную

00:30:24.720 --> 00:30:25.720
работу.

00:30:25.720 --> 00:30:30.800
Теперь нам необходимо безопасно закрыть и завершить лабораторную

00:30:30.800 --> 00:30:31.800
работу.

00:30:31.800 --> 00:30:37.040
Для этого необходимо в странице AWS Академии с лабораторной

00:30:37.040 --> 00:30:41.240
работы в верхней правой части меню нажать на кнопку

00:30:41.240 --> 00:30:42.240
end lab.

00:30:42.240 --> 00:30:48.460
Выдет всплывающее окно с подтверждением необходимо

00:30:48.460 --> 00:30:54.100
нажать на yes после чего выйдет другое окно с некоторой

00:30:54.100 --> 00:30:55.640
текстовой информацией.

00:30:55.640 --> 00:30:59.920
Как только вы там увидите сообщение что delete has been

00:30:59.920 --> 00:31:04.560
initiated you may close this message box now то это говорит о том

00:31:04.560 --> 00:31:07.400
что вы можете закрыть эту страницу и можете закрывать

00:31:07.400 --> 00:31:16.360
в целом лабораторную работу и выходить с AWS Академии.

00:31:16.360 --> 00:31:21.960
На этом мы завершили сессию ведения в лабораторную

00:31:21.960 --> 00:31:22.960
работу.

00:31:22.960 --> 00:31:23.960
Я вас поздравляю.

00:31:23.960 --> 00:31:39.040
А мы с вами увидимся на следующих наших активностях.
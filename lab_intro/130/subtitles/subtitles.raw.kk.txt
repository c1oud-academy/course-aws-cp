Қайырлы күн, құрметті студенттер! Мен сіздердің барлығыңызды келесі зертханалық шолу сессиясында көруге қуаныштымын. Бүгінгі зертханалық жұмыстың тақырыбы Scale & Load Balance сіздің архитектураңыз. Сонымен, бастайық.
Бізге бірінші кезекте AWS академиясында тиісті Cloud Foundation курсын ашу керек, содан кейін сол жақ навигация мәзіріндегі Модульдерге өтіңіз. Ашылған бет сізге модульді көрсетеді 10 - Автоматты масштабтау және бақылау, және сіз Lab 6 - Масштаб пен жүктеме балансын көресіз. Негізгі зертханалық бетке өту үшін оны басайық. Мұнда біз Терминал терезесін тиісті элементті алып тастап, зертханалық тапсырманы оқуды жеңілдету үшін тек README қалдырып жасыра аламыз. Сондай-ақ, сессияға уақытша AWS есептік жазбасын басуды бастау үшін “Бастау зертханасы” түймесін қатар басуға болады.
Бұл зертханада біз серпімді жүктемені теңдестіру қызметтерін мұқият қарастырамыз - ELB және Auto Scaling. Біз ELB-ді мақсаттарымызға трафикті теңестіру үшін қолданамыз және АТ ресурстарымызды динамикалық түрде көбейту немесе азайту үшін Auto Scaling қолданамыз. ACG-мен бірге қолданылатын ең көп таралған қызмет, яғни Auto Scaling Group, Amazon EC2 даналары болып табылады.
Бүгін біз сіздермен не істейміз? Біріншіден, біз қолданыстағы дананың AMI көшірмесін жасаймыз. Әрі қарай, біз жүктемені теңестіргішті жасаймыз, Auto Scaling тобын конфигурациялаймыз және іске қосамыз, барлық осы қызметтердің қалай жұмыс істейтінін, Auto Scaling қалай жұмыс істейтінін көреміз және дабылдардағы осы өзгерістерді көре аламыз және Amazon CloudWatch-те осы процесті бақылай аламыз. Бұл зертханалық жұмысты аяқтау үшін 30 минут жұмсау ұсынылады. Естеріңізге сала кетейін, егер сізге көбірек уақыт қажет болса, сіз әрқашан метрді қалпына келтіріп, зертханалық жұмыстарды жалғастыра аласыз.
Зертханалық жұмысымызды бастамас бұрын, AWS ішіндегі қазіргі сәулет осылай көрінетінін көреміз. Осы зертханалық жұмыстың бір бөлігі ретінде не жасалады: біз Load Balancer жасаймыз, Public Subnet 2-де орналасқан веб-инстанцияны жоғарғы оң жақтан Жеке ішкі желіге жібереміз және Load Balancer және Auto Scaling сілтемесін орнатамыз. Осылайша, біз қол жетімділік аймақтарында қажет болған жағдайда даналарды жасаймыз, яғни A қол жетімділік аймағы және B қол жетімділік аймағы.
Біріншіден, біз зертханалық жұмысты бастау үшін AWS басқару консоліне баруымыз керек. Мұны істеу үшін, егер сіз оны әлі жасамаған болсаңыз, жоғарғы оң жақта “Бастау зертханасы” түймесін басу керек. Оны басқаннан кейін, зертханалық жұмыстың күйін көрсететін қалқымалы терезе пайда болады, яғни “Зертханалық күй: жаратылыста”. Күй Дайын күйіне өзгергеннен кейін, сіз осы терезені жаба аласыз, содан кейін зертханалық сессия үшін жасалған уақытша AWS есептік жазбасына ауысу үшін AWS түймесін басыңыз.
AWS басқару консоліне жеткеннен кейін біз бірінші тапсырмаға ауыса аламыз. Мұнда біз AMI көшірмесін жасау керек. Бұл AMI Auto Scaling тобының астында жаңа даналар жасау үшін пайдаланылады. Мұны істеу үшін біз EC2-ді қызмет іздеу жолағында теруді бастауымыз керек немесе Қызметтер түймесін басып, ашылмалы мәзірден Amazon EC2 табыңыз. Сол жақ шарлау мәзірінде болғаннан кейін, біз даналарды таңдауымыз керек және сол аймақтағы AWS есептік жазбасындағы барлық даналардың тізімін көреміз. Егер сіз даналарды көрмесеңіз, сізде Солтүстік Вирджиния немесе біз-шығыс-1 бар екенін тексеріңіз. Веб-сервер 1 деп аталатын дананы көру керек. Күйді тексеру бағанының 2/2 екенін тексеру керек, бұл сервердің сәтті жасалғанын және пайдалануға дайын екенін көрсетеді. Мұны көргеннен кейін сізге сол дананы таңдау керек. Содан кейін Әрекеттер мәзірінің элементінен Сурет және шаблондар опциясын таңдаңыз. Содан кейін Суретті жасау опциясын нұқыңыз. Ашылған бетте біз оны көрсетуіміз керек Сурет атауы: WebServerami. Содан кейін, Image сипаттамасы ретінде веб-сервер үшін Lab AMI көрсетіңіз және ең төменгі жағындағы Кескінді жасау түймесін басыңыз. Сіз жаңадан құрылған AMI және оның тиісті идентификаторын көресіз. Бұл идентификаторды көшіру керек, өйткені біз оны кейінірек келесі тапсырмада қолданамыз.
Біз екінші тапсырмаға көшеміз және мұнда жүктеме теңгерімін жасауымыз керек. Load Balancer - бұл біздің есептеу қуатымызға жүктемені теңестіруге көмектесетін IT-ресурс екенін еске салғым келеді. Біздің жағдайда, бұл Amazon EC2 даналары және біз бірнеше қол жетімділік аймақтары бойынша трафикті теңестіру үшін Load Balancer теңшейміз. Бізге бірінші кезекте мақсатты топтар құру керек, яғни бұл Load Balancer трафигі қайда кететінін көрсететін ресурстар. Сол жақ шарлау мәзірінен Мақсатты топтарды таңдау керек. Содан кейін ашылатын бетте Мақсатты топ жасау түймесін басыңыз. Мақсатты тип ретінде біз даналарды таңдауымыз керек Мақсатты топ атауы ретінде LabGroup-ты көрсетейік, сонымен қатар VPC көрсетуіміз керек. Ашылмалы мәзірден Lab VPC таңдайық. Әрі қарай, біз келесі батырманы басуымыз керек, сонда сіз Мақсатты тіркеу бөлімін көресіз. Қазіргі уақытта біздің мақсаттарымыз жоқ, сондықтан біз бұл қадамды өткізіп жіберіп, Мақсатты топ жасау түймесін басыңыз.
Енді біз жүктемені теңестірушіні құруға тікелей барамыз. Мұны істеу үшін сол жақ шарлау мәзірінен Жүктеме теңдестіргіштерін таңдаңыз. Ашылған бетте Load Balancer жасау түймесін басыңыз, сонда басқа бет ашылады, онда сіз жасайтын жаңа жүктеме теңдестірушісінің түрін таңдауыңыз керек. Бізді қызықтырады Қолданбаны жүктеу теңдестірушісі, осы опцияның астындағы Жасау түймесін басайық. Жаңа жүктеме теңдестірушісінің қасиеттерін енгізу үшін бет ашылады. Атау ретінде көрсетейік LabelB. Әрі қарай, желілік параметрлерде VPC таңдаңыз, біздің жағдайда Lab VPC. Содан кейін, содан кейін біз қол жетімділік аймақтарын таңдауымыз керек, ол үшін бірінші қол жетімділік аймағын таңдаңыз - us-east-1a. Мұнда біз Public Subnet 1-ді таңдап, екінші қол жетімділік аймағы үшін де солай істеуіміз керек және Public Subnet 2 таңдаңыз. Нәтижесінде сіз екі ішкі желіні таңдауыңыз керек: қоғамдық ішкі желі 1 және қоғамдық ішкі желі 2.
Біз келесі бөлімге, Қауіпсіздік топтарына көшеміз. Мұнда ашылмалы мәзірден Web Security Group опциясын таңдау керек. Сондай-ақ, әдепкі қауіпсіздік тобы таңдалғанын көресіз, бізге қажет емес, сондықтан X түймесін басып, әдепкі қауіпсіздік тобын жою керек. Нәтижесінде біз Web Security Group деп аталатын бір ғана қауіпсіздік тобымен қаламыз. Ең соңғы параметр - тыңдаушы, яғни қандай порт пен протокол трафигі жіберіледі. Біздің жағдайда бұл HTTP: 80. Міне, біз сондай-ақ LabGroup-қа трафикті қайта бағыттау үшін Default әрекетін көрсетуіміз керек. Бұл жүктеме теңдестіргіштің барлық параметрлерін аяқтайды. Енді сіз беттің төменгі жағына жылжып, жүктеме теңдестіргішін жасау түймесін басыңыз. Жүктеме теңдестірушісі сәтті жасалған хабарды көресіз. Сондай-ақ, жүктемені теңестіруші бетін ашу үшін жүктемені теңестіргішті қарау түймесін басуға болады. Сіз мәртебенің берілгенін көре аласыз, ал біраз уақыттан кейін ол дайын немесе сәттілікке өзгереді. Осылайша ол пайдалануға дайын болады. Жүктеме теңдестірушісі дайын болғанша күтудің қажеті жоқ, өйткені келесі тапсырма Auto Scaling бағдарламасында келесі АТ ресурстарын жасайды. Сондықтан, біз күйді өзгертуді күтпестен келесі тапсырмаға кірісе аламыз.
Сіз және мен үшінші тапсырмаға көшеміз. Бұл ұзақ міндет. Бұл жерде біз Launch Configuration және Auto Scaling Group құратын боламыз. Естеріңізге сала кетейік, Auto Scaling Group - бұл белгілі бір метрикаға байланысты мақсаттар санын өзгертуге мүмкіндік беретін IT-ресурс, мысалы, CPU жүктемесі. Біздің жағдайда бұл есептеу қуаты немесе Amazon EC2 даналары. Осылайша, егер біздің Amazon EC2 даналарына жүктеме артса, Auto Scaling Group автоматты түрде жүктемені тарату үшін жаңа дананы жасайды. Егер жүктеме минималды болса, Auto Scaling Group сонымен қатар бізде Amazon EC2 даналарының артық саны бар екенін көреді, қосымша Amazon EC2 даналары автоматты түрде өшіріледі. Сондықтан біз бірінші кезекте жасауымыз керек Конфигурацияны іске қосу. Мұны істеу үшін сол жақ шарлау мәзіріндегі Конфигурацияларды іске қосу опциясын таңдаңыз. Ашылған бетте іске қосу конфигурациясын жасау түймесін басып, осы АТ ресурсында деректерді енгізуді бастаңыз. LabConfig аты ретінде көрсетейік. Әрі қарай, AMI ретінде біз бұрын жасаған AMI-ді таңдайық - бұл веб-сервер AMI. Instance түрі ретінде t3.micro таңдайық. Егер бұл опция болмаса, біз t2.micro таңдай аламыз.
Келесі Қосымша конфигурация бөлімінде және Мониторинг бөлімінде CloudWatch ішінде EC2 данасын егжей-тегжейлі бақылауды қосу тексеріңіз. Бұл автоматты масштабтау біздің даналарымыздағы жүктемедегі өзгерістерге тезірек жауап беруі үшін қажет. Келесі бөлім - Қауіпсіздік топтары. Мұнда біз бұрыннан бар қауіпсіздік тобын таңдау опциясын, яғни бұрын жасалған қауіпсіздік тобын таңдап, ашылмалы мәзірден Web Security Group таңдаңыз. Әрі қарай жүрейік. Кілт жұбы бөлімі - бұл біздің Amazon EC2 даналарына SSH арқылы қосылуға мүмкіндік беретін жеке кілт. Мұнда біз бар кілт жұбын таңдау опциясын таңдап, ашылмалы тізімнен негізгі жұпты таңдаңыз: vockey. Сондай-ақ, бұл кілт Amazon EC2 жасайтын даналармен байланыстырылғанын растайтын құсбелгіні қойып, іске қосу конфигурациясын жасау түймесін басыңыз. Launch Configuration жасауды аяқтағаннан кейін, біз оған негізделген автоматты масштабтау тобын жасай аламыз. Мұнда сіз дұрыс аймақта екеніңізді тексеруіңіз керек, дұрыс аймақ - Солтүстік Вирджиния немесе біз-шығыс-1. Тізімнен LabConfig таңдау керек және Әрекеттер түймесін басыңыз, ашылмалы мәзірден Автоматты масштабтау тобын жасау опциясын таңдаңыз. Оны басқаннан кейін, сіз Auto Scaling тобын құру бетіне қайта бағытталасыз. Бұл бетте Аты өрісіне Lab Auto Scaling Group енгізіп, Келесі түймешігін басыңыз. Әрі қарай, желілік параметрлерде біз VPC, біздің жағдайда Lab VPC таңдауымыз керек. Мұнда, егер сіз “Жалпыға ортақ IP мекенжайы жоқ” хабарын көрсеңіз, сіз бұл хабарламаны елемеуге болады. Төменде, біз ішкі желілерді таңдауымыз керек, біз жеке ішкі желі 1 және жеке ішкі желі 2 таңдауымыз керек. Неліктен жеке ішкі желі қоғамдық ішкі желі емес? Себебі, бізде бұрын бір Amazon EC2 данасы болды, ол мөлшері мен саны бойынша өспеді және бұл статикалық данасы болды. Егер жүктеме көбейсе, мысал бұл жүктемеге төтеп бере алмайды және ажыратылады. Қазір біз жүктемеге байланысты есептеу қабілетін динамикалық түрде өзгерту мүмкіндігін қосамыз, бұл жағдайда Load Balancer және Auto Scaling тобы трафикті алатын ресурс болады, яғни олар қоғамдық ішкі желіде болады. Осылайша, қауіпсіздікті қамтамасыз ету үшін біз барлық Load Balancer даналарын жеке ішкі желіге орналастыра аламыз. Ішкі желілерді таңдағаннан кейін, келесі батырманы басыңыз және ашылатын бетте Жүктемені теңестіру - міндетті емес, таңдаңыз Бар жүктеме теңдестіргішке бекітіңіз. Біз оны басқаннан кейін ашылмалы мәзір пайда болады, біз LabGroup таңдауымыз керек. Қосымша параметрлер бөлімінде опцияны таңдап, CloudWatch ішінде топтық метрикалар жинағын қосу параметрін тексеріңіз. Бұл метрикалар әр минут сайын қабылдануы үшін қажет, бұл өз кезегінде біздің Auto Scaling тобына тезірек жауап беруге мүмкіндік береді. Келесі түймесін басыңыз. Мұнда біз өз тобымыздың өлшемдерін таңдауымыз керек. Үш параметр бар: Қажетті сыйымдылық, Минималды сыйымдылық және Максималды сыйымдылық. Қажетті сыйымдылық - бұл Auto Scaling тобын құрудың басында құрылатын мақсаттардың саны. Минималды және Максималды сыйымдылық, сәйкесінше, Auto Scaling тобы жасай алатын мақсаттардың минималды және максималды саны болып табылады. Міне, нүкте, сіз компанияның қаражатын тым көп жұмсамау үшін ең төменгі және, атап айтқанда, максимум үшін не екенін түсінуіңіз керек, бірақ сонымен бірге сіздің пайдаланушыларыңыздан сұраныстардың максималды санын өңдеңіз. Сіз көрсеткеніңізді елестетіп көрейік Максималды сыйымдылық: 6 және жүктеме кенеттен өсті, тіпті 6 даналар сіздің барлық пайдаланушыларыңыздың сұрауларын өңдей алмады. Бұл жағдайда ағымдағы жүктемені өңдеу үшін 6 дананың жеткіліксіз екендігі туралы қосымша хабарландыруларды орнату ұсынылады, сондықтан сіз кіріп, осы мәнді қолмен өзгертуіңіз керек. Немесе жүктеме ұлғайған кезде біз пайдаланушылардан барлық сұраныстарға қызмет көрсетуге басымдық береміз және даналар санын 10-20 данаға дейін арттыруға болады. Бұл қымбатқа түседі, бірақ сіз өзіңіздің барлық пайдаланушыларыңыздың сіздің бағдарламаңызға сәйкес қарайтындығына кепілдік аласыз. Әрі қарай жүрейік. Масштабтау саясаты бөлімінде Мақсатты бақылау масштабтау саясатын таңдап, оны теңшеу керек: Lab саясатының атауын қалай көрсетеміз LabScalingPolicy, Metric type қалай таңдаймыз Орташа CPU пайдалану, яғни. біз жүктемені, процессорларымызды және Мақсатты мәнді қалай көрсетеміз 60. Біз 60 көрсеткен кезде, бұл Auto Scaling біздің барлық мақсаттарымызға жүктеме шамамен 60% болуын қамтамасыз етуге тырысады дегенді білдіреді. Егер ол көбейсе, бұл жүктеме өсті және біз қосымша мақсаттарды қосуымыз керек дегенді білдіреді. Егер жүктеме шамамен 40 пайызға немесе одан аз болса, онда Auto Scaling тобы ағымдағы мақсаттар жүктемені оңай жеңе алатындығын және бір немесе бірнеше мақсаттарды жоя алатындығын түсінеді.
Біз қазір осы тапсырманың соңғы бөлігіне көшеміз. Келесі түймесін басу керек. Мұнда біз тегтерді көрсетуіміз керек. Кілт, Аты және Мән, Lab Instance сияқты бір тегті қосайық. Келесі түймешігін басыңыз, сонда біз енгізген барлық параметрлерді қарап шығуға болатын бетті ашады. Егер бәрі дұрыс болса, біз ең төменгі жағындағы Авто масштабтау тобын жасау түймесін басуға болады. Егер сіз автоматты масштабтау тобын жасау сәтсіз болса, пайда болған сәтсіз тапсырмаларды орындау түймесін басыңыз, содан кейін Автоматты масштабтау тобы сәтті жасалуы керек. Ең басында даналар саны нөлге тең болады, ал уақыт өте келе жаңа даналар мөлшерінде көтеріледі Қажетті сыйымдылық, сондықтан біз екі данамен аяқталамыз және пайдалануға дайын.
Біз төртінші тапсырмаға көшудеміз және мұнда біз бұрын жасаған барлық IT-ресурстардың дұрыс жұмыс істеп жатқанын тексереміз. Бізге бірінші кезекте бару керек сол жақ навигация мәзіріндегі даналар. Мұнда сіз Lab Instance атты тағы екі жаңа дананың пайда болатынын көресіз. Неліктен зертханалық мысал? Авто масштабтау тобын құрған кезде, біз оған Lab Instance мәні бар атау белгісін бердік. Осылайша, Auto Scaling тобы барлық өзін-өзі құрылған даналары үшін оның тегтерін ауыстырды. Мұнда сіз осы екі зертханалық даналардың аяқталуын күтуіңіз керек. Бұл дайын болғаннан кейін, сол жақ шарлау мәзіріндегі келесі қойындыға өтуге болады - Мақсатты топтар. Тізімде тек бір мақсатты топ бар екенін көресіз - LabGroup. Оны басайық, сонда сіз біздің екі данамызды Мақсаттар қойындысында көресіз. Мұнда біз екі дананың да сау болуын күтуіміз керек. Мұны істеу үшін сіз жаңарту түймесін мезгіл-мезгіл басуға болады. Олар сау болғаннан кейін, бұл олардың Load Balancer сұраныстарын алуға болатындығын білдіреді және сәйкесінше Load Balancer трафикті осы мақсаттарға бағыттауға дайын. Енді бәрі Auto Scaling тобы және Load Balancer тұрғысынан жақсы екенін көрейік. Сол жақ шарлау мәзіріндегі Load Balancers түймесін басып, төменгі жағында Load Balancer жасаған DNS атауын көшіру керек. Сіз оны көшіргеннен кейін оны веб-шолғыштағы жаңа қойындыға қойып, осы бетті аша аласыз. Осы зертханалық жұмыс үшін арнайы дайындалған қарапайым бағдарлама ашылады және сіз жауап көресіз. Бұл дегеніміз, біз Load Balancer сұрауын жібердік, Load Balancer Auto Scaling тобы жасаған даналарға трафикті жіберді, данасы сұрауды өңдеп, жауап қайтарды. Сіз бұл жауапты қолданбаны көрсететін парағыңыздың түрінде көресіз. Осылайша, біз өзімізді Auto Scaling тобы мен Load Balancer топтамасы дұрыс жұмыс істейтінін растадық.
Енді біз соңғы тапсырмаға көшеміз, ол біздің Auto Scaling тестілеуде, яғни біздің даналарымызға жүктеме артқан кезде, Auto Scaling автоматты түрде осы жүктемені көп мақсаттарға тарату үшін жаңа даналарды қосады. Мұны істеу үшін біз басқа қызметке, CloudWatch қызметіне ауысуымыз керек. Сервистік іздеу жолағында CloudWatch теруді бастайық немесе Watch теруді бастауға болады, негізінен, толық мәтінді іздеу жұмыстары. Сондықтан, ол қызмет атауындағы таңбалардың кез-келген комбинациясын іздейді. Сол жақ шарлау мәзіріндегі CloudWatch қызмет бетіне өткеннен кейін “Барлық дабылдар” опциясын таңдау керек. Сіз автоматты түрде Auto Scaling тобы құрылды, олардың екеуі де екі дабыл, көрсетілуі тиіс. Бұл екі дабыл Amazon EC2 даналарындағы жүктемеге байланысты Auto Scaling тобын бір-бірлеп іске қосады, бұл өз кезегінде Auto Scaling тобында жаңа даналарды жоюды немесе құруды бастайды. Егер бұл дабылдар пайда болмаса, сіз дұрыс аймақта отырғаныңызды ескеріңіз. Бізге Солтүстік Вирджиния аймағы немесе біз-шығыс-1 қажет. Егер сіз дұрыс аймақта отырсаңыз, бірақ бұл дабылдар көрсетілмесе, біз кейбір нәрселерді жасауымыз керек. Мұны тек уақытша құрылған AWS есептік жазбасында жасау керек. Нақты AWS есептік жазбасында мұндай проблемалар болмайды. Сонымен, егер дабыл пайда болмаса, Amazon EC2-ге бару керек, содан кейін сол жақ шарлау мәзіріндегі Автоматты масштабтау топтары опциясын таңдаңыз, біз бұрын жасаған автоматты масштабтау тобын таңдаңыз, Lab Auto Scaling Group деп аталады. Әрі қарай, біз оны таңдағаннан кейін экранның төменгі жағында бірнеше қойынды пайда болады. Автоматты масштабтау қойындысын ашу керек. Тізімнен LabScalingPolicy таңдау керек, Әрекеттер түймесін басып, ашылмалы мәзірден Өңдеу опциясын таңдаңыз. Қалқымалы терезе ашылады және сіз 50-ді Мақсатты мән ретінде көрсетуіңіз керек және Жаңарту түймесін басыңыз. Бұл Auto Scaling тобының ішкі ресурстарын қайта құруды тудырады және осы жаңартудан кейін бұл дабылдар CloudWatch қызметінде пайда болғанын көре аласыз. Назар аударыңыз, бұл дабылдар бірден пайда болмайды және сіз кем дегенде 1-2 минут күтуіңіз керек, содан кейін бетті жаңартыңыз. Біздің дабылдар қол жетімді болғаннан кейін, біз атаудағы AlarmHigh атауымен дабылды таңдауымыз керек. Біз оның мәртебесі OK екенін көруге болады. Егер ол OK болмаса, біраз уақыт күтіп, жаңарту түймесін басыңыз. Ол OK-ге оралуы керек. OK дегеніміз, біздің даналарымыздың 60% -дан аз CPU жүктемесі бар екенін білдіреді. Ол 60% -дан астамға дейін жоғарылағаннан кейін, бұл дабыл OK-дан дабылға ауысады және тиісті ақпаратты Auto Scaling тобына жібереді. Енді біз Auto Scaling тобы шынымен жұмыс істейтінін тексеруіміз керек. Мұны істеу үшін біз бұрын веб-шолғышта бөлек қойындыда ашылған біздің қосымшаға оралуымыз керек және жүктеу тесті түймесін басыңыз. Сіз оны басқаннан кейін, біздің даналарымызды жүктейтін сценарийлер іске қосылады. Назар аударыңыз, бұл бетті жабу мүмкін емес. Егер сіз осы бетті жапсаңыз, жүктеме тоқтайды. Метрикалар AWS-ке және тиісті ресурстарға хабарлануы үшін біраз уақыт күтуіміз керек. Жаңарту түймесін мезгіл-мезгіл басуға болады және сіз 5 минуттан аз уақыт ішінде AlarmLow оның мәнін OK мәніне өзгертуі керек екенін көресіз, ал AlarmHigh, керісінше, оның күйін дабылда өзгерту керек, яғни біздің даналарымыз қазіргі уақытта ауыр жүктеме астында. Сондай-ақ, егер сіз тиісті дабылды ашсаңыз, біздің жағдайда AlarmHigh, сіз график түрінде CPU жүктемесін көресіз. Ол 60% немесе 50% -ға жеткеннен кейін, егер біз дабылдарымызды қайта құрсақ және ол 3 минуттан артық созылса, ол Auto Scaling тобын іске қосады, бұл өз кезегінде жаңа даналарды қосады. Біз дабыл күйіне кіру үшін AlarmHigh күтуіміз керек. Онда болғаннан кейін сіз Amazon EC2-ге өтіп, сол жақ шарлау мәзірінде Instances опциясын ашып, қазіргі уақытта Lab Instance атты екі, үш немесе төрт данадан көп екеніне көз жеткізіңіз. Бұл Auto Scaling дұрыс жұмыс істеп тұрғанын және жүктемені тарату үшін қосымша даналар жасағанын көрсетеді. Бұған сенімді болғаннан кейін, жүктеме қалыпты жағдайға оралу үшін қолданба бетін жабуға болады. Сондай-ақ, кем дегенде 5 және үш данаға оралу үшін кем дегенде 2 минут күте аласыз. Сіз осы күйге жеткенде, мен сізге қосымша эксперимент жүргізуді ұсынғым келеді. Amazon EC2-де даналар сол жақ шарлау мәзірінде Lab Instance атты даналардың біреуін таңдап, дананы тоқтату немесе ажырату үшін Әрекеттер түймесін пайдаланыңыз. Сіз оны өшіргеннен кейін, Load Balancer-де мақсаттардың бірі зиянды болып қалғанын көресіз, содан кейін трафик осы сатыға баруды тоқтатады. Авто масштабтау сәйкесінше даналар саны ең төменгі мәннен төмен екенін көреді және жаңа дананы құруды бастайды. Біраз уақыттан кейін сіз басқа қосымша дананың жасалғанын және екі дананың көрсетілетінін көресіз.
Біз соңғы тапсырмаға қозғалатын жатырмыз. Басында біз веб-сервер 1 деп аталатын данадан AMI жасадық. Енді бізге бұл сервердің қажеті жоқ екенін көруге болады, өйткені трафик қазіргі уақытта осы веб-серверге емес, Load Balancer-ге бағытталған. Осылайша біз бұл серверді жоя аламыз. Ол үшін даналар тізімінен Веб-сервер 1 тармағын таңдаңыз, содан кейін Instance state түймесін басып, Instance Terminate Instance опциясын таңдаңыз. Сондай-ақ, біз осы дананы өшіріп жатқан қалқымалы мәзірде растауыңыз керек.
Бұл бізді зертханалық жұмысымыздың соңына дейін жеткізді. Уақытша AWS есептік жазбасын дұрыс өшіру/шығару керек екенін еске салғым келеді. Сондай-ақ, AWS Academy бетіндегі End Lab түймесін басып, “DELETE басталды” деген хабарды растаңыз және күтіңіз... Сіз бұл хабарлама жолағын қазір жабуыңыз мүмкін.” бұл барлық жасалған ресурстар мен тіркелгілерді жою процесі басталғанын білдіреді және сіз осы терезені жаба аласыз. Сіз бұл қалқымалы терезені жабасыз, сонымен қатар AWS академиясы қойындысын жабуға болады және сіз зертханалық жұмысыңызды сәтті аяқтадыңыз.
Зертханалық жұмысыңызды аяқтағаныңыз үшін тағы да құттықтағым келеді. Көптеген сұрақтарға жауап берілді және сіз ELB және Auto Scaling қызметтерін жақсы түсінесіз деп үміттенемін. Егер сізде сұрақтар туындаса, бізден сұраңыз, біз сізді келесі іс-шараларда көреміз.
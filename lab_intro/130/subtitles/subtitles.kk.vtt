WEBVTT

00:00:00.000 --> 00:00:06.680
Қайырлы күн, құрметті студенттер! Мен 
сіздерді келесі зертханалық жұмысқа шолу

00:00:06.680 --> 00:00:12.640
сессиясында көргеніме қуаныштымын. 
Бүгінгі зертханалық жұмыстың тақырыбы –

00:00:12.640 --> 00:00:17.160
Scale & Load Balance your 
Architecture. Сонымен, бастайық.

00:00:17.160 --> 00:00:23.740
Бізге бірінші кезекте 
AWS Academy-да тиісті

00:00:23.740 --> 00:00:27.240
Cloud Foundations курсын 
ашу керек, сосын сол жақ

00:00:27.240 --> 00:00:34.520
навигация мәзіріндегі Modules 
өту керек. Ашылған парақшада

00:00:34.520 --> 00:00:38.480
Module 10 – Auto Scaling and 
Monitoring орналасқан және сіз

00:00:38.480 --> 00:00:42.000
Lab 6 – Scale & Load Balance your 
Architecture белсенділігін көресіз.

00:00:42.000 --> 00:00:47.000
Негізгі зертханалық жұмыс парақшасына 
өту үшін сілтеме бойынша өтейік.

00:00:47.000 --> 00:00:55.720
Мұнда зертханалық жұмыс 
тапсырмасын оқуды жеңілдету үшін

00:00:55.720 --> 00:00:59.040
Terminal терезесіне сәйкес 
пункттің құсбелгісін алу

00:00:59.040 --> 00:01:07.560
арқылы жасырып, тек 
README қалдыра аламыз.

00:01:07.560 --> 00:01:11.080
Сондай-ақ, сессияға уақытша 
AWS аккаунтын құруды

00:01:11.080 --> 00:01:16.600
бастау үшін Start Lab 
батырмасын басуға болады.

00:01:16.600 --> 00:01:23.880
Бұл зертханалық жұмыста біз 
Elastic Load balancing – ELB және

00:01:23.880 --> 00:01:32.640
Auto Scaling сервистерін толығырақ 
зерттейміз. ELB-ді біздің таргеттерімізге

00:01:32.640 --> 00:01:37.060
арналған трафикті теңестіру үшін, 
ал Аuto Scaling-ті IT-ресурстарымызды

00:01:37.060 --> 00:01:41.480
динамикалық түрде көбейту 
немесе азайту үшін қолданамыз.

00:01:41.480 --> 00:01:44.900
ACG-мен, яғни Auto Scaling 
Group-пен бірге қолданылатын

00:01:44.900 --> 00:01:48.880
ең көп таралған сервис – 
бұл Amazon EC2 инстанстары.

00:01:48.880 --> 00:02:00.640
Бүгін біз сіздермен не істейміз? Біріншіден, біз 
жұмыс жасап тұрған инстанстың AMI көшірмесін

00:02:00.640 --> 00:02:04.520
жасаймыз. Әрі қарай, біз load balancer құрамыз, 
Auto Scaling group-ты конфигурациялаймыз және

00:02:04.520 --> 00:02:09.000
іске қосамыз, сондай-ақ осы сервистердің 
барлығы байланыста қалай жұмыс істейтінін,

00:02:09.000 --> 00:02:18.680
Auto Scaling қалай жүзеге асатынын көреміз және 
біз бұл өзгерістерді alarms-тарда көре аламыз

00:02:18.680 --> 00:02:28.240
және бұл процесті Amazon CloudWatch-те бақылай 
аламыз. Бұл зертханалық жұмысты орындау үшін

00:02:28.240 --> 00:02:32.080
30 минут жұмсау ұсынылады. Естеріңізге сала 
кетейін, егер сізге көбірек уақыт қажет болса,

00:02:32.080 --> 00:02:41.560
сіз әрқашан  есептегішті нөлге келтіріп, 
зертханалық жұмысты жалғастыра аласыз.

00:02:41.560 --> 00:02:45.200
Зертханалық жұмысымызды 
бастамас бұрын, AWS 

00:02:45.200 --> 00:02:49.480
ішіндегі қазіргі архитектура 
келесідей екенін көреміз.

00:02:49.480 --> 00:02:53.280
Осы зертханалық жұмыстың 
аясында не жасалады:

00:02:53.280 --> 00:03:00.160
Load Balancer құрамыз, 
Public Subnet 2-де орналасқан

00:03:00.160 --> 00:03:04.000
Web Instance жоғарғы оң жақтан 
Private Subnet-ке көшіреміз

00:03:04.000 --> 00:03:09.000
және Load Balancer мен Auto 
Scaling байланысын реттейміз.

00:03:09.000 --> 00:03:12.080
Осылайша, қажет болған жағдайда 
бізде екі Availability Zones-та

00:03:12.080 --> 00:03:24.520
инстанстар жасалынады, яғни 
Availability Zone A және Availability Zone B.

00:03:24.520 --> 00:03:27.040
Ең алдымен, зертханалық 
жұмысты бастау үшін

00:03:27.040 --> 00:03:31.960
біз AWS Management 
Console-ге жетуіміз керек.

00:03:31.960 --> 00:03:34.320
Ол үшін, егер сіз әлі жасамаған 
болсаңыз, жоғарғы оң жақтағы Start Lab

00:03:34.320 --> 00:03:42.680
батырмасын басуыңыз керек. Оны басқаннан 
кейін, зертханалық жұмыстың күйін көрсететін

00:03:42.680 --> 00:03:49.120
қалқымалы терезе пайда болады, 
яғни "Lab Status: in creation".

00:03:49.120 --> 00:03:52.240
Күй Ready күйіне өзгергеннен 
кейін, сіз осы терезені

00:03:52.240 --> 00:03:55.800
жаба аласыз, содан кейін 
зертханалық жұмыс сессиясы

00:03:55.800 --> 00:04:00.520
үшін жасалған уақытша 
AWS Account-қа өту үшін

00:04:00.520 --> 00:04:11.000
AWS батырмасын басуыңыз керек. AWS 
Management Console-ге жеткеннен кейін

00:04:11.000 --> 00:04:16.960
біз бірінші тапсырманы орындауға өте аламыз. 
Мұнда біз AMI көшірмесін жасауымыз керек.

00:04:16.960 --> 00:04:23.520
Бұл AMI Auto Scaling group-тың атынан жаңа 
инстанстар жасау үшін пайдаланылады.

00:04:23.520 --> 00:04:27.920
Мұны істеу үшін біз EC2 деп 
сервис іздеу жолағында

00:04:27.920 --> 00:04:32.780
теруді бастауымыз керек немесе Services 
батырмасын басып, ашылмалы мәзірден

00:04:32.780 --> 00:04:38.080
Amazon EC2 сервисін табу керек. Кіргеннен 
кейін сол жақ навигациялық мәзірде

00:04:38.080 --> 00:04:41.240
біз Instances таңдауымыз керек 
және белгілі бір аймақтағы

00:04:41.240 --> 00:04:46.880
AWS Account-тағы барлық 
инстанстардың тізімі көрсетіледі.

00:04:46.880 --> 00:04:52.040
Егер сіз инстанстарды көрмесеңіз, 
сізде North Virginia немесе

00:04:52.040 --> 00:05:06.640
us-east-1 аймағы тұрғанын тексеріңіз. Web 
Server 1 деп аталатын инстансты көруіңіз керек.

00:05:06.640 --> 00:05:11.040
Status Checks бағанында 2/2 
тұрғанын тексеру керек, бұл

00:05:11.040 --> 00:05:15.320
сервер сәтті жасалғанын және жұмыс 
істеуге дайын екенін көрсетеді.

00:05:15.320 --> 00:05:20.840
Мұны көргеннен кейін сізге 
сол инстансты таңдау керек.

00:05:20.840 --> 00:05:25.160
Әрі қарай, Actions мәзір пунктінде 
Image and templates опциясын таңдаңыз.

00:05:25.160 --> 00:05:31.340
Әрі қарай, Create image опциясын басыңыз. 
Ашылған парақшада біз Image name: WebServerAMI

00:05:31.340 --> 00:05:40.000
деп көрсетуіміз керек. Әрі қарай, 
Image description ретінде Lab AMI for Web Server

00:05:40.000 --> 00:05:42.600
деп көрсету керек және ең төменгі жағында 
Create Image батырмасын басу керек.

00:05:42.600 --> 00:05:49.520
Сіз жаңа жасалған AMI және 
оның сәйкес ID көресіз.

00:05:49.520 --> 00:05:52.800
Сізге бұл ID-ді көшіру керек, өйткені 
біз оны сәл кейінірек келесі

00:05:52.800 --> 00:06:00.000
тапсырмада қолданамыз. Біз екінші 
тапсырмаға өтеміз және мұнда

00:06:00.000 --> 00:06:06.200
Load Balancer құруымыз керек. Load
Balancer – бұл есептеу қуатына жүктемені

00:06:06.200 --> 00:06:11.280
теңестіруге көмектесетін 
IT-ресурс екенін еске саламын.

00:06:11.280 --> 00:06:14.720
Біздің жағдайда – бұл Amazon EC2 
Instances және біз Load Balancer-ді

00:06:14.720 --> 00:06:21.200
бірнеше Availability Zones-тағы 
трафикті теңестіретіндей етіп орнатамыз.

00:06:21.200 --> 00:06:25.120
Ең алдымен, біз Target 
Groups құруымыз керек,

00:06:25.120 --> 00:06:34.760
яғни бұл Load Balancer-ден трафик 
қайда кететінін көрсететін ресурстар.

00:06:34.760 --> 00:06:41.160
Сол жақ навигациялық мәзірден 
Target Groups таңдау керек.

00:06:41.160 --> 00:06:49.120
Әрі қарай, ашылған парақшада Create 
target group батырмасын басу керек.

00:06:49.120 --> 00:06:52.720
Target type ретінде біз 
Instances таңдауымыз керек, 

00:06:52.720 --> 00:06:57.920
Target group name ретінде LabGroup көрсетейік, 
сонымен қатар VPC көрсетуіміз керек.

00:06:57.920 --> 00:07:03.120
Ашылмалы мәзірден 
Lab VPC таңдайық.

00:07:03.120 --> 00:07:12.440
Әрі қарай, біз Next батырмасын басуымыз 
керек және сіз Register targets бөлімін көресіз.

00:07:12.440 --> 00:07:15.440
Қазіргі уақытта бізде 
targets жасалмаған,

00:07:15.440 --> 00:07:22.080
сондықтан біз бұл қадамды өткізіп, 
Create target group батырмасын баса аламыз.

00:07:22.080 --> 00:07:26.920
Енді біз Load Balancer 
құруға тікелей көшеміз.

00:07:26.920 --> 00:07:31.120
Ол үшін сол жақ навигациялық 
мәзірден Load Balancers таңдау керек.

00:07:31.120 --> 00:07:34.360
Ашылған парақшада Create Load 
Balancer батырмасын басамыз,

00:07:34.360 --> 00:07:42.680
сізге жаңа Load Balancer түрін таңдау 
қажет болатын тағы бір парақша  ашылады.

00:07:42.680 --> 00:07:49.360
Бізді Аpplication Load Balancer қызықтырады, 
осы опция астындағы Create батырмасын басайық.

00:07:49.360 --> 00:07:56.960
Жаңа Load Balancer параметрлерін 
енгізу үшін парақша ашылады.

00:07:56.960 --> 00:08:04.520
Name ретінде LabELB көрсетейік. Әрі қарай, 
Network желісінің параметрлерінде

00:08:04.520 --> 00:08:12.360
VPC таңдау керек, біздің жағдайда бұл 
Lab VPC. Осыдан кейін біз Availability Zones

00:08:12.360 --> 00:08:16.840
таңдауымыз керек, ол үшін бірінші 
Availability Zone – us-east-1a таңдаймыз.

00:08:16.840 --> 00:08:23.480
Мұнда біз Public Subnet 1 таңдауымыз 
керек, екінші Availability Zone үшін де

00:08:23.480 --> 00:08:28.880
солай істеу керек және Public 
Subnet 2 таңдау керек.

00:08:28.880 --> 00:08:33.160
Нәтижесінде сізде екі 
Subnet таңдалуы керек, бұл

00:08:33.160 --> 00:08:41.680
Public Subnet 1 және Public Subnet 2. Біз 
келесі бөлімге көшеміз – бұл Security groups.

00:08:41.680 --> 00:08:47.760
Мұнда ашылмалы мәзірден Web 
Security Group опциясын таңдау керек.

00:08:47.760 --> 00:08:50.880
Сондай-ақ, default security 
group таңдалғанын көре аласыз,

00:08:50.880 --> 00:08:54.200
ол бізге қажет емес, сондықтан 
X батырмасын басып,

00:08:54.200 --> 00:09:00.840
default security group жою 
керек. Нәтижесінде бізде

00:09:00.840 --> 00:09:05.400
Web Security Group деп аталатын 
жалғыз security group қалады.

00:09:05.400 --> 00:09:12.480
Ең соңғы параметр – Listener, яғни трафик қай 
портқа, қайсы протокол арқылы келетіндігі.

00:09:12.480 --> 00:09:18.880
Біздің жағдайда бұл HTTP:80. Сондай-ақ, 
мұнда біз Default action ретінде трафикті

00:09:18.880 --> 00:09:28.280
LabGroup-қа бағыттауымыз керек. Осымен біз load 
balancer үшін барлық параметрлерді енгізуді

00:09:28.280 --> 00:09:34.240
аяқтадық. Енді парақшаның төменгі жағына жылжып, 
Create load balancer батырмасын басу керек.

00:09:34.240 --> 00:09:38.840
Load balancer сәтті жасалғаны 
туралы хабарламаны көресіз.

00:09:38.840 --> 00:09:41.520
Сондай-ақ, load balancer парақшасын 
ашу үшін View load balancer

00:09:41.520 --> 00:09:49.240
батырмасын басуыңызға болады. 
Сіз қазір provisioning күйін көресіз,

00:09:49.240 --> 00:09:54.520
біраз уақыттан кейін ол ready 
немесе success күйіне ауысады.

00:09:54.520 --> 00:10:02.240
Осылайша ол жұмысқа дайын болады. 
Load balancer дайын болған сәтті

00:10:02.240 --> 00:10:04.440
күтудің қажеті жоқ, 
өйткені келесі тапсырма

00:10:04.440 --> 00:10:11.640
Auto Scaling сервисінде 
келесі IT-ресурстарын жасайды.

00:10:11.640 --> 00:10:19.440
Сондықтан біз күй өзгеруін күтпестен 
келесі тапсырмаға кірісе аламыз.

00:10:19.440 --> 00:10:23.320
Біз сіздермен үшінші тапсырмаға 
көшеміз. Бұл көлемді тапсырма.

00:10:23.320 --> 00:10:27.880
Мұнда біз Launch Configuration 
және Auto Scaling Group құрамыз.

00:10:27.880 --> 00:10:32.880
Мен сізге еске салайын, 
Auto Scaling Group – бұл

00:10:32.880 --> 00:10:35.920
белгілі бір метрикаға байланысты, 
мысалы, CPU жүктемесі,

00:10:35.920 --> 00:10:43.240
таргет санын өзгертуге 
мүмкіндік беретін IT-ресурс.

00:10:43.240 --> 00:10:48.920
Біздің жағдайда бұл есептеу қуаты 
немесе Amazon EC2 инстанстары.

00:10:48.920 --> 00:10:54.000
Осылайша, егер біздің Amazon EC2 
инстанстарына жүктеме артып жатса, онда

00:10:54.000 --> 00:11:00.240
Auto Scaling Group жүктемені тарату үшін 
автоматты түрде жаңа инстанс жасайды.

00:11:00.240 --> 00:11:04.600
Егер жүктеме минималды болса, 
онда Auto Scaling Group те

00:11:04.600 --> 00:11:08.120
бізде Amazon EC2 инстанстарының 
артық саны бар екенін көреді,

00:11:08.120 --> 00:11:16.120
содан кейін артық Amazon EC2 
инстанстары автоматты түрде өшеді.

00:11:16.120 --> 00:11:22.800
Сонымен, бірінші бізге Launch 
Configuration жасау керек.

00:11:22.800 --> 00:11:28.280
Ол үшін сол жақ навигация мәзірінде 
Launch Configurations опциясын таңдау керек.

00:11:28.280 --> 00:11:30.880
Ашылған парақшада Create 
launch configuration батырмасын

00:11:30.880 --> 00:11:39.800
басып, осы IT-ресурс бойынша деректерді енгізуді 
бастаймыз. Name ретінде біз LabConfig көрсетеміз.

00:11:39.800 --> 00:11:46.240
Әрі қарай, AMI ретінде біз бұрын жасаған 
AMI-ді таңдаймыз - бұл Web Server AMI.

00:11:46.240 --> 00:11:54.040
Instance type ретінде t3.micro таңдаймыз. Егер 
бұл опция қол жетімді болмаса, онда біз t2.micro

00:11:54.040 --> 00:12:04.800
таңдай аламыз. Келесі Additional configuration 
бөлімінде және Monitoring бөлімінің астында

00:12:04.800 --> 00:12:09.080
Enable EC2 instance detailed monitoring 
within CloudWatch жанына құсбелгі

00:12:09.080 --> 00:12:16.680
қою керек. Бұл Auto Scaling біздің 
инстанстарымызға жүктеменің өзгеруіне тезірек 

00:12:16.680 --> 00:12:22.000
әрекет етуі үшін қажет. Келесі 
бөлім – Security groups.

00:12:22.000 --> 00:12:27.440
Мұнда біз Select an existing 
security group опциясын

00:12:27.440 --> 00:12:31.000
таңдауымыз керек, яғни бұрын құрылған 
Security group және ашылмалы мәзірден

00:12:31.000 --> 00:12:36.360
Web Security Group таңдаймыз. 
Әрі қарай жылжиық.

00:12:36.360 --> 00:12:42.240
Key pair бөлімі - бұл SSH 
арқылы Amazon EC2 инстанстарына

00:12:42.240 --> 00:12:47.400
 қосылуға мүмкіндік 
 беретін жеке кілт.

00:12:47.400 --> 00:12:50.820
Мұнда біз Choose an existing 
key pair опциясын таңдап,

00:12:50.820 --> 00:12:55.160
ашылмалы тізімнен 
key pair: vockey таңдаймыз.

00:12:55.160 --> 00:12:58.400
Сондай-ақ, осы кілттің Amazon 
EC2 инстанстарына бекітілгенін

00:12:58.400 --> 00:13:03.080
растайтын құсбелгіні қойыңыз 
және Create launch configuration

00:13:03.080 --> 00:13:12.040
батырмасын басыңыз. Launch 
Configuration құруды аяқтағаннан кейін

00:13:12.040 --> 00:13:14.920
біз оның негізінде Auto 
Scaling group құра аламыз.

00:13:14.920 --> 00:13:18.080
Мұнда сіз дұрыс аймақта 
екеніңізді тексеруіңіз керек,

00:13:18.080 --> 00:13:23.320
дұрыс аймақ – North Virginia 
немесе us-east-1.

00:13:23.320 --> 00:13:27.960
Бізге тізімнен LabConfig 
таңдап, Actions батырмасын

00:13:27.960 --> 00:13:34.000
басуымыз керек, ашылмалы мәзірден 
Create Auto Scaling group опциясын таңдаймыз.

00:13:34.000 --> 00:13:36.640
Сіз оны басқаннан кейін 
сізді Auto Scaling group

00:13:36.640 --> 00:13:43.800
құру парақшасына бағыттайды. Бұл парақшада 
Name өрісіне Lab Auto Scaling Group деп теріп,

00:13:43.800 --> 00:13:48.240
Next батырмасын басамыз. Әрі қарай, желі 
параметрлерінде біз VPC таңдауымыз керек,

00:13:48.240 --> 00:13:55.720
біздің жағдайда бұл Lab VPC. Егер 
"No public IP address" хабарламасын көрсеңіз,

00:13:55.720 --> 00:14:03.880
бұл хабарды елемеуге болады. Төменде 
Subnets таңдау керек жерде Private Subnet 1

00:14:03.880 --> 00:14:10.040
және Private Subnet 2 таңдау керек. Неліктен 
Public Subnet емес, ал Private Subnet?

00:14:10.040 --> 00:14:13.520
Себебі, бұрын бізде саны, 
көлемі өспейтін бір ғана

00:14:13.520 --> 00:14:21.160
Amazon EC2 инстансы 
болды және бұл статикалық

00:14:21.160 --> 00:14:28.160
инстанс болды. Егер жүктеме көбейсе, 
инстанс бұл жүктемеге төтеп бере алмай

00:14:28.160 --> 00:14:35.520
ажыратылатын еді. Қазір біз жүктемеге 
байланысты есептеу қабілетін

00:14:35.520 --> 00:14:38.800
динамикалық түрде өзгерту 
мүмкіндігін қосамыз, бұл жағдайда

00:14:38.800 --> 00:14:49.160
трафикті қабылдайтын ресурс Load 
Balancer және Auto Scaling group болады,

00:14:49.160 --> 00:14:58.640
яғни олар қазірдің өзінде Public Subnet ішінде 
болады. Осылайша, қауіпсіздікті арттыру үшін

00:14:58.640 --> 00:15:06.520
біз барлық Load Balancer инстанстарын 
Private Subnet-те орналастыра аламыз.

00:15:06.520 --> 00:15:18.640
Subnets таңдағаннан кейін, Next батырмасын 
басамыз және Load balancing – optional

00:15:18.640 --> 00:15:23.120
ашылған парақшада Attach to an 
existing load balancer таңдау керек.

00:15:23.120 --> 00:15:28.800
Біз оны басқаннан кейін ашылмалы мәзір 
пайда болады, біз LabGroup таңдауымыз керек.

00:15:28.800 --> 00:15:35.960
Additional settings бөлімінде 
опцияны таңдап, Enable

00:15:35.960 --> 00:15:39.760
group metrics collection within 
CloudWatch құсбелгіні қою керек.

00:15:39.760 --> 00:15:45.560
Бұл метрикалар әр минут сайын 
қабылдануы үшін қажет және

00:15:45.560 --> 00:15:52.480
бұл, өз кезегінде, біздің Auto Scaling group 
тезірек жауап беруге мүмкіндік береді.

00:15:52.480 --> 00:15:57.520
Next батырмасын басамыз. Мұнда біз 
Group өлшемдерін таңдауымыз керек.

00:15:57.520 --> 00:16:03.400
Үш параметр бар: Desired capacity, 
Minimum capacity және Maximum capacity.

00:16:03.400 --> 00:16:10.720
Desired capacity - бұл Auto Scaling group 
құрудың басында құрылатын таргеттер саны.

00:16:10.720 --> 00:16:15.400
Minimum capacity және Maximum capacity, 
сәйкесінше, Auto Scaling group жасай алатын

00:16:15.400 --> 00:16:20.720
таргеттердің минималды және 
максималды саны болып табылады.

00:16:20.720 --> 00:16:26.120
Бұл жерде осындай сәт, 
сіз компанияның қаражатын

00:16:26.120 --> 00:16:31.760
тым көп пайдаланбау үшін,бірақ сонымен 
бірге сіздің пайдаланушыларыңыздың

00:16:31.760 --> 00:16:36.560
ең көп сұраныстарын өңдеу үшін 
минимумға және  максимумға

00:16:36.560 --> 00:16:42.200
қандай дұрыс мәнді қою 
керектігін түсінуіңіз керек.

00:16:42.200 --> 00:16:47.500
Сіз Maximum capacity:6 деп 
көрсеткеніңізді елестетіңіз және

00:16:47.500 --> 00:16:53.440
жүктеме кенеттен өсті 
және тіпті 6 инстанс

00:16:53.440 --> 00:16:57.480
барлық пайдаланушыларыңыздың 
сұрауларын өңдей алмады.

00:16:57.480 --> 00:17:01.280
Бұл жағдайда ағымдағы 
жүктемені өңдеу үшін

00:17:01.280 --> 00:17:09.400
6 инстанстың жеткіліксіз 
екендігі туралы қосымша

00:17:09.400 --> 00:17:13.260
хабарландыруларды орнату ұсынылады, 
сондықтан сіз қосылып, осы мәнді

00:17:13.260 --> 00:17:19.760
олмен өзгертуіңіз керек. Немесе 
бастапқыда жүктеме ұлғайған сайын

00:17:19.760 --> 00:17:23.760
біз пайдаланушылардың барлық 
сұрауларына қызмет көрсетуге 

00:17:23.760 --> 00:17:27.320
басымдық береміз, бұл ретте 
инстанстар санын 10-20 инстансқа

00:17:27.320 --> 00:17:33.360
 дейін көбейтуге болады 
деп басшылықтан рұқсат алу керек.

00:17:33.360 --> 00:17:36.040
Бұл қымбатқа түседі, 
бірақ сіз барлық

00:17:36.040 --> 00:17:40.120
пайдаланушыларыңызға сіздің 
қосымшаңыздың сәйкес әрекет

00:17:40.120 --> 00:17:43.840
ететініне кепілдік аласыз. 
Әрі қарай жүрейік.

00:17:43.840 --> 00:17:53.920
Scaling policies бөлімінде біз Target tracking 
scaling policy таңдап, оны реттеуіміз керек:

00:17:53.920 --> 00:17:59.160
Lab policy name ретінде LabScalingPolicy, 
Metric type ретінде Average CPU Utilization

00:17:59.160 --> 00:18:04.160
таңдаймыз, яғни біз жүктемеге, 
процессорларымызға қараймыз

00:18:04.160 --> 00:18:10.280
және target value ретінде 60 көрсетеміз. 
Біз 60 көрсеткен кезде, бұл Auto Scaling

00:18:10.280 --> 00:18:18.280
біздің барлық таргеттерімізге жүктеме шамамен 
60% болуын қамтамасыз етуге тырысады дегенді

00:18:18.280 --> 00:18:22.880
білдіреді. Егер ол көбейсе, 
бұл жүктеме өсті және

00:18:22.880 --> 00:18:27.160
біз қосымша таргеттерді 
қосуымыз керек дегенді білдіреді.

00:18:27.160 --> 00:18:32.040
Егер жүктеме шамамен 40 пайыз 
немесе одан аз болса, онда

00:18:32.040 --> 00:18:36.560
Auto Scaling group ағымдағы таргеттер 
жүктемені оңай жеңе алатындығын және

00:18:36.560 --> 00:18:44.160
бір немесе бірнеше таргеттерді 
жоя алатындығын түсінеді.

00:18:44.160 --> 00:18:47.960
Біз қазір осы тапсырманың 
соңғы бөлігіне көшеміз.

00:18:47.960 --> 00:18:53.560
Next батырмасын басу керек. 
Мұнда біз тегтерді көрсетуіміз керек.

00:18:53.560 --> 00:19:04.680
Бір тег қосайық, Key ретінде Name, Value ретінде 
Lab Instance көрсетейік. Next батырмасын басамыз,

00:19:04.680 --> 00:19:07.600
сонда біз енгізген барлық параметрлерді 
қарап шығуға болатын парақша ашылады.

00:19:07.600 --> 00:19:15.440
Егер бәрі дұрыс болса, біз ең төменгі жағындағы 
Create Auto Scaling Group батырмасын басуға

00:19:15.440 --> 00:19:19.960
болады. Егер сіз Failed to create 
Auto Scaling Group қатесін көрсеңіз,

00:19:19.960 --> 00:19:24.200
пайда болған Retry Failed Tasks 
батырмасын басу керек, 

00:19:24.200 --> 00:19:27.220
содан кейін Auto Scaling 
group сәтті құрылуы керек.

00:19:27.220 --> 00:19:30.000
Ең басында инстанстар 
саны нөлге тең болатынын

00:19:30.000 --> 00:19:37.980
және уақыт өте келе 
Desired capacity-ге тең

00:19:37.980 --> 00:19:41.600
мөлшерде жаңа инстанстар 
бапталатынын ескеріңіз,

00:19:41.600 --> 00:19:48.880
яғни соңында бізде екі инстанс 
бапталып, жұмысқа дайын болады.

00:19:48.880 --> 00:19:51.940
Біз төртінші тапсырмаға 
көшеміз және мұнда біз

00:19:51.940 --> 00:19:57.680
бұрын жасаған барлық IT-ресурстардың 
дұрыс жұмыс істеп жатқанын тексереміз.

00:19:57.680 --> 00:20:01.960
Ең алдымен, сол жақ 
навигациялық мәзірден

00:20:01.960 --> 00:20:07.640
Instances пунктіне өту керек. Мұнда Сіз 
Lab Instance деп аталатын қосымша екі жаңа

00:20:07.640 --> 00:20:13.200
инстанстың пайда болатынын 
көресіз. Неліктен Lab Instance?

00:20:13.200 --> 00:20:19.640
Auto Scaling group құрған кезде біз оған 
Lab Instance мәні бар Name тегін бердік.

00:20:19.640 --> 00:20:24.960
Осылайша, Auto Scaling group 
өзінен құрылған барлық

00:20:24.960 --> 00:20:33.360
инстанстар үшін өз тегтерін тапсырды. Мұнда 
осы екі Lab Instance үшін Health Checks

00:20:33.360 --> 00:20:40.160
өткенін күту керек. Бұл дайын болғаннан 
кейін, сол жақ навигация мәзірінен

00:20:40.160 --> 00:20:45.520
келесі қойындыға өтуге 
болады – бұл Target Groups.

00:20:45.520 --> 00:20:49.880 
Тізімде тек бір target group бар 
екенін көресіз – бұл LabGroup.

00:20:49.880 --> 00:20:59.800
Оны басайық, сонда сіз біздің екі 
инстансымызды Targets қойындысында көресіз.

00:20:59.800 --> 00:21:06.160
Мұнда біз екі инстанстың да күйі 
Healthy күйіне өтуін күтуіміз керек.

00:21:06.160 --> 00:21:12.120
Ол үшін мезгіл-мезгіл Refresh 
батырмасын басуға болады.

00:21:12.120 --> 00:21:14.800
Олар Healthy күйіне 
өткеннен кейін, бұл олардың

00:21:14.800 --> 00:21:24.640
қазір Load Balancer сұрауларын 
қабылдауға қол жетімді екенін

00:21:24.640 --> 00:21:32.720
көрсетеді және сәйкесінше Load Balancer 
трафикті осы таргеттерге бағыттауға дайын.

00:21:32.720 --> 00:21:35.200
Енді Auto Scaling group және 
Load Balancer тұрғысынан

00:21:35.200 --> 00:21:44.760
бәрі жақсы екенін көрейік. 
Сол жақ навигация мәзірінде

00:21:44.760 --> 00:22:00.280
Load Balancers батырмасын басып, төменгі 
жағында Load Balancer-дің DNS Name көшіру керек.

00:22:00.280 --> 00:22:03.580
Оны көшіргеннен кейін 
веб-браузердегі жаңа

00:22:03.580 --> 00:22:07.200
қойындыға қойып, осы
парақшаны ашуға болады.

00:22:07.200 --> 00:22:10.560
Осы зертханалық жұмыс үшін 
арнайы дайындалған қарапайым

00:22:10.560 --> 00:22:20.680
қосымша ашылады және сіз 
қандай да бір жауапты көресіз.

00:22:20.680 --> 00:22:26.000
Бұл біз Load Balancer сұрауын 
жібергенімізді, Load Balancer

00:22:26.000 --> 00:22:28.840
трафикті Auto Scaling group 
жасаған инстанстарға бағыттағанын,

00:22:28.840 --> 00:22:34.120
инстанстар бұл сұрауды өңдеп, қандай да 
бір жауапты қайтарғанын көрсетеді.

00:22:34.120 --> 00:22:41.240
Бұл жауапты сіз қосымшаны 
көрсететін парақша ретінде көресіз.

00:22:41.240 --> 00:22:46.920
Осылайша, біз Auto Scaling group және Load 
Balancer байланысының дұрыс жұмыс істейтінін

00:22:46.920 --> 00:22:56.720
өзімізге растадық. Енді біз соңғы тапсырмаға 
көшеміз – бұл біздің Auto Scaling-ті

00:22:56.720 --> 00:23:01.640
тестілеу, яғни инстанстарымызға 
жүктеме ұлғайған кезде,

00:23:01.640 --> 00:23:04.980
бұл жүктемені көбірек таргеттерге 
тарату үшін Auto Scaling жаңа

00:23:04.980 --> 00:23:14.520
инстанстарды автоматты түрде 
қосатынын тексеруіміз керек.

00:23:14.520 --> 00:23:19.520
Мұны істеу үшін біз басқа сервиске 
ауысуымыз керек, бұл - CloudWatch.

00:23:19.520 --> 00:23:29.920
Сервис іздеу жолағында CloudWatch 
теруді бастайық немесе Watch деп теруді

00:23:29.920 --> 00:23:31.560
бастауға болады, негізінен 
толық мәтінді іздеу жұмыс істейді.

00:23:31.560 --> 00:23:38.560
Сондықтан, ол сервис атауындағы 
таңбалардың кез-келген тіркесін іздейді.

00:23:38.560 --> 00:23:50.040
Сол жақ навигация мәзіріндегі 
CloudWatch сервисі

00:23:50.040 --> 00:23:55.520
парақшасына өткеннен кейін 
All alarms опциясын таңдау керек.

00:23:55.520 --> 00:23:58.640
Сізге екі alarms көрсетілуі 
керек, олардың екеуі де

00:23:58.640 --> 00:24:07.640
Auto Scaling group автоматты түрде жасалған. 
Бұл екі alarms Amazon EC2 инстанстарындағы

00:24:07.640 --> 00:24:11.520
жүктеме негізінде Auto Scaling 
group-ты кезекпен іске қосады,

00:24:11.520 --> 00:24:20.400
бұл өз кезегінде Auto Scaling group-та жаңа 
инстанстарды жоюды немесе құруды бастайды.

00:24:20.400 --> 00:24:26.920
Егер бұл alarms көрсетілмесе, сіз дұрыс 
аймақта отырғаныңызға назар аударыңыз.

00:24:26.920 --> 00:24:31.800
Бізге North Virginia немесе 
us-east-1 аймағы қажет.

00:24:31.800 --> 00:24:35.000
Егер сіз дұрыс аймақта 
отырып, бұл alarms

00:24:35.000 --> 00:24:41.300
көрсетілмесе, біз келесі 
әрекеттерді орындауымыз керек.

00:24:41.300 --> 00:24:46.760
Бұл әрекеттер тек уақытша құрылған 
AWS аккаунтында жасалуы керек.

00:24:46.760 --> 00:24:49.920
Нақты AWS аккаунтында 
мұндай жағдайлар болмайды.

00:24:49.920 --> 00:24:53.280
Сонымен, егер alarms 
көрсетілмесе, сізге Amazon EC2

00:24:53.280 --> 00:24:56.680
сервисіне өту керек, содан кейін 
сол жақ навигациялық мәзірде

00:24:56.680 --> 00:25:00.960
Auto Scaling Groups опциясын 
таңдаңыз, ол біз бұрын 

00:25:00.960 --> 00:25:04.840
жасаған Auto Scaling group – 
Lab Auto Scaling Group деп аталады.

00:25:04.840 --> 00:25:09.660
Әрі қарай, біз оны таңдағаннан кейін экранның 
төменгі жағында бірнеше қойынды пайда болады.

00:25:09.660 --> 00:25:14.960
Бізге Automatic Scaling 
қойындысын ашу керек.

00:25:14.960 --> 00:25:20.520
Тізімнен LabScalingPolicy 
таңдау керек, Actions

00:25:20.520 --> 00:25:26.000
батырмасын басып, ашылмалы 
мәзірден Edit опциясын таңдаймыз.

00:25:26.000 --> 00:25:31.440
Қалқымалы терезе ашылады және Target Value 
ретінде 50 деп көрсету керек және Update

00:25:31.440 --> 00:25:36.480
батырмасын басамыз. Бұл Auto Scaling group 
ішкі ресурстарын қайта құруды бастайды

00:25:36.480 --> 00:25:50.040
және осы жаңартудан кейін сіз Cloudwatch 
сервисінде осы alarms пайда болғанын көре аласыз.

00:25:50.040 --> 00:25:52.360
Назар аударсаңыз, бұл alarms 
бірден пайда болмайды және

00:25:52.360 --> 00:26:06.400
сіз кем дегенде 1-2 минут күтіп, 
содан кейін парақшаны жаңартасыз.

00:26:06.400 --> 00:26:11.520
Біздің alarms пайда 
болғаннан кейін, біз атауында

00:26:11.520 --> 00:26:17.520
AlarmHigh деп аталатын 
alarm таңдауымыз керек.

00:26:17.520 --> 00:26:26.080
Біз оның күйі OK екенін көреміз. Егер 
OK көрсетілмесе, онда біраз уақыт күтіп,

00:26:26.080 --> 00:26:31.640
refresh батырмасын басу керек. 
Ол OK күйіне оралуы керек.

00:26:31.640 --> 00:26:41.440
OK біздің CPU инстанстарымызға 
жүктеме 60%-дан аз екенін білдіреді.

00:26:41.440 --> 00:26:45.440
Ол ұлғайып, 60%-дан 
асқаннан кейін, бұл

00:26:45.440 --> 00:26:48.600
alarm ОК күйінен Alarm 
күйіне ауысады және

00:26:48.600 --> 00:26:55.080
тиісті ақпаратты Auto 
Scaling group-қа жібереді.

00:26:55.080 --> 00:27:02.640
Енді біз Auto Scaling group шынымен 
дұрыс жұмыс істейтінін тексеруіміз керек.

00:27:02.640 --> 00:27:05.760
Ол үшін біз бұрын веб-браузерде 
бөлек қойындыда ашылған 

00:27:05.760 --> 00:27:12.640
қосымшамызға оралып, Load Test 
батырмасын басуымыз керек.

00:27:12.640 --> 00:27:22.880
Сіз оны басқаннан кейін біздің инстанстарға 
жүктеме беретін скрипттер іске қосылады.

00:27:22.880 --> 00:27:25.720
Бұл парақшаны жабуға 
болмайтынын ескеріңіз.

00:27:25.720 --> 00:27:29.940
Егер сіз осы парақшаны 
жапсаңыз, жүктеме тоқтайды.

00:27:29.940 --> 00:27:40.960
Метрикалар AWS-ке өтуін және тиісті ресурстарға 
хабарлануын біраз уақыт күтуіміз керек.

00:27:40.960 --> 00:27:50.680
Refresh батырмасын 
мезгіл-мезгіл басуға болады

00:27:50.680 --> 00:27:57.000
және 5 минуттан аз уақыт 
ішінде AlarmLow өзінің

00:27:57.000 --> 00:28:03.320
мәнін OK мәніне өзгертуі 
керек, ал AlarmHigh, керісінше,

00:28:03.320 --> 00:28:06.680
өзінің күйін In alarm 
күйіне өзгертуі керек,

00:28:06.680 --> 00:28:13.320
яғни қазір біздің инстанстарымызға 
үлкен жүктеме бар екенін айтады.

00:28:13.320 --> 00:28:18.520
Сондай-ақ, егер сіз тиісті alarm 
ашсаңыз, біздің жағдайда AlarmHigh,

00:28:18.520 --> 00:28:23.880
сіз график түріндегі 
CPU жүктемесін көресіз.

00:28:23.880 --> 00:28:28.560
Ол 60% немесе 50%-ға 
өткеннен кейін, егер біз

00:28:28.560 --> 00:28:35.080
alarms қайта жасасақ, және 
ол 3 минуттан артық созылса,

00:28:35.080 --> 00:28:42.200
ол Auto Scaling group-ты іске қосады, 
бұл өз кезегінде жаңа инстанстарды қосады.

00:28:42.200 --> 00:28:48.080
Біз AlarmHigh In alarm 
күйіне өтуін күтуіміз керек.

00:28:48.080 --> 00:28:52.080
Ол онда өткеннен кейін 
сіз Amazon EC2 сервисіне 

00:28:52.080 --> 00:28:57.880
өтіп, сол жақ навигация мәзірінде 
Instances опциясын ашып, қазіргі уақытта

00:28:57.880 --> 00:29:05.280
Lab Instance атты инстанстар екі, үш немесе 
төрттен көп екеніне көз жеткізе аламыз.

00:29:05.280 --> 00:29:10.200
Бұл Auto Scaling дұрыс 
жұмыс істеп тұрғанын және

00:29:10.200 --> 00:29:14.160
жүктемені тарату үшін қосымша 
инстанстар жасағанын көрсетеді.

00:29:14.160 --> 00:29:22.000
Бұған көз жеткізгеннен кейін, 
жүктеме қалыпты күйге

00:29:22.000 --> 00:29:28.000
оралуы үшін қосымша 
парақшасын жабуға болады.

00:29:28.000 --> 00:29:40.760
Сондай-ақ, инстанстардың саны үш пен төрттен
ең төменгі 2 мәніне қайта оралуы үшін

00:29:40.760 --> 00:29:48.200
кем дегенде 5 минут күте 
аласыз. Сіз бұл күйге жеткен соң,

00:29:48.200 --> 00:29:51.400
мен қосымша эксперимент 
жасауды ұсынғым келеді.

00:29:51.400 --> 00:29:55.200
Сізге Amazon EC2 сервисінде, 
Instances-тің сол жақ

00:29:55.200 --> 00:29:59.920
навигациялық мәзірінде Lab Instance деп 
аталатын инстанстардың бірін таңдап,

00:29:59.920 --> 00:30:05.920
Actions батырмасы арқылы бұл 
инстансты жою, яғни өшіру керек.

00:30:05.920 --> 00:30:14.200
Сіз оны өшіргеннен кейін, 
Load Balancer-де таргеттердің

00:30:14.200 --> 00:30:19.320
бірі unhealthy болғанын көресіз, 
содан кейін трафик осы инстансқа

00:30:19.320 --> 00:30:25.800
бағытталуды тоқтатады. Auto Scaling 
сәйкесінше инстанстардың саны

00:30:25.800 --> 00:30:31.320
минималды мәннен аз болғанын көреді 
және жаңа инстансты құруды бастайды.

00:30:31.320 --> 00:30:34.160
Біраз уақыттан кейін сіз тағы 
бір қосымша инстанс жасалғанын

00:30:34.160 --> 00:30:41.500
және екі инстанстың 
көрсетілетінін көресіз.

00:30:41.500 --> 00:30:51.280
Біз соңғы тапсырмаға көшеміз. Біз ең басында 
Web Server 1 деп аталатын инстанстан AMI құрдық.

00:30:51.280 --> 00:30:55.240
Көріп отырғаныңыздай, бізге бұл 
сервер енді қажет емес, өйткені

00:30:55.240 --> 00:31:01.440
қазір трафик осы Web server-ге 
емес, Load Balancer-ге жіберіледі.

00:31:01.440 --> 00:31:06.800
Осылайша біз бұл серверді жоя аламыз. Ол үшін 
инстанстар тізімінде Web Server 1 таңдау керек,

00:31:06.800 --> 00:31:15.000
содан кейін Instance state батырмасын басып, 
Terminate instance опциясын таңдаңыз.

00:31:15.000 --> 00:31:23.120
Сондай-ақ, қалқымалы мәзірде біз бұл 
инстансты өшіретінімізді растауымыз керек.

00:31:23.120 --> 00:31:29.040
Осымен біз зертханалық 
жұмыстың соңына да жеттік.

00:31:29.040 --> 00:31:38.080
Бізге уақытша AWS акаунтынан 
дұрыс өшіру/шығу қажет екенін

00:31:38.080 --> 00:31:44.480
еске саламын. Сондай-ақ, AWS Academy-де 
зертханалық жұмыс парақшасында

00:31:44.480 --> 00:31:47.520
End Lab батырмасын басып, 
"DELETE has been initiated...

00:31:47.520 --> 00:31:53.120
You may close this message box now."
хабарламасын күтіп растау керек,

00:31:53.120 --> 00:31:56.600
бұл барлық жасалған ресурстар 
мен аккаунттарды жою процесі

00:31:56.600 --> 00:32:03.320
басталғанын көрсетеді және 
сіз бұл терезені жаба аласыз.

00:32:03.320 --> 00:32:05.800
Сіз бұл қалқымалы терезені жабасыз, 
сонымен қатар AWS Academy

00:32:05.800 --> 00:32:11.120
қойындысын жабуға болады және сіз 
зертханалық жұмысты сәтті аяқтадыңыз.

00:32:11.120 --> 00:32:15.440
Зертханалық жұмыстың 
аяқталуымен тағы да құттықтаймын.

00:32:15.440 --> 00:32:21.920
Көптеген сұрақтарға жауап 
берілді деп үміттенемін,

00:32:21.920 --> 00:32:28.200
сіз ELB және Auto Scaling сервистері 
туралы толық түсінік алдыңыз деп ойлаймын.

00:32:28.200 --> 00:32:45.000
Егер сұрақтар туындаса, сұраңыз, ал біз 
келесі белсенділіктерімізде көрісеміз.
WEBVTT

00:00:00.000 --> 00:00:08.840
Добрый день, уважаемые студенты! Я рад вас видеть
на очередной сессии разбора лабораторной работы.

00:00:08.840 --> 00:00:14.600
Тема лабораторной работы – это сервис 
Amazon EBS. Окей, давайте начнем.

00:00:14.600 --> 00:00:24.560
Итак, мы будем продолжать с
основной страницы лабораторной работы.

00:00:24.560 --> 00:00:29.840
Ожидается, что вы уже инициализировали
ваш временный AWS аккаунт.

00:00:29.840 --> 00:00:38.440
И сейчас достаточно нажать на кнопку AWS,
чтобы перейти в AWS Management Console.

00:00:38.440 --> 00:00:43.208
В верхней правой части AWS
Management Console вы видите, что

00:00:43.232 --> 00:00:48.000
был создан временный аккаунт с
соответствующим пользователем.

00:00:48.000 --> 00:00:53.160
Давайте начнем выполнять
задание лабораторной работы.

00:00:53.160 --> 00:00:57.560
Первым делом нам необходимо
перейти в сервис EC2.

00:00:57.560 --> 00:01:06.920
Для этого в строке поиска сервисов начнем вводить EC2
и в выборке первая ссылка будет ссылка на сервис EC2.

00:01:06.920 --> 00:01:13.563
Как только мы перейдем на сервис EC2, в левом
навигационном меню необходимо выбрать пункт

00:01:13.587 --> 00:01:20.760
меню Instances для того, чтобы отобразить список
существующих инстансов на нашем AWS аккаунте.

00:01:20.760 --> 00:01:26.360
Если этот список пустой, обратите внимание,
в каком регионе вы сейчас находитесь.

00:01:26.360 --> 00:01:32.560
Регион можно увидеть в верхней правой
части страницы AWS Management Console.

00:01:32.560 --> 00:01:35.840
Необходимо, чтобы
регион был North Virginia.

00:01:35.840 --> 00:01:44.080
В списке инстансов вы помимо
прочих видите инстанс с названием Lab.

00:01:44.080 --> 00:01:52.080
Нам необходимо запомнить, что этот инстанс 
находится в availability зоне us-east-1a.

00:01:52.080 --> 00:02:00.160
Мы с вами двигаемся дальше. Теперь нам необходимо
в левом навигационном меню выбрать пункт Volumes.

00:02:00.160 --> 00:02:07.640
В этом случае отобразится список всех
существующих EBS volumes на нашем аккаунте.

00:02:07.640 --> 00:02:16.842
Давайте создадим новый volume. В настройках нам
необходимо выбрать тип volume, как gp2, это General

00:02:16.866 --> 00:02:25.880
Purpose SSD. Далее размер, давайте выберем 1
ГБ, для учебных целей этого более чем достаточно.

00:02:25.880 --> 00:02:32.760
Как availability зону нам необходимо выбрать ту
зону, где находится наш инстанс с названием Lab.

00:02:32.760 --> 00:02:42.880
В нашем случае это us-east-1a. Если мы прокрутим
страницу чуть ниже, мы также можем ввести теги.

00:02:42.880 --> 00:02:51.840
Давайте создадим тег с ключом name и значением
My Volume. Нажмем на кнопку Create Volume.

00:02:51.840 --> 00:02:59.000
Вы увидите, что в списке Volumes отобразится новый с
названием My Volume, с соответствующим размером.

00:02:59.000 --> 00:03:07.680
Если мы проскроллим этот список чуть направо, мы
увидим Volume state, то есть состояние нашего volume.

00:03:07.680 --> 00:03:15.320
В самом начале, во время создания он будет в
состоянии Creating, т.е. создается и пока не 

00:03:15.320 --> 00:03:19.202
доступно для работы. Давайте подождем 
пару минут, после чего нажмем

00:03:19.226 --> 00:03:23.040
на кнопку Refresh, чтобы
обновить список наших volumes.

00:03:23.040 --> 00:03:29.520
Через некоторое время мы увидим, что значение 
статуса поменялось с Creating на Available.

00:03:29.520 --> 00:03:37.920
Available это значит наш volume доступен для привязки
к EC2 инстансу и в данный момент не привязан.

00:03:37.920 --> 00:03:48.120
Если вы видите статус In-use, это говорит о
том, что данный volume привязан к EC2 инстансу.

00:03:48.120 --> 00:03:52.001
Как только мы убедились, что наш
новый созданный volume доступен

00:03:52.025 --> 00:03:55.720
для привязки к EC2 инстансу,
давайте попробуем это сделать.

00:03:55.720 --> 00:04:01.648
Для начала необходимо выбрать
наш volume, далее вверху вправо нажать

00:04:01.672 --> 00:04:07.600
на кнопку Actions и в выпадающем
списке выбрать опцию Attach volume.

00:04:07.600 --> 00:04:11.199
Вы перейдете на
соответствующую страницу, где будет

00:04:11.223 --> 00:04:15.400
указан Volume ID, это тот
volume, который мы привязываем.

00:04:15.400 --> 00:04:21.947
Далее нам необходимо выбрать instance,
в выпадающем меню будет отображен

00:04:21.971 --> 00:04:28.240
список наших инстансов, также
рядом будет название нашего инстанса.

00:04:28.240 --> 00:04:32.400
Нам нужно выбрать тот,
который называется Lab.

00:04:32.400 --> 00:04:42.368
Нам необходимо также сделать пометку и записать
Device name это /dev/sdf, то есть это системное

00:04:42.392 --> 00:04:52.360
название нашего инстанса, используя ее мы будем
подключать наш жесткий диск к Linux EC2 инстансу.

00:04:52.360 --> 00:04:56.720
Давайте проскроллим вниз и
нажмем на кнопку Attach volume.

00:04:56.720 --> 00:05:03.288
Как только вы на нее нажмете, вас перенаправит
на страницу со списком жестких дисков

00:05:03.312 --> 00:05:09.880
и вы увидите, что в нашем жестком диске
поменялось состояние с Available на In-use.

00:05:09.880 --> 00:05:16.964
Теперь нам необходимо попробовать подключиться
к нашему EC2 инстансу для того, чтобы завершить

00:05:16.988 --> 00:05:23.920
все необходимые настройки и сделать наш
жесткий диск доступным для работы в этом инстансе.

00:05:23.920 --> 00:05:31.885
Для этого нам необходимо перейти на страницу
с лабораторной работой в AWS Academy, в меню

00:05:31.909 --> 00:05:40.600
лабораторной работы нажать на кнопку Details и
далее в выпадающем окошке нажать на кнопку Show.

00:05:40.600 --> 00:05:45.528
Вы увидите всплывающее окно с
некоторыми  полезными деталями

00:05:45.552 --> 00:05:50.480
касательно нашего нового
созданного временного AWS аккаунта.

00:05:50.480 --> 00:05:57.920
В рамках этого AWS аккаунта
для нас также был создан SSH ключ.

00:05:57.920 --> 00:06:03.360
Мы можем его скачать в двух различных 
вариантах. Это PEM ключ либо PPK.

00:06:03.360 --> 00:06:07.968
В зависимости от того, какая
операционная система установлена на

00:06:07.992 --> 00:06:12.600
вашем компьютере, вы выбираете
соответствующий вид private ключа.

00:06:12.600 --> 00:06:17.720
В случае, если у вас Windows операционная
система, вам необходимо скачать PPK.

00:06:17.720 --> 00:06:25.800
В случае, если у вас Mac OS либо Linux,
необходимо скачать PEM формат private ключа.

00:06:25.800 --> 00:06:35.200
Также на странице с заданием лабораторной
работы вы увидите ссылку на программу.

00:06:35.200 --> 00:06:40.967
Называется она PuTTY и эта программа
является самой популярной программой

00:06:40.991 --> 00:06:47.320
для подключения по SSH к удаленному серверу.
В нашем случае это EC2 Instance.

00:06:47.320 --> 00:06:56.320
Здесь есть ссылка, вам необходимо
по ней перейти и скачать эту программу.

00:06:56.320 --> 00:07:00.720
Как только вы скачали программу PuTTY,
вам нет необходимости ее устанавливать.

00:07:00.720 --> 00:07:08.680
После запуска программы вы увидите
окно и можно с ней уже работать.

00:07:08.680 --> 00:07:15.468
Так выглядит основное окно программы.
В левой части окна навигационное меню

00:07:15.492 --> 00:07:22.280
и в правой части, соответственно,
значение настроек, которые можно вводить.

00:07:22.280 --> 00:07:28.711
Давайте перейдем в левом навигационном
меню в пункт Connection откроются

00:07:28.735 --> 00:07:36.800
соответствующие настройки и для параметра
Seconds between keepalives ввести значение 30.

00:07:36.800 --> 00:07:43.900
После чего необходимо вернуться
обратно в первый пункт меню Session.

00:07:43.900 --> 00:07:54.938
Вы попадаете на самую основную страницу, вкладку.
Здесь необходимо ввести Host name либо IP адрес.

00:07:54.962 --> 00:08:06.000
Для того, чтобы узнать наш IP адрес, нам необходимо
перейти в AWS Management Console на сервис EC2.

00:08:06.000 --> 00:08:10.720
Дальше в сервисе EC2 в левом
навигационном меню перейти на Instances.

00:08:10.720 --> 00:08:16.920
Вы увидите список ваших инстансов. Нас интересует
инстанс с именем Lab. Необходимо его выбрать.

00:08:16.920 --> 00:08:21.960
После чего в нижней части экрана
отобразятся данные по нашему инстансу.

00:08:21.960 --> 00:08:28.440
Давайте нажмем на вкладку Details и вы
увидите секцию, где прописан Public IPv4 адрес.

00:08:28.440 --> 00:08:35.240
Нам необходимо ее скопировать и вставить
в соответствующее поле в программе PuTTY.

00:08:35.240 --> 00:08:42.019
После чего в левом навигационном
меню нам необходимо раскрыть вкладку

00:08:42.043 --> 00:08:50.120
Connection и далее раскрыть SSH и
открыть под вкладку Auth, то есть авторизация.

00:08:50.120 --> 00:08:55.908
После того, как мы туда перейдем, вы
увидите в настройках поле, где можно

00:08:55.932 --> 00:09:01.640
указать путь к файлу с нашим private ключом.
Давайте нажмем на Browse.

00:09:01.640 --> 00:09:10.340
В компьютере найдем соответствующий
файл, его выберем и нажмем на кнопку Open.

00:09:10.340 --> 00:09:15.678
Как только вы на нее нажмете, откроется
страница с командной строкой и выйдет

00:09:15.702 --> 00:09:21.040
сообщение о том, что действительно ли
вы доверяете этому удаленному серверу.

00:09:21.040 --> 00:09:30.560
В нашем случае, да, это наш EC2 инстанс. Нажимаем
на кнопку Да и командная строка становится 

00:09:30.560 --> 00:09:37.800
доступной. Также он запросит у нас логин
пользователя, необходимо ввести ec2-user.

00:09:37.800 --> 00:09:43.469
Как только вы его введете, вы увидите
сообщение о том, что мы успешно

00:09:43.493 --> 00:09:50.080
авторизовались в нашем EC2 инстансе и
можем запускать необходимые нам команды.

00:09:50.080 --> 00:09:55.065
Подключение к EC2 инстансу в
MacOS и Linux клиентах немного

00:09:55.089 --> 00:10:00.849
отличается, оно намного проще,
вам нет необходимости устанавливать

00:10:00.873 --> 00:10:06.811
сторонние программы, а уже встроено
в терминале, достаточно запустить

00:10:06.835 --> 00:10:12.160
набор команд, которые указаны
в задании лабораторной работы.

00:10:12.160 --> 00:10:19.648
Мы с вами успешно авторизовались
внутри EC2 инстанса и сейчас нам необходимо

00:10:19.672 --> 00:10:26.560
закончить настройку и сделать наш
жесткий диск доступным для работы.

00:10:26.560 --> 00:10:35.160
Первым делом, давайте введем команду df -h. Здесь
мы можем увидеть все доступные файловые системы.

00:10:35.160 --> 00:10:44.720
Root файловая система, это выделенная
на экране /dev/xvda1 размером 8 гигабайтов.

00:10:44.720 --> 00:10:51.160
Это тот жесткий диск, на котором
установлена операционная система.

00:10:51.160 --> 00:10:55.402
Мы двигаемся дальше, нам сейчас
необходимо жесткий диск, который

00:10:55.426 --> 00:10:59.600
доступен для этого EC2 инстанса
подключить к нашему инстансу.

00:10:59.600 --> 00:11:07.308
Для этого необходимо ввести
команду sudo mkfs -t ext3 и

00:11:07.332 --> 00:11:15.040
ввести значение ID девайса,
который мы сохранили ранее.

00:11:15.040 --> 00:11:21.072
После того, как вы ее запустите, вы
увидите соответствующее сообщение

00:11:21.096 --> 00:11:27.040
о том, что оно успешно было
добавлено к текущим файловым системам.

00:11:27.040 --> 00:11:30.662
Следует отметить, что после
этой команды файловая система,

00:11:30.686 --> 00:11:34.180
а именно жесткий диск, все
еще не доступен для работы.

00:11:34.180 --> 00:11:38.167
Нам необходимо создать
папку, которая является точкой

00:11:38.191 --> 00:11:43.100
монтирования этого жесткого
диска в нашей операционной системе.

00:11:43.100 --> 00:11:50.240
Поэтому мы создаем папку
mount и назовем его data-store.

00:11:50.240 --> 00:11:58.640
Все папки и файлы в нашем жестком
диске будут находиться по вот этому пути.

00:11:58.640 --> 00:12:02.262
Как только мы создали папку,
теперь нам нужно этот путь, эту

00:12:02.286 --> 00:12:06.400
папку привязать к нашей файловой
системе, к нашему жесткому диску.

00:12:06.400 --> 00:12:11.688
Для этого запускаем вторую
команду, которую вы видите

00:12:11.712 --> 00:12:17.000
на экране. Как только вы ее 
запустите, она привяжется.

00:12:17.000 --> 00:12:21.668
Теперь важный момент, когда
мы перезагрузим наш EC2 инстанс,

00:12:21.692 --> 00:12:26.360
то связь со всеми дополнительными
жесткими дисками пропадает.

00:12:26.360 --> 00:12:32.880
Поэтому, чтобы эта связь не пропадала, нам необходимо
в автозагрузку добавить соответствующую команду.

00:12:32.880 --> 00:12:38.378
И когда инстанс будет перезагружаться,
то связь будет автоматически

00:12:38.402 --> 00:12:43.400
устанавливаться и жесткий
диск будет всегда готов к работе.

00:12:43.400 --> 00:12:49.808
Для этого мы ведем соответствующую команду.
Эта команда сохранится

00:12:49.832 --> 00:12:56.240
в fstab, то есть это список команд,
которые запускаются при запуске.

00:12:56.240 --> 00:13:02.960
Если мы посмотрим на ее
содержимое, мы увидим нашу команду.

00:13:02.960 --> 00:13:09.608
Давайте теперь, после того, как мы произвели все
необходимые настройки, попробуем еще раз ввести

00:13:09.632 --> 00:13:16.280
команду df -h, для того чтобы отобразить все
существующие файловые системы на нашем EC2 инстансе.

00:13:16.280 --> 00:13:26.280
Вы увидите, что у нас появился еще один пункт,
дополнительная линия файловая система /dev/xvdf.

00:13:26.280 --> 00:13:29.280
Она может отличаться у
вас, в моем случае это так.

00:13:29.280 --> 00:13:36.308
Вы видите, что размер 1 гигабайт, и вы
также видите, что она примонтирована по пути,

00:13:36.332 --> 00:13:43.360
который мы указывали ранее, а именно
рутовая папка mnt и внутри под папка data-store.

00:13:43.360 --> 00:13:51.120
Теперь попробуем в нашем новом жестком 
диске создать новый файл. Для этого

00:13:51.120 --> 00:14:02.680
запустим следующую команду, и для перепроверки
посмотрим содержимое нашего файла, file.txt.

00:14:02.680 --> 00:14:09.920
Как только мы запустим вторую команду, мы увидим
текст, который мы ранее вводили при создании нашего

00:14:09.920 --> 00:14:16.346
файла. Это говорит о том, что файл успешно
создан, жесткий диск правильно настроен,

00:14:16.370 --> 00:14:22.560
и мы можем переходить к следующему
заданию в рамках нашей лабораторной работы.

00:14:22.560 --> 00:14:28.088
Мы с вами переходим к заключительному
заданию в рамках нашей лабораторной

00:14:28.112 --> 00:14:33.640
работы, а именно создадим снапшот и
попробуем восстановить этот снапшот.

00:14:33.640 --> 00:14:39.118
Для этого в AWS Management Console в
сервисе EC2 в левом навигационном меню нам

00:14:39.142 --> 00:14:45.041
необходимо выбрать пункт Volumes,
отобразится список всех существующих volumes, нам

00:14:45.065 --> 00:14:51.072
необходимо выбрать наш созданный, называется
My Volume, выбрать его. В верхней правой

00:14:51.096 --> 00:14:56.960
части нажать на кнопку Actions и в
выпадающем меню выбрать опцию Create snapshot.

00:14:56.960 --> 00:15:04.080
Вас направят на новую страницу, где необходимо
ввести данные, информацию о вашем новом снапшоте.

00:15:04.080 --> 00:15:13.400
Давайте заполним теги. Для тега name введем значение
My Snapshot и нажмем на кнопку Create snapshot.

00:15:13.400 --> 00:15:20.040
Вы вернетесь обратно в список с вашими
снапшотами и увидите статус Pending.

00:15:20.040 --> 00:15:24.320
Вам необходимо дождаться, что
статус поменяется на Completed.

00:15:24.320 --> 00:15:32.920
Для этого вы можете нажимать на кнопку Refresh в
верхней части экрана, либо обновлять всю страницу.

00:15:32.920 --> 00:15:37.520
Пока у нас будет создаваться снапшот,
мы можем сделать следующим образом.

00:15:37.520 --> 00:15:43.086
Необходимо перейти к нашему
EC2 инстансу на наше SSH

00:15:43.110 --> 00:15:49.880
подключение и попробуем
удалить наш созданный файл, file.txt.

00:15:49.880 --> 00:15:53.874
Как только мы ее удалим, давайте
проверим, что действительно

00:15:53.898 --> 00:15:57.280
в папке data-store нет ни
одного файла или папки.

00:15:57.280 --> 00:16:05.888
Если мы вернемся после этого обратно
к AWS Management Console, мы увидим,

00:16:05.912 --> 00:16:14.520
что статус нашего снапшота уже
поменялся на Completed и он готов к работе.

00:16:14.520 --> 00:16:20.768
Что значит готов к работе? Это значит то,
что мы можем создать новый жесткий диск на

00:16:20.792 --> 00:16:27.040
базе этого снапшота, что мы с вами и сейчас
проделаем. Давайте выберем наш снапшот.

00:16:27.040 --> 00:16:35.160
В верхней правой части нажмем на Actions и в
выпадающем меню нажмем Create volume from snapshot.

00:16:35.160 --> 00:16:42.960
Откроется новая страница для ввода входящих данных.
Здесь нам необходимо выбрать availability зону.

00:16:42.960 --> 00:16:51.200
Это та зона availability зона, где находится
наш EC2 инстанс. В моем случае это us-east-1a.

00:16:51.200 --> 00:16:56.590
Здесь необходимо также заполнить теги.
Давайте как name введем

00:16:56.614 --> 00:17:02.800
Restored volume для того, чтобы
легче было различать наши EBS volume.

00:17:02.800 --> 00:17:07.428
Прокрутим чуть ниже и
нажмем на кнопку Create volume.

00:17:07.452 --> 00:17:12.080
Вы увидите, что в списке
отобразится наш новый volume.

00:17:12.080 --> 00:17:20.414
Подождем пока он перейдет в состояние Available
и после этого выберем наш Restored volume и в

00:17:20.438 --> 00:17:29.680
Actions выпадающем меню нажмем на опцию Attach volume
для того, чтобы привязать ее к нашему инстансу.

00:17:29.680 --> 00:17:34.800
Здесь также откроется новая страница.
Вы увидите Volume ID с названием Restored volume.

00:17:34.800 --> 00:17:42.928
Нам необходимо выбрать инстанс с
названием Lab и также вы увидите, что для этого

00:17:42.952 --> 00:17:51.080
жесткого диска дано системное имя, путь,
по которому он будет находиться /dev/sdg.

00:17:51.080 --> 00:17:57.720
Нам необходимо запомнить это значение, оно нам
еще понадобится и нажать на кнопку Attach volume.

00:17:57.720 --> 00:18:06.244
Теперь нам необходимо произвести все те же настройки,
но единственное отличие, точка монтирования,

00:18:06.268 --> 00:18:14.000
а именно путь у нас будет отличаться и
будет в рутовой папке mnt под папка data-store2.

00:18:14.000 --> 00:18:23.829
Как только мы настроим новый жесткий
диск, мы можем посмотреть содержание этого

00:18:23.853 --> 00:18:34.440
жесткого диска и вы увидите там наш
ранее созданный файл и называется она file.txt.

00:18:34.440 --> 00:18:39.920
Таким образом мы смогли восстановить
наш снапшот, наш файл доступен.

00:18:39.920 --> 00:18:47.160
На этом мы завершаем нашу лаборторную работу. Нам
необходимо со всех систем корректно разлогиниться.

00:18:47.160 --> 00:18:51.888
Для этого в AWS Management Console
в верхней правой части нажмем на

00:18:51.912 --> 00:18:56.640
название пользователя, в выпадающем
меню нажмем на кнопку Sign out.

00:18:56.640 --> 00:19:04.892
Далее на странице AWS Academy с нашей лаборторной
работой нам необходимо нажать на кнопку End lab в

00:19:04.916 --> 00:19:12.779
верхней правой части, подтвердить, что мы завершаем
лаборторную работу и в всплывающем окошке

00:19:12.803 --> 00:19:21.289
дождаться, что появится сообщение You may close this
message box now. Lab resources are terminating...,

00:19:21.313 --> 00:19:25.743
что говорит о том, что команда завершения
лаборторной работы успешно принята

00:19:25.767 --> 00:19:29.800
системой и процесс удаления
всех ресурсов начался.

00:19:29.800 --> 00:19:37.000
После чего мы можем закрывать это
всплывающее окно и также выходить с AWS Academy.

00:19:37.000 --> 00:19:44.800
На этом мы завершаем сессию разбора
лаборторной работы. Мы подробнее поговорили про

00:19:44.800 --> 00:19:49.160
сервис Amazon EBS. Я очень надеюсь, что вы
получили более полное представление об этом сервисе.

00:19:49.160 --> 00:19:54.440
Спасибо за внимание.
Увидимся с вами на следующих наших активностях.

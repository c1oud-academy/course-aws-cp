Добрый день, уважаемые студенты!
Я рад вас всех видеть на очередной сессии разбора лабораторной работы.
Эта лабораторная работа посвящена более подробному знакомству с сервисом AWS AM.
Итак, давайте начнем.
Для начала нам необходимо открыть основную страницу лабораторной работы.
Для этого нам необходимо воспользоваться платформой AWS Academy, авторизоваться в этой платформе,
далее выбрать необходимый курс, открыть четвертый модуль,
и в активностях четвертого модуля будет ссылка Lab1 Introduction to AWS AM.
Как только вы нажмете на эту ссылку, вы перейдете на указанную страницу.
Это основная страница лабораторной работы.
Здесь вам необходимо нажать на кнопку в меню Start Lab для того, чтобы активировать песочницу,
и для вас создалось специальное AWS аккаунт для вашей сессии.
После того, как вы успешно стартовали лабораторную работу,
вам необходимо будет нажать на кнопку AWS для того, чтобы перейти в AWS Management Console.
Как только вы перейдете по ссылке, вы окажетесь на основной странице AWS Management Console.
Обратите внимание, вверху справа вы авторизованы под сгенерированным пользователем,
а также для вас был специально создан уникальный AWS Account ID.
Хорошо, давайте начнем.
Вам необходимо в верхней строке поиска сервисов AWS начать писать AM.
В выдаче вы увидите этот сервис первым в списке.
Давайте на него перейдем.
Как только вы попадете на основную страницу сервиса AWS AM,
вам необходимо в левом навигационном меню нажать на вкладку Users
для того, чтобы отобразился список существующих пользователей в этом AWS аккаунте.
В рамках лабораторной работы для нас были предварительно созданы три пользователя.
Это User1, User2 и User3.
Давайте откроем User1 для того, чтобы посмотреть некоторые детали по этому пользователю.
Если вы откроете вкладку Permissions, то увидите, что у этого пользователя нет привязанных к нему полиси.
Если вам нужно это сделать, вы можете воспользоваться кнопкой Add Permissions.
Давайте двигаться дальше.
Следующая вкладка – это Groups.
В этой вкладке отображаются все группы, которые относятся этот пользователь.
Мы видим, что этот пользователь сейчас не относится к ни одной из групп.
Следующая вкладка, которую я хотел бы с вами просмотреть – это Security Credentials.
На этой странице вы можете найти все креденщалы этого пользователя.
На этой вкладке нам необходимо обратить внимание, что консоль Password Enabled.
Это говорит о том, что у этого пользователя, IAM-User, есть возможность авторизовываться в AWS Management консоли.
Мы рассмотрели с вами подробнее, какие пользователи были для нас созданы.
Также вы можете открыть подробную информацию других двух пользователей и убедиться, что она совпадает.
А мы двигаемся дальше.
Нам необходимо в левом навигационном меню нажать на вкладку User Groups для того, чтобы открылся список существующих групп в этом AWS аккаунте.
В этом AWS аккаунте для нас в рамках лабораторной работы было создано три группы.
Это EC2 Admin, EC2 Support и S3 Support.
Давайте откроем группу EC2 Support для того, чтобы посмотреть его детали.
На открывшейся странице перейдем на вкладку Permissions и мы увидим, что у этого пользователя у этой группы одна привязанная полиси, которая называется Amazon EC2 Redundly Access.
Здесь бы я хотел обратить внимание, что это полиси по типу AWS Managed.
Это говорит о том, что создание, обновление, а также сопровождение этого полиси занимается сам AWS.
Давайте нажмем на иконку plus возле этого полиси для того, чтобы посмотреть, на что же она выдает нам доступ.
Как мы видим, в основном выдается доступ на экшены операции describe и list.
Это говорит о том, что у этого полиси нет возможности изменять ресурсы в рамках AWS, а только просматривать в режиме чтения.
Если мы говорим о сервисах, то это EC2, Elastic Load Balancing, CloudWatch, а также Autoscaling.
Давайте двигаемся дальше и посмотрим следующую нашу группу.
Необходимо нажать в левом навигационном меню на вкладку User Groups и в открышемся списке групп перейти на S3 Support.
Здесь также давайте откроем вкладку Permissions и мы увидим, что у этой группы есть привязанная полиси Amazon EC2 Redundly Access.
Она также является AWS Managed Policy. Если мы нажмем на кнопку plus, то мы увидим тело этого полиси.
Оно нам выдает доступ на get, list, операции в рамках сервиса S3. То есть эта полиси также является read only.
Теперь мы также поступим, откроем список существующих групп через вкладку User Groups в левом навигационном меню и перейдем к третьей группе EC2 Admin.
В этой группе по открытии вкладки Permissions мы видим, что есть одна привязанная полиси, называется EC2 Admin Policy.
По типу мы видим, что это Customer Inline, что говорит нам о том, что эта полиси была индивидуально создана в рамках этой конкретной группы.
Если мы нажмем на кнопку, на иконку plus, то мы увидим тело этого полиси.
Как мы с вами видим, что выдается доступ на все операции, экшены, начинающиеся с describe для сервиса EC2, а также дополнительно выдается доступ на экшены start instance и stop instance.
Хорошо, мы ознакомились подробнее с созданными специально для нас в рамках лабораторной работы IAM группами.
Теперь нам необходимо наших IAM пользователей добавить в соответствующие группы согласно заданию лабораторной работы.
Для этого перейдем в левом навигационном меню на вкладку User Groups и откроем группу S3 Support.
На странице группы S3 Support необходимо перейти на вкладку Users и нажать на кнопку Add Users.
Откроется страница с существующими пользователями в этом AWS аккаунте.
Нам необходимо выбрать для группы S3 Support User1 и нажать на кнопку Add Users.
Мы будем перенаправлены на основную страницу группы S3 Support.
В верхней части вы увидите зеленое уведомление о том, что пользователи были успешно добавлены в эту группу.
Если посмотреть на вкладку Users, то мы также увидим только что добавленного пользователя User1 в списке пользователей, отнесящихся к группе S3 Support.
Мы те же действия проделаем со следующими группами, поэтому еще раз необходимо нажать в левом навигационном меню во вкладку User Groups
и перейти в группу EC2 Support.
Далее во вкладке Users нажать на кнопку Add Users и здесь уже выбрать следующего нашего пользователя User2.
Нажимаем на Add Users.
После чего переходим на страницу EC2 Support и увидим все тоже аналогичное сообщение о том, что пользователь был добавлен.
Теперь двигаемся дальше.
У нас осталась третья группа. Нам необходимо также в левом навигационном меню нажать на вкладку User Groups для того, чтобы отобразился список существующих групп.
Нам необходимо нажать третью группу EC2 Admin и здесь также через вкладку Users нажать на кнопку Add Users.
В списке пользователей мы выбираем третьего пользователя User3 и нажимаем на кнопку Add Users.
Мы перейдем на основную страницу группы EC2 Admin и увидим соответствующее сообщение об успешном выполнении этой операции,
а во вкладке Users увидим нашего пользователя User3.
Если мы нажмем еще раз на вкладку User Groups в левом навигационном меню, откроется список групп и в этом списке есть специальная колонка Users,
которая отображает количество пользователей в соответствующих IAM группах.
Мы увидим, что в каждой группе у нас сейчас по одному пользователю.
Если вы проделали все те же действия, которые мы проделали, в конце у вас должна получиться такая картина.
Хорошо, мы завершили нашу задачу с левязкой пользователей группы.
Давайте перейдем к следующей части, а именно левом навигационном меню нажмем на вкладку Dashboard на отобразившейся странице.
В правой части вы увидите ссылку Sign in URL for IAM users.
Необходимо вам скопировать эту ссылку.
Это та ссылка, которую вы можете раздавать вашим сотрудникам.
И эти сотрудники, используя эту ссылку, будут авторизовываться в вашем AWS аккаунте под IAM пользователями.
Сейчас мы попробуем под созданными для нас пользователями в этом AWS аккаунте попробовать авторизоваться
и посмотреть на какие сервисы у них есть или нет доступа.
Рекомендую вам открыть эту ссылку в Inkognito режиме.
Как только вы откроете эту страницу, отобразится страница, где необходимо ввести аккаунт ID.
Он уже для вас будет введен, так как оно сидит в этой ссылке.
Нам достаточно ввести логин пользователя, а также пароль.
Логин пользователя это user1.
Пароль вы можете посмотреть на странице с заданием лаборатурной работы в AWS Academy.
Как только вы успешно авторизуетесь, вы увидите в правой верхней части то, что мы сидим под тем же AWS account ID,
но при этом уже сидим под пользователем user1.
Давайте перейдем на сервис S3, чтобы посмотреть, отработали ли выданные права для этого пользователя.
Как мы с вами видим, успешно отобразился список существующих бакетов на этом AWS аккаунте.
Если мы нажмем на единственный бакет, то у нас это также получится,
и мы провалимся внутри этого бакета для того, чтобы иметь возможность посмотреть, какие же объекты сохранены, загружены в этот бакет.
Так как не было загружено бакетов в рамках этой лаборатурной работы,
объекты в этот бакет, то мы ничего здесь не увидим.
Хорошо, давайте теперь попробуем сделать следующим образом.
Откроем сервис EC2, зная, что для user1 мы не выдавали доступа на сервис EC2.
Как только мы перейдем на сервис EC2, в левом навигационном меню нажмем на вкладку instances,
для того, чтобы отобразились все существующие инстанции в этом регионе и в этом AWS аккаунте.
Вы увидите сообщение, что you are not authorized to perform this operation,
что говорит нам о том, что у нас нет достаточных прав для того, чтобы отобразить список инстанцев.
Здесь я хотел бы отметить, что даже отображение списка ресурсов требует отдельный доступ.
Таким образом, мы максимально тонко и детально можем настраивать доступы внутри нашего облака AWS.
Хорошо, мы закончили с пользователем user1, необходимо в верхней правой части нажать на аккаунт ID
и в выпадающем меню нажать на кнопку sign out, для того, чтобы разлагиниться и посмотреть уже этот AWS аккаунт под другим пользователем.
Хорошо, давайте теперь авторизуемся в нашем AWS аккаунте под пользователем user2.
Для этого мы воспользуемся той же ссылкой, которую мы скопировали ранее.
Необходимо в username ввести user2, а также пароль со страницы с заданием лабороторной работы в AWS Academy.
Как только мы успешно авторизовались, обратите обязательно внимание в верхней правой части,
что вы авторизованы под пользователем user2. Если это верно, то мы переходим на сервис EC2.
Как мы с вами помним, для пользователя user2 мы выдавали права для работы в сервисе EC2 в режиме чтения.
Таким образом, у нас есть права отобразить список существующих инстенсов в рамках региона Норс-Вирджиния.
Для того, чтобы это проверить, перейдем на вкладку в левом навигационном меню, который называется Instances.
И он должен отобразиться список имеющихся инстенсов в этом регионе.
Если же вы не видите здесь список инстенсов, он пустой, то обязательно проверьте, что в верхней правой части как регион выбран Норс-Вирджиния.
Если же у вас выбран другой регион, то нажмите на название этого региона, отобразится список регионов,
и вам внутри необходимо выбрать регион Норс-Вирджиния или системное название US East One.
Как только вы это сделаете, вы отобразите список существующих инстенсов уже в регионе Норс-Вирджиния и должны увидеть следующие два инстенса.
Мы с вами помним, что для пользователей User2 вы выдавали только права в режиме чтения.
Давайте попробуем тем не менее остановить наш инстенс Lab Host.
Для этого мы из списка выбираем наш инстенс Lab Host.
Вверху справа необходимо нажать на кнопку Instance State и в выпадающем списке нажать на действие Stop Instance.
Нам выйдет сообщение с подтверждением о том, что действительно ли мы хотим остановить этот инстенс.
Указывается Instance ID, а в скобках имя этого инстенса.
Да, мы нажимаем на кнопку Stop для того, чтобы подтвердить отключение, остановку этого инстенса.
Как только вы это нажмете, вы увидите красное сообщение о том, что у этого пользователя нет прав для остановки инстенса с таким-то ID.
Хорошо, мы можем закрыть это уведомление.
Теперь перейдем на сервис S3.
Мы знаем, что мы для пользователя User2 не выдавали прав на сервис S3.
Таким образом, если мы перейдем в левом навигационном меню на вкладку Buckets, отобразится список бакетов, но этот список будет пустым.
Это говорит о том, что сработало Implicit Deny, то есть по умолчанию не явно мы запрещаем доступ на ресурсы AWS.
Хорошо, мы закончили с пользователем User2. Давайте в верхней правой части нажмем на Account ID и в выпадающий меню нажмем на кнопку Sign Out для того, чтобы разлагиниться.
Хорошо, осталось последнее задание. Это посмотреть, что же мы можем сделать внутри нашего AWS аккаунта под пользователем User3.
Как мы с вами помним, пользователь User3 отличается от других пользователей тем, что помимо read-only доступа мы этому пользователю выдали права на остановку и старт инстенсов EC2.
Давайте авторизуемся под этим пользователем.
Plugin User3 пароль вы можете найти на странице AWS Academy с заданием лабораторной работы. Как только мы успешно авторизовались, обязательно проверьте сверху справа, что мы сидим под пользователем User3.
Далее нам необходимо перейти на сервис EC2, поэтому мы начнем вводить EC2 в верхней строке поиска сервисов AWS.
Как только мы перешли на сервис EC2, давайте в левом навигационном меню нажмем на вкладку Instances.
Проверьте, что вы находитесь в регионе Норс-Верженья. Если это так, то вам должны отобразиться следующие два инстенса.
Давайте попробуем выбрать instance labhost и остановить этот instance. Для этого нажмем на кнопку instance state и в выпадающем списке действий нажмем stop instance.
Отобразится окно подтверждения, что действительно мы хотим остановить instance ID такой-то с названием labhost.
Да, мы хотим это сделать, поэтому нажимаем на кнопку stop.
На следующей странице вы увидите, что выходит зеленое сообщение о том, что мы успешно запустили, выполнили действия по остановке этого instance.
А также в списке инстенса вы увидите, что instance state, то есть состояние этого instance находится в stopping, то есть он в процессе остановки.
Если мы подождем еще некоторое время и нажмем на кнопку refresh, то есть обновить список инстенцев, мы увидим, что состояние инстенса поменялось на stop, то есть он полностью остановился.
Таким образом мы завершили это задание в рамках лаборторной работы. Мы можем закрыть это окно, которое было открыто в Inkognito режиме.
Далее у нас есть страница с условным root пользователем, когда мы только со страницей заданием лаборторной работы, нажав на кнопку AWS, перешли на страницу AWS Management Console.
Это именно та страница. Давайте успешно и правильно разлагиниться. Для этого необходимо в верхней правой части нажать на account ID и в выпадающем списке действий в самом внизу нажать на кнопку sign out для того, чтобы разлагиниться.
Вы увидите следующее сообщение. Значит все отлично, мы можем закрывать эту страницу.
Также не забываем правильно завершить лаборторную работу, чтобы у вас не было в будущем проблем с открытием следующих лаборторных работ.
Для этого нам необходимо на странице AWS Academy и конкретно на странице лаборторной работы в основном меню верхней правой части нажать на кнопку end lab.
Как только вы ее нажмете, выйдет всплывающее окно с подтверждением, что действительно ли мы хотим остановить лаборторную работу.
Да, мы хотим остановить, поэтому мы нажимаем на кнопку yes.
Как только мы нажмем на кнопку yes, отобразится другое всплывающее окно, в котором вы должны увидеть сообщение you may close this message box now.
Это говорит о том, что процесс удаления всех ресурсов и созданного специально для вашей сессии AWS аккаунта запустился.
И сейчас она будет работать в фоновом режиме, и вы можете безопасно закрыть это окно.
Также вы можете безопасно закрыть страницу AWS Academy и на этом закончить лаборторную работу.
Я вас поздравляю, мы закончили с вами вместе лаборторную работу, посвященную сервису AWS IAM.
На этом хотел бы с вами попрощаться и мы увидимся с вами на следующих наших активностях.

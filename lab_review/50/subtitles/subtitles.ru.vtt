WEBVTT

00:00:00.990 --> 00:00:07.650
Добрый день, уважаемые студенты! Рад вас видеть
на очередной сессии разбора лабораторной работы.

00:00:08.910 --> 00:00:16.290
Эта лабораторная работа посвящена более подробному
знакомству с сервисом AWS IAM. Давайте начнем.

00:00:18.780 --> 00:00:23.610
Для начала надо открыть основную
страницу лабораторной работы.

00:00:24.300 --> 00:00:29.810
Для этого необходимо воспользоваться
платформой AWS Academy,

00:00:29.834 --> 00:00:35.344
авторизоваться в этой платформе,
далее выбрать необходимый

00:00:35.368 --> 00:00:40.837
курс, открыть четвертый
модуль, и в активностях четвертого

00:00:40.861 --> 00:00:45.850
модуля будет ссылка Lab
1: Introduction to AWS IAM.

00:00:46.740 --> 00:00:49.806
Как только вы нажмете на эту
ссылку, вы перейдете на указанную

00:00:49.830 --> 00:00:53.250
страницу, которая является основной
страницей лабораторной работы.

00:00:53.970 --> 00:01:01.037
Здесь необходимо нажать на кнопку
в меню “Start Lab”, чтобы активировать

00:01:01.061 --> 00:01:07.530
песочницу, и создался специальный
AWS аккаунт для вашей сессии.

00:01:08.550 --> 00:01:14.229
После успешного старта
лабораторной работы, вам необходимо

00:01:14.253 --> 00:01:20.530
нажать на кнопку AWS, чтобы
перейти в AWS Management Console.

00:01:22.890 --> 00:01:29.310
Как только вы перейдете по ссылке, вы окажетесь
на основной странице AWS Management Console.

00:01:29.670 --> 00:01:35.253
Обратите внимание, вверху справа
вы авторизованы под сгенерированным

00:01:35.277 --> 00:01:42.030
пользователем, а также для вас был
специально создан уникальный AWS Account ID.

00:01:43.200 --> 00:01:51.460
Далее вам необходимо в верхней строке
поиска сервисов AWS начать писать IAM.

00:01:52.920 --> 00:01:58.020
В выдаче этот сервис будет первым в списке.
Давайте перейдем на него.

00:01:59.430 --> 00:02:06.528
Как только вы попадаете на основную страницу сервиса
AWS IAM, необходимо в левом навигационном меню

00:02:06.552 --> 00:02:13.650
нажать на вкладку “Users”, чтобы отобразился список
существующих пользователей в этом AWS аккаунте.

00:02:15.240 --> 00:02:24.150
В рамках лабораторной работы были предварительно
созданы три пользователя – User-1, User-2 и User-3.

00:02:25.050 --> 00:02:34.200
Откроем User-1, чтобы посмотреть
некоторые детали по этому пользователю.

00:02:37.020 --> 00:02:45.780
Если открыть вкладку Permissions, видно, что у
этого пользователя нет привязанных к нему Policy.

00:02:46.440 --> 00:02:54.510
Если нужно это сделать, вы можете воспользоваться
кнопкой Add Permissions. Следующая вкладка – Groups.

00:02:55.800 --> 00:02:59.610
В этой вкладке отображаются все группы,
к которым относится этот пользователь.

00:02:59.940 --> 00:03:04.770
Мы видим, что данный пользователь в
данный момент не относится ни к одной из групп.

00:03:05.460 --> 00:03:11.400
Следующая вкладка, которую я хотел
бы просмотреть – это Security Credentials.

00:03:11.610 --> 00:03:16.560
На этой странице вы можете найти
все Credentials этого пользователя.

00:03:18.630 --> 00:03:24.014
На этой вкладке необходимо
обратить внимание, что Console Password

00:03:24.038 --> 00:03:30.003
находится в режиме Enabled.
Это говорит о том, что у этого пользователя

00:03:30.027 --> 00:03:35.786
(IAM-User), есть возможность
авторизоваться в AWS Management Console.

00:03:35.810 --> 00:03:41.400
Мы подробно рассмотрели, какие
пользователи были для нас созданы.

00:03:41.970 --> 00:03:49.780
Также можно открыть подробную информацию о двух
других пользователях и убедиться, что она совпадает.

00:03:51.000 --> 00:03:55.849
Далее необходимо в левом
навигационном меню нажать на вкладку User

00:03:55.873 --> 00:04:01.170
Groups, чтобы открылся список
существующих групп в этом AWS аккаунте.

00:04:01.980 --> 00:04:07.414
В этом AWS аккаунте в рамках
лабораторной работы было

00:04:07.438 --> 00:04:13.500
создано три группы: EC2-Admin,
EC2-Support и S3-Support.

00:04:15.090 --> 00:04:20.160
Откроем группу EC2-Support,
чтобы посмотреть его детали.

00:04:20.970 --> 00:04:27.843
На открывшейся странице перейдем на
вкладку Permissions и мы видим, что у этой

00:04:27.867 --> 00:04:34.740
группы одна привязанная Policy, которая
называется AmazonEC2ReadOnlyAccess.

00:04:35.400 --> 00:04:42.163
Здесь я хотел бы обратить внимание,
что эта Policy по типу AWS Managed, т.е

00:04:42.187 --> 00:04:49.500
созданием, обновлением, а также
сопровождением этого Policy занимается сам AWS.

00:04:50.880 --> 00:04:58.590
Нажмем на иконку plus возле этого Policy,
чтобы посмотреть, на что нам дается доступ.

00:05:00.450 --> 00:05:09.588
Мы видим, что в основном выдается доступ на
actions, операции типа describe и list, т.е. у этого

00:05:09.612 --> 00:05:18.750
Policy нет возможности изменять ресурсы в рамках
AWS, можно только просматривать в режиме чтения.

00:05:19.470 --> 00:05:26.580
Если мы говорим о сервисах, то это EC2, Elastic
Load Balancing, CloudWatch, а также Autoscaling.

00:05:29.610 --> 00:05:36.313
Далее у нас идет следующая группа.
Нажмите в левом навигационном меню

00:05:36.337 --> 00:05:43.830
вкладку “User Groups” и в открывшемся
списке групп перейдите на S3-Support.

00:05:45.960 --> 00:05:51.967
Здесь открываем вкладку Permissions
и мы видим, что у этой группы есть

00:05:51.991 --> 00:05:59.220
привязанная Policy AmazonS3ReadOnlyAccess.
Она также является AWS Managed Policy.

00:05:59.850 --> 00:06:03.900
Если мы нажмем на кнопку plus,
то мы увидим тело этого Policy.

00:06:04.350 --> 00:06:15.400
Оно нам дает доступ на get, list операции в рамках
сервиса S3, т.е. этот Policy является read only.

00:06:16.650 --> 00:06:23.198
Сделав это еще раз, мы откроем список
существующих групп через вкладку User

00:06:23.222 --> 00:06:29.770
Groups в левом навигационном меню и
переходим к третьей группе EC2-Admin.

00:06:31.830 --> 00:06:42.030
В этой группе, открыв вкладку Permissions, мы видим,
что есть одна привязанная Policy – EC2-Admin-Policy.

00:06:42.570 --> 00:06:49.578
По типу можно видеть, что это
Customer Inline, это говорит о том, что

00:06:49.602 --> 00:06:56.610
эта Policy была создана индивидуально
в рамках этой конкретной группы.

00:06:57.810 --> 00:07:03.330
Нажав на кнопку plus, мы
увидим тело этого Policy.

00:07:05.070 --> 00:07:12.060
Мы видим, что выдается доступ на все операции,
actions, начинающиеся с describe для сервиса

00:07:12.084 --> 00:07:18.840
EC2, а также дополнительно выдается
доступ на actions start instance и stop instance.

00:07:21.600 --> 00:07:25.417
Таким образом, мы подробно
ознакомились с созданными

00:07:25.441 --> 00:07:30.160
специально для нас в рамках
лабораторной работы IAM группами.

00:07:30.570 --> 00:07:34.187
Теперь необходимо наших
IAM пользователей добавить в

00:07:34.211 --> 00:07:38.610
соответствующие группы согласно
заданию лабораторной работы.

00:07:39.120 --> 00:07:47.070
Для этого перейдем в левом навигационном меню
на вкладку “User Groups” и откроем группу S3-Support.

00:07:49.080 --> 00:07:55.500
На странице группы S3-Support переходим на
вкладку “Users” и нажимаем на кнопку “Add Users”.

00:07:56.850 --> 00:08:02.802
Откроется страница с существующими
пользователями на этом AWS аккаунте, затем

00:08:02.826 --> 00:08:08.700
выбираем для группы S3-Support
“User-1” и нажимаем на кнопку “Add Users”.

00:08:11.400 --> 00:08:17.010
Мы будем перенаправлены на
основную страницу группы S3-Support.

00:08:17.400 --> 00:08:20.255
В верхней части появится
уведомление зеленого цвета о

00:08:20.279 --> 00:08:23.520
том, что пользователи были
успешно добавлены в эту группу.

00:08:24.810 --> 00:08:32.381
Если посмотреть на вкладку “Users”, то
также увидим только что добавленного

00:08:32.405 --> 00:08:40.590
пользователя “User-1” в списке
пользователей, относящихся к группе S3-Support.

00:08:41.790 --> 00:08:48.011
Те же действия проделываем со следующими
группами, поэтому необходимо еще раз нажать

00:08:48.035 --> 00:08:54.180
в левом навигационном меню вкладку
“User Groups” и перейти в группу EC2-Support.

00:08:56.880 --> 00:09:00.741
Далее во вкладке “Users”
нажимаем на кнопку “Add Users”,

00:09:00.765 --> 00:09:05.400
выбираем следующего пользователя
“User-2”и нажимаем “Add Users”.

00:09:06.180 --> 00:09:10.271
После чего переходим на
страницу EC2-Support и видим

00:09:10.295 --> 00:09:15.190
аналогичное сообщение о том,
что пользователь был добавлен.

00:09:15.450 --> 00:09:23.298
Идем дальше. Остается третья группа.
В левом навигационном меню нажимаем

00:09:23.322 --> 00:09:31.170
на вкладку “User Groups”, чтобы
отобразился список существующих групп.

00:09:32.730 --> 00:09:41.830
Затем нажимаем третью группу EC2-Admin и здесь также
через вкладку Users нажимаем на кнопку “Add Users”.

00:09:42.938 --> 00:09:50.530
В списке пользователей мы выбираем третьего
пользователя User-3 и нажимаем на кнопку “Add Users”.

00:09:53.430 --> 00:09:59.903
Мы перейдем на основную страницу группы
EC2-Admin и увидим соответствующее сообщение об

00:09:59.927 --> 00:10:06.400
успешном выполнении этой операции, а во
вкладке Users увидим нашего пользователя User-3.

00:10:08.896 --> 00:10:12.293
Если мы нажмем еще раз на
вкладку User Groups в левом

00:10:12.317 --> 00:10:16.172
навигационном меню, откроется список
групп и в этом списке есть специальная

00:10:16.196 --> 00:10:23.276
колонка Users, которая отображает количество
пользователей в соответствующих IAM группах.

00:10:23.476 --> 00:10:27.616
Мы видим, что в каждой группе
сейчас по одному пользователю.

00:10:28.396 --> 00:10:35.536
Если вы проделали все те действия, которые проделали
мы, в конце у вас должна получиться такая картина.

00:10:37.486 --> 00:10:42.398
Мы завершили нашу задачу с привязкой
пользователей к группам. Перейдем к

00:10:42.422 --> 00:10:48.166
следующей части, а именно в левом
навигационном меню нажмем на вкладку Dashboard.

00:10:48.886 --> 00:10:54.451
На отобразившейся странице в
правой части вы увидите ссылку

00:10:54.475 --> 00:11:00.714
“Sign in URL for IAM users”, ее
надо скопировать и эту ссылку вы

00:11:00.738 --> 00:11:07.025
можете раздавать вашим
сотрудникам и они, используя эту ссылку,

00:11:07.049 --> 00:11:13.336
могут авторизоваться в вашем AWS
аккаунте под IAM пользователями.

00:11:13.546 --> 00:11:20.342
Авторизуемся под созданными
для нас пользователями в этом AWS

00:11:20.366 --> 00:11:27.956
аккаунте и посмотрим, на какие
сервисы у них есть или нет доступа.

00:11:29.446 --> 00:11:33.436
Рекомендую вам открыть эту
ссылку в Инкогнито режиме.

00:11:33.796 --> 00:11:41.505
Как только вы откроете эту страницу,
появится окно для введения аккаунта ID. Он уже

00:11:41.529 --> 00:11:50.086
будет введен, так как сидит в этой ссылке.
Достаточно ввести логин пользователя и пароль.

00:11:51.436 --> 00:11:55.204
Логин пользователя это user-1.
Пароль вы можете посмотреть

00:11:55.228 --> 00:11:58.996
на странице с заданием
лабораторной работы в AWS Academy.

00:12:00.076 --> 00:12:06.729
После авторизации в правой
верхней части можно увидеть, что мы

00:12:06.753 --> 00:12:13.406
сидим под тем же AWS account
ID, но под пользователем user-1.

00:12:13.996 --> 00:12:22.046
Давайте перейдем на сервис S3, чтобы посмотреть,
отработали ли выданные права для этого пользователя.

00:12:22.576 --> 00:12:28.996
Как мы видим, здесь успешно отобразился
список существующих бакетов на этом AWS аккаунте.

00:12:29.566 --> 00:12:37.084
Если мы нажмем на единственный бакет,
мы провалимся внутрь этого бакета и у нас

00:12:37.108 --> 00:12:44.626
будет возможность посмотреть, какие же
объекты сохранены, загружены в этот бакет.

00:12:45.256 --> 00:12:51.169
Так как в рамках этой лабораторной
работы не было загружено

00:12:51.193 --> 00:12:57.106
никаких объектов в этот бакет,
мы ничего здесь не увидим.

00:12:57.616 --> 00:13:09.826
Теперь выполним следующее: откроем сервис EC2, зная,
что для user-1 мы не выдавали доступ на сервис EC2.

00:13:11.176 --> 00:13:17.204
Как только мы перейдем на сервис EC2, в
левом навигационном меню нажмем на вкладку

00:13:17.228 --> 00:13:24.226
Instances, чтобы отобразились все существующие
инстансы в этом регионе и в этом AWS аккаунте.

00:13:25.396 --> 00:13:30.559
Вы увидите сообщение “You are not
authorized to perform this operation”. Это

00:13:30.583 --> 00:13:35.746
означает, что у нас нет достаточных
прав для отображения списка инстансов.

00:13:38.236 --> 00:13:45.334
Здесь надо отметить, что даже отображение
списка ресурсов требует отдельного доступа. Таким

00:13:45.358 --> 00:13:52.456
образом, можно максимально тонко и детально
настраивать доступы внутри нашего облака AWS.

00:13:53.896 --> 00:14:01.426
Мы закончили с пользователем
user-1, нажмите в верхней правой части

00:14:01.450 --> 00:14:08.979
на аккаунт ID и в выпадающем меню
нажмите на кнопку “Sign out”, чтобы

00:14:09.003 --> 00:14:16.643
разлогиниться и рассмотреть этот
AWS аккаунт под другим пользователем.

00:14:16.667 --> 00:14:24.086
Теперь авторизуемся в нашем AWS
аккаунте под пользователем user-2.

00:14:24.166 --> 00:14:28.216
Для этого воспользуемся той же
ссылкой, которую мы скопировали ранее.

00:14:29.296 --> 00:14:33.536
Необходимо в user name
ввести user-2, а также пароль со

00:14:33.560 --> 00:14:37.799
страницы с заданием
лабораторной работы в AWS Academy.

00:14:38.746 --> 00:14:43.009
После авторизации обязательно
обратите внимание в верхней

00:14:43.033 --> 00:14:47.296
правой части, что вы авторизованы
под пользователем user-2.

00:14:47.746 --> 00:14:51.136
Если все правильно, то мы
переходим на сервис EC2.

00:14:52.186 --> 00:15:00.439
Напомню, что для пользователя user-2 мы выдали
права для работы в сервисе EC2 в режиме чтения.

00:15:00.463 --> 00:15:08.716
Таким образом, у нас есть права отображать список
существующих инстансов в рамках North Virginia.

00:15:09.466 --> 00:15:17.206
Чтобы это проверить, перейдем на вкладку в левом
навигационном меню, который называется Instances.

00:15:17.896 --> 00:15:23.396
Он должен отобразить список
имеющихся инстансов в этом регионе.

00:15:23.656 --> 00:15:28.063
Если список инстансов ничего не
показывает, он пуст, то обязательно

00:15:28.087 --> 00:15:32.896
проверьте, что в верхней правой
части как регион выбран North Virginia.

00:15:36.136 --> 00:15:42.763
Если у вас выбран другой регион, нажмите
на его название, отобразится список регионов,

00:15:42.787 --> 00:15:49.336
и внутри необходимо выбрать регион North
Virginia или системное название us-east-1.

00:15:49.846 --> 00:15:55.013
Как только вы это сделаете, вы
отобразите список существующих инстансов

00:15:55.037 --> 00:15:59.686
уже в регионе North Virginia и
увидите следующие два инстанса.

00:16:01.036 --> 00:16:06.946
Мы помним, что для пользователя User-2
выдано право только в режиме чтения.

00:16:08.236 --> 00:16:12.826
Тем не менее, давайте попробуем
остановить наш инстанс LabHost.

00:16:13.036 --> 00:16:18.811
Выбираем из списка наш инстанс
LabHost, вверху справа необходимо нажать на

00:16:18.835 --> 00:16:25.006
кнопку Instance State и в выпадающем
списке нажать на действие Stop Instance.

00:16:26.181 --> 00:16:31.996
Появится сообщение с запросом подтверждения,
действительно ли мы хотим остановить этот инстанс.

00:16:32.896 --> 00:16:38.409
Указывается Instance ID, в скобках
имя этого инстанса, нажимаем на

00:16:38.433 --> 00:16:43.946
кнопку Stop для подтверждения
отключения\остановки этого инстанса.

00:16:44.536 --> 00:16:51.104
Как только вы это нажмете, появится
сообщение красного цвета о том, что у этого

00:16:51.128 --> 00:16:58.286
пользователя нет прав для остановки
инстанса с таким-то ID. Закроем это уведомление.

00:16:58.696 --> 00:17:10.006
Теперь перейдем на сервис S3. Мы знаем, что для
пользователя User-2 не давалось прав на сервис S3.

00:17:10.576 --> 00:17:15.527
Таким образом, если мы перейдем в
левом навигационном меню на вкладку

00:17:15.551 --> 00:17:20.356
Buckets, отобразится список
бакетов, но этот список будет пустым.

00:17:21.346 --> 00:17:30.274
Это говорит о том, что сработал Implicit Deny, 
т.е. по умолчанию, не явно, мы

00:17:30.298 --> 00:17:39.226
запрещаем доступ на ресурсы AWS.
На этом мы заканчиваем с пользователем User-2.

00:17:39.556 --> 00:17:44.553
В верхней правой части выбираем
Account ID и в выпадающем

00:17:44.577 --> 00:17:49.396
меню нажмем на кнопку
Sign Out, чтобы разлогиниться.

00:17:52.156 --> 00:17:56.126
Остается последнее задание
— посмотреть, что мы можем

00:17:56.150 --> 00:18:00.886
сделать внутри нашего AWS
аккаунта под пользователем User-3.

00:18:01.306 --> 00:18:08.974
Как мы помним, пользователь User-3 отличается 
от других пользователей тем, что помимо

00:18:08.998 --> 00:18:16.666
read only доступа этому пользователю
выданы права на остановку и старт инстанса EC2.

00:18:17.776 --> 00:18:23.314
Авторизуемся под этим пользователем.
Логин User-3, пароль вы можете

00:18:23.338 --> 00:18:28.876
найти на странице AWS Academy с
заданием для лабораторной работы.

00:18:29.716 --> 00:18:35.806
После успешной авторизации обязательно проверьте
сверху справа, что мы сидим под пользователем User-3.

00:18:37.096 --> 00:18:45.226
Далее нам необходимо перейти на сервис EC2, поэтому
вводим EC2 в верхней строке поиска сервисов AWS.

00:18:47.116 --> 00:18:54.076
Как только мы перешли на сервис EC2, в левом
навигационном меню нажмем на вкладку Instances.

00:18:55.906 --> 00:19:00.862
Убедитесь, что вы находитесь в
регионе North Virginia. Если это так,

00:19:00.886 --> 00:19:05.768
вам должны отобразиться следующие 
два инстанса. Попробуем выбрать

00:19:05.792 --> 00:19:11.082
инстанс LabHost и остановить этот инстанс.
Для этого нажимаем на кнопку

00:19:11.106 --> 00:19:16.396
Instance state и в выпадающем
списке действий выбираем Stop instance.

00:19:17.626 --> 00:19:21.509
Отобразится окно подтверждения,
что действительно мы

00:19:21.533 --> 00:19:26.026
хотим остановить instance ID
такой-то с названием LabHost.

00:19:26.356 --> 00:19:29.506
Да, мы хотим это сделать и
нажимаем на кнопку Stop.

00:19:30.676 --> 00:19:36.166
На следующей странице вы видите, что
выходит сообщение зеленого цвета о том,

00:19:36.190 --> 00:19:41.606
что мы успешно запустили, выполнили
действия по остановке этого инстанса.

00:19:42.046 --> 00:19:48.759
В списке инстансов видно, что 
instance state, т.е. состояние этого

00:19:48.783 --> 00:19:55.496
инстанса, находится в режиме “stopping”, 
т.е. в процессе остановки.

00:19:56.146 --> 00:20:01.780
Подождав некоторое время и нажав кнопку 
refresh, т.е. обновить список инстансов,

00:20:01.804 --> 00:20:07.366
мы увидим, что его статус поменялся на stopped, 
т.е. он полностью остановлен.

00:20:08.656 --> 00:20:14.632
Таким образом, мы завершили это
задание в рамках лабораторной работы.

00:20:14.656 --> 00:20:20.368
Можем закрыть это окно, которое
было открыто в Инкогнито режиме.

00:20:22.078 --> 00:20:31.846
Далее есть страница с условным root пользователем,
когда мы со страницы с заданием по лабораторной

00:20:31.870 --> 00:20:41.068
работе, нажав на кнопку AWS, перешли на страницу
AWS Management Console. Это именно та страница.

00:20:41.428 --> 00:20:46.535
Давайте успешно и правильно разлогинимся.
Для этого необходимо в верхней

00:20:46.559 --> 00:20:51.378
правой части нажать на account ID
и в выпадающем списке действий в

00:20:51.402 --> 00:20:56.618
самом внизу нажать на кнопку “sign
out”, чтобы разлогиниться. Вы увидите

00:20:56.642 --> 00:21:01.858
следующее сообщение. Значит все отлично,
 мы можем закрыть эту страницу.

00:21:04.018 --> 00:21:08.594
Также не забываем правильно
завершить лабораторную работу, чтобы

00:21:08.618 --> 00:21:13.558
не было в будущем проблем с
открытием следующих лабораторных работ.

00:21:14.338 --> 00:21:20.373
Для этого необходимо на странице AWS
Academy и конкретно на странице лабораторной

00:21:20.397 --> 00:21:25.828
работы в основном меню верхней
правой части нажать на кнопку “End lab”.

00:21:26.608 --> 00:21:32.642
При этом выйдет всплывающее окно с подтверждением, 
действительно ли мы хотим остановить

00:21:32.666 --> 00:21:38.278
лабораторную работу. Да, мы хотим
остановить, поэтому нажимаем на кнопку “Yes”.

00:21:39.448 --> 00:21:43.985
После этого отображается
другое всплывающее окно, в нем

00:21:44.009 --> 00:21:48.546
будет сообщение “You may close 
this message box now”. Это

00:21:48.570 --> 00:21:53.426
говорит о том, что процесс
удаления всех ресурсов и созданного

00:21:53.450 --> 00:21:57.668
специально для вашей сессии
AWS аккаунта запустился.

00:21:57.868 --> 00:22:07.258
Теперь она будет работать в фоновом
режиме, и вы можете безопасно закрыть это окно.

00:22:07.618 --> 00:22:16.018
Также вы можете безопасно закрыть страницу AWS
Academy и на этом закончить лабораторную работу.

00:22:16.858 --> 00:22:23.788
Поздравляю вас, мы вместе с вами закончили
лабораторную работу, посвященную сервису AWS IAM.

00:22:25.018 --> 00:22:31.708
На этом с вами прощаюсь, до встречи
на следующих наших активностях!

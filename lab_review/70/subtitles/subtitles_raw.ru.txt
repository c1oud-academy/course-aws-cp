 Добрый день, уважаемые студенты! Я рад вас всех видеть на очередной сессии разбора лабораторной работы. Тема лабораторной работы – введение в сервис Амазон Иссито. Итак, давайте начнем. Мы начинаем нашу сессию с главной страницы лабораторной работы. Вам необходимо убедиться, что вы находитесь в правильной странице внутри AWS Академии, а также необходимо предварительно запустить лабораторную работу путем нажатия на кнопку Start Lab. Как только все будет готово, мы можем нажимать на кнопку AWS для того, чтобы перейти на главную страницу AWS Management Console. Как только мы перейдем на AWS Management Console, мы увидим вверху справа, что для нас был создан специальный временный аккаунт, и мы сидим здесь под специальным пользователем Test Student. В самом первом задании нам необходимо создать новый ИСИТУ инстанс. Для этого нам необходимо перейти на сервис ИСИТУ. Как мы с вами помним, нам достаточно в строке поиска сервисов AWS начать вводить часть сервиса, и в нашем случае это ИСИТУ. Вы увидите в выдаче, что первая ссылка – это та ссылка, которая нам нужна. Давайте на нее нажмем. Нажмем для того, чтобы перейти на основную страницу сервиса Amazon ИСИТУ. Вам необходимо убедиться, что вверху справа вы находитесь в регионе Норс-Верженье. Далее вам необходимо также убедиться в левом навигационном меню сверху, что включена опция New ISE Experience, и уже на основной странице чуть ниже необходимо нажать на кнопку Launch Instance. Мы попадаем в помощник создания нового ИСИТУ инстенса. Давайте как название ИСИТУ инстенса введем веб-сервер. Нам необходимо будет прокрутить чуть ниже и остановиться на секции Application and OS Images либо Amazon Machine Images. То есть мы выбираем образ нашего инстенса. Здесь нам необходимо оставить все значения по умолчанию, то есть Amazon Linux, а также внутри Amazon Linux именно AMI, который называется Amazon Linux Tool AMI, в скобках HVM. Мы двигаемся дальше. Чуть ниже есть секция, где мы указываем тип нашего инстенса. Давайте здесь также оставим по умолчанию и будет у нас значение t2.micro. В этом типе инстенса для нас доступно одно ядро процессора и один гигабайт оперативной памяти. Если мы посмотрим чуть ниже, у нас есть секция для выбора SSH ключей. Для нас в рамках нашей лабораторной работы был создан SSH ключ, который называется VOK. Приватный ключ вы можете скачать на основной странице лабораторной работы. Здесь же мы указываем, что как SSH ключ, паблик ключ, мы используем VOK. Этот ключ, публичный ключ Amazon передаст EC2 инстанцу и в момент, когда мы с приватным SSH ключом будем подключаться к этому инстанцу, он будет сверяться с публичным ключом. Как только произойдет совпадение, мы сможем авторизоваться в нашем инстенсе. Двигаемся чуть ниже, вы увидите большую секцию по настройке сетей. Здесь нам необходимо в правой части секции нажать на кнопку Edit для того, чтобы поля стали доступными. Как только вы это сделаете, нам сразу необходимо поменять VPC. Как VPC мы выбираем не дефолтовый, а специально созданный VPC для нас, LabVPC. Далее нам необходимо чуть ниже, под секции Firewall Security Groups, выбрать опцию Create Security Group, то есть мы создаем новую Security Group. Как группу вписываем Web Server Security Group. Далее как description прописываем Security Group for my web server. Хорошо, если мы прокрутим чуть ниже, мы для этой Security можем настроить inbound рулы. Как мы видим уже есть дефолтовый рул, это доступ по 22 порту через интернет. То есть мы через интернет можем таким образом подключаться к нашему инстанцу. Давайте нажмем на кнопку Remove для того, чтобы удалить этот рул. Таким образом у нас не будет ни одного inbound рула. Security группы мы будем с вами редактировать чуть позже. Двигаемся дальше. Следующая секция это настройка хранилища, то есть жестких дисков. Нам рекомендуется создать один жесткий диск как root volume, на котором будет установлена операционная система. Всего предлагается сделать размер 8 ГБ и тип EBS volume, выбрать GP2. Пока не обращайте внимание, почему такой тип мы выбрали, более подробно мы разберем с вами тип EBS volume на следующих наших лекциях. Далее нам необходимо прокрутить чуть ниже до самого конца и раскрыть секцию Advanced details. В этой секции нам необходимо будет внести некоторые правки. Давайте прокрутим чуть ниже и найдем поле, которое называется termination protection. Нам необходимо установить значение enable, то есть мы termination protection включаем для этого инстенса. Далее если мы прокрутим еще ниже до самого конца, мы увидим, что есть поле user data. Что такое user data мы с вами проговаривали несколько раз. Сейчас нам необходимо команды, которые даны на странице лабораторной работы скопировать и вставить в это поле. После чего нам необходимо нажать на кнопку launch instance, чтобы запустить процесс создания нашего инстенса. Как только вы нажмете на эту кнопку, вы увидите зеленое уведомление, которое говорит о том, что процесс успешно инициирован вашему инстанцу присвоен следующий ID. Внизу вы увидите кнопку view all instances, давайте на нее нажмем, чтобы перейти на страницу со всеми инстанциями. Как только мы нажали на кнопку view all instances, нас перенаправит на страницу со списком всех инстанций в этом регионе, в этом AWS аккаунте. Вы видите, что появился новый инстанс, который называется веб сервер. Также видите, что через какое-то время instant state становится running, но при этом еще какое-то время нам необходимо подождать, чтобы в колонке status check значение initializing поменялось и стало два из двух checks passed. Для того, чтобы обновлять страницу, вы можете не только нажимать F5, вы можете обновить частично, а именно список инстансов путем нажатия на иконку обновить верхней части страницы. Как только мы дождались, что все проверки пройдены, вы увидите соответствующий текст, теперь нам необходимо выбрать этот инстанс и вы увидите, что в нижней части отобразится вся необходимая информация касательно этого инстанца в нескольких различных вкладках. Первая вкладка details, здесь самая основная информация, в том числе вы можете найти публичный IP адрес нашего инстанца. Также у вас может возникнуть вопрос, что за две проверки, которые отображаются в списке в колонке status check. Это две проверки, которые самые основные, это system status check и instance status check. Таким образом, происходит проверка, что у нас инстанс был успешно поднят и он доступен для подключения нами по сети. Хорошо, как только эти проверки пройдены, это говорит о том, что сервер готов. Теперь давайте посмотрим, какими инструментами и фичерами мы можем воспользоваться, чтобы проверять в каком состоянии находится наш инстанс. Давайте перейдем на вкладку monitoring. Здесь вы видите различные графики. Сейчас графики не нарисованы, так как сервер был относительно недавно запущен, но тем не менее, давайте выберем самый первый график, это нагрузка процессора, нажмем на три кнопки и нажмем на кнопку enlarge для того, чтобы увеличить этот график. Он отобразится в всплывающее окно, где вы увидите, что мы лучше можем посмотреть все метрики. Каждая метрика отображается как точка. Далее, если у нас несколько метрик всего, они соединяются между собой линиями и мы увидим график. На текущий момент мы видим, что у нас одна единственная метрика, которая говорит о том, что нагрузка на процессор было 14,5%. Также на этой странице вы видите, что мы можем настраивать различные периоды, то есть от одного часа до целого года. Также мы можем группировать наши метрики по пяти минутам и выше. Более того, во время группировки мы можем применить некую операцию. Это может быть среднее значение, максимальное, минимальное, и так далее. Хорошо, давайте закроем эту страницу и посмотрим, еще у нас есть варианты пути проверки состояния нашего инстанца внутри AWS Management консоли. Что нам необходимо сделать? Это из списка инстанцев выбрать наш веб-сервер. Далее, вверху справа нажать на выпадающий список actions. Далее выбрать опцию Monitor and Troubleshoot и в выпадающем списке выбрать опцию Get System Lock. Сейчас перенаправить на страницу с логами всех команд, которые были запущены на этом инстанце. Это та информация, которая для вас доступна для любого инстанца. В случае, если у вас некие проблемы с этим инстанцем, либо по тем или иным причинам вы не можете подключиться к этому инстанцу, вы можете всегда открыть эту страницу и посмотреть, как отработали команды, запущенные на этом инстанце. Вы можете также в режиме реального времени видеть какие логи, все новые логи, которые появляются здесь путем нажатия на иконку обновления. Также вы можете скопировать эти логи, либо загрузить в виде файла. Хорошо, давайте нажмем на кнопку Cancel и посмотрим еще одну опцию, которая для нас доступна. Для этого также нам необходимо выбрать наш веб-сервер в выпадающем меню Actions, выбрать опцию Monitor and Troubleshoot и выбрать вторую опцию, которая называется Get Instance Screenshot. Как только вы ее нажмете, в консоли EC2-инстанца в командной строке сделается ее скриншот и отправится отобразиться вам здесь. Вы увидите этот скриншот и, опять же, если у вас проблемы с подключением к вашему инстанцу, таким образом вы можете увидеть текущее состояние консоли и предпринять какие-либо меры. Даже если эта информация не даст вам однозначного ответа, то в целом это также является положительной информацией, которая поможет найти проблемное место. Хорошо, давайте закроем это окно, нажмем на кнопку Cancel и посмотрим, что же у нас еще есть, что еще мы можем сделать в рамках сервиса Amazon EC2. Мы с вами помним, что мы запускали веб-сервер на нашем EC2-инстанце, также мы создавали простеющую веб-страницу, которая должна быть для нас доступна. Для этого давайте в левом навигационном меню откроем вкладку Instances и в списке инстанцев выберем наш инстанс, он называется веб-сервер. Внизу в отобразившихся вкладках выберем вкладку Details и вы сразу увидите, что вам отобразится public IPv4-адрес нашего веб-сервера. Давайте ее скопируем и откроем на отдельной странице. Вы увидите, что мы не можем подключиться к этому инстанцу, почему это происходит, мы разобрали в сессии разбора лабораторной работы. Хорошо, проблема была в том, что мы убрали все inbound-рулы в Security Group, а эта Security Group была привязана к нашему инстанцу. Таким образом, к этому инстанцу никак извне подключиться нельзя. Давайте теперь модифицируем нашу Security Group для того, чтобы мы могли с интернета обращаться к нашему веб-серверу. Для этого нам необходимо в левом навигационном меню выбрать вкладку Security Groups. Отобразится список Security Group, которые созданы в этом AWS-аккаунте. Нам необходимо выбрать Security Group, которая называется веб-сервер Security Group. Как только вы ее выберете, в нижней части экрана отобразится несколько вкладок. Нам необходимо перейти на вкладку Inbound Rules. Вы увидите, что на текущий момент у нас нет inbound-рулов. Это нормально и это ожидаемо. Теперь нам необходимо создать рулы. Для этого необходимо нажать в правой части на кнопку Edit inbound rules. Как только вы на нее нажмете, вас направят на страницу редактирования существующих inbound-рулов. Так как у нас нет влов, нам необходимо нажать на кнопку Add Rule и появится новая строчка. В этой строчке как Type выбираем HTTP, автоматически заполнится столбцы Protocol и Port Range с соответствующими значениями. Это Protocol TCP и Port 80. Как Source нам необходимо выбрать Anywhere IPv4 и вы увидите, что с правой стороны в соседнем столбце вставится CIDR-блок со всеми нулями. Это как раз таки CIDR-блок всего нашего интернета. Хорошо, мы закончили настройку inbound-рулов. Нам необходимо в нижней части страницы нажать на кнопку Save Rules. Как только мы на нее нажмем, все изменения сразу же вступят в силу. Хорошо, мы увидим с вами на следующей странице соответствующее сообщение, зеленое уведомление о том, что Security группа была успешно обновлена. Если мы еще раз откроем, либо обновим эту страницу, если вы его не закрывали, то мы увидим сообщение Hello from your web-сервер. Отлично, я вас поздравляю. Мы настроили правильно Security группу, так чтобы мы могли из интернета добираться до нашего веб-сервера и получать от него ответ. Теперь представим ситуацию, когда вы работаете облачным инженером и вас попросили увеличить либо уменьшить размер виситого инстенса. Также необходимо увеличить размер жестких дисков для того, чтобы оставить больше места для данных. В AWS это очень легко делается, буквально пару кликов внутри AWS Management консоли. Давайте попробуем это сделать. Нам необходимо в левом навигационном меню нажать на вкладку Instances. Нам отобразится список всех существующих инстенсов, нам необходимо выбрать наш инстенс, который называется веб-сервер. Как только мы ее выберем, нам необходимо вверху справа нажать на выпадающий список Instance type и остановить этот инстенс. Почему мы его останавливаем? Тип инстенса и размер жестких дисков могут быть изменены только тогда, когда инстенс остановлен. В отображающемся окошке нам необходимо подтвердить, что мы останавливаем наш инстенс и нажимаем на кнопку Stop. Вы увидите, что процесс остановки запустился и Instance state отображается как stopping, то есть в процессе остановки. Через некоторое время, если мы обновим список инстенсов, мы увидим, что состояние поменялось со stopping на stopped, то есть окончательно остановилось. Теперь мы можем переходить к изменению типа инстенса. Для этого нам необходимо выбрать наш инстенс. Далее в выпадающем меню Actions выбрать Instance settings. Здесь также отобразится несколько опций и необходимо выбрать Change instance type. Как только вы на нее нажмете, вы будете перенаправлены на другую страницу. Здесь вы видите текущее значение типа инстенса, а также вы можете ввести новое значение. Давайте выберем t2small. Это следующий размер инстенса, который в два раза больше, то есть у нас два раза больше количество ядер, также в два раза больше оперативной памяти. Хорошо, мы закончили все необходимые настройки на этой странице. Давайте нажмем внизу страницы на кнопку Apply. Отлично. Теперь нам необходимо изменить размер жестких дисков. Для этого нам необходимо опять же выбрать наш веб-сервер и перейти на вкладку Storage. Если мы прокрутим чуть ниже, мы увидим единственный жесткий диск, основной жесткий диск, на котором установлена операционная система. Если мы нажмем на ссылку, то есть ID-шник жесткого диска, мы перейдем на соответствующую страницу со всеми жесткими дисками, при этом нужный жесткий диск уже будет отфильтрован. Давайте мы ее выберем, вверху справа выберем Actions и нажмем на опцию Modify volume. Нас также перенаправят на новую страницу, и здесь нам необходимо увеличить размер с 8 до 10 ГБ. Отлично. Давайте нажмем на кнопку Modify и в всплывающем окне также подтвердим, что мы изменяем размер жесткого диска. Отлично, мы проделали все необходимые изменения, теперь мы можем включать наш веб-сервер. Для этого в левом навигационном меню необходимо выбрать вкладку Instances и отобразиться список всех существующих инстенсов. Нам необходимо выбрать наш AC2Instance с name web-сервер и далее в выпадающем меню Instanced state выбрать опцию Start instance. Сейчас я рекомендую вам остановить видео и самостоятельно убедиться, что наши изменения типа инстанца, а также размера жесткого диска вступили в силу и сервер при этом также доступен. Наша веб-страница также работает. Отлично, я думаю у вас не возникло проблем с проверкой. Мы двигаемся дальше. Следующее задание это проверить какие лимиты есть у нас в рамках сервиса Amazon и Cetu. Для этого в левом навигационном меню нам необходимо выбрать вкладку Limits. Как только вы перейдете на эту страницу вы увидите много красных уведомлений с ошибкой. Не обращайте на них внимания, вы можете эти сообщения сейчас закрыть. Когда вы будете работать в своем личном AWS аккаунте либо корпоративном и будете сидеть под пользователем, root пользователем, то подобные сообщения отображаться не будут. Хорошо, мы закроем все эти ошибки и попробуем отфильтровать наши лимиты и отобразим Running Instances. Вы увидите какое количество инстенсов доступно для нас в рамках определенных семейств типов инстенсов. Если мы посмотрим на значение Running On Demand All Standard, куда в том числе входит семейство T, мы увидим, что для нас доступно 32 ядра процессора для запуска в этом регионе. Мы добрались до последнего задания в рамках нашей лабораторной работы, а именно проверить, как работает Termination Protection Instance EC2. Для этого необходимо в левое навигационное меню перейти на вкладку Instances. В списке инстенсов необходимо выбрать наш, который называется Web Server. Как только мы ее выберем, нам необходимо нажать на попадающий список Instance State и попробовать нажать на опцию Terminate Instance. В зависимости от версии вашей консоли либо у вас будет доступна эта кнопка, по нажатию которой вы увидите ошибку, либо в моей версии, например, вы увидите, что кнопка недоступна и когда вы наводите мышкой на опцию Terminate Instance, выходит всплывающая подсказка, которая говорит о том, что Terminated Protection у нас включен. Отлично, давайте попробуем этот Termination Protection отключить. Для этого нам необходимо также в выбранном состоянии EC2 Instance нажать на Actions, далее выбрать опцию Instance Settings и внутри уже выбрать еще одну опцию Change Termination Protection. Отобразится всплывающее окно, здесь вы увидите, что Termination Protection enabled и поставлена галочка. Нам необходимо эту галочку убрать и сохранить эти изменения. Как только мы нажмем на кнопку Save, мы увидим, что для инстансов с таким-то ID-шником Termination Protection был отключен. Зеленые уведомления. Отлично, теперь мы можем попробовать этот инстанс отключить. Для этого мы также выбираем этот инстанс, далее нажимаем на выпадающий список Instance State и мы видим, что Termination Instance опция уже для нас доступна. Давайте на нее нажмем, подтвердительно ответим на всплывающее окно и нажмем на кнопку Terminate. Как только мы ее нажмем, мы увидим соответствующее сообщение, что инстанс с таким-то ID-шником был отключен, но при этом он не отключен, а запущен процесс его отключения. Поэтому в столбце Instance State мы видим значение Shutting Down, то есть в процессе отключения. Давайте подождем какое-то время и обновим список инстансов. Вы увидите, что наш инстанс Web Server, у него теперь Instance State Terminated, то есть он отключен. Если мы подождем еще немного и после этого обновим, то мы с вами увидим, что этот инстанс и вовсе пропадет из общего списка. Отлично, мы закончили нашу лабораторную работу, я вас поздравляю. Давайте теперь правильно отключим и выйдем из всех систем. Для этого нам необходимо WS Management консоли, вверху справа нажать на выпадающий список и в самом низу нажать на кнопку Sign Out. Это мы делаем для того, чтобы разлагиниться с AWS Management консоли. Далее, нам необходимо правильно отключить систему внутри AWS Academy. Для этого на основной странице лабораторной работы нам необходимо нажать на кнопку End Lab. Как только вы ее нажмете, выйдет сообщение, что действительно ли вы хотите остановить лабораторную работу. Так как мы все закончили, мы говорим Yes. Отобразится всплывающее окно и вы увидите сообщение You may close this message box now, lab resources are terminating. Это говорит о том, что мы инициировали процесс удаления созданного для нас AWS аккаунта и сейчас мы можем закрывать это окно, также можем выходить с AWS Academy. Отлично, на этом мы с вами заканчиваем разбор лабораторной работы. Я думаю, вы научились чему-то новому, получили ответы на ваши вопросы и мы с вами подробнее познакомились с сервисом Amazon EC2. Спасибо. Далее мы с вами увидимся на следующих наших активностях.

Қайырлы күн, құрметті студенттер! Сіздердің барлығыңызды келесі зертханалық жұмысқа шолу сессиясында көргеніме қуаныштымын. Бұл зертханалық жұмыста біз Amazon RDS сервисімен толығырақ танысып, жұмыс жасаймыз. Сонымен, бастайық.
Біз AWS Academy-де зертханалық жұмыстың негізгі парақшасында тұрмыз. Қазір уақытша AWS аккаунт құруды бастадық. Енді AWS Management Console-ге өту үшін жоғарғы оң жақтағы AWS батырмасын басуымыз керек. AWS Management Console-ге көшкеннен кейін біз бірінші тапсырмадан бастаймыз – бұл біздің дерекқорымыз үшін Security Group құру. Неліктен біз оны жасаймыз? Біз Web Security Group ішіндегі барлық инстанстар үшін осы дерекқорға қол жеткізуді қамтамасыз етуіміз керек. Мұны істеу үшін сервистерді іздеу жолағына VPC деп теруді бастау керек. Іздеу нәтижелерінде бізге қажетті сілтемені көреміз. Ол сілтемеге өтейік, сол жақ навигациялық мәзіріндегі Security groups пунктін табу керек. Оны басқаннан кейін, AWS аккаунтымыздағы барлық қолданыстағы Security Groups, соның ішінде Web Security Group көресіз. Біз парақшаның жоғарғы оң жағындағы Create security group батырмасын басуымыз керек. Оны басқаннан кейін сіз кейбір кіріс деректерін енгізу үшін арнайы парақшаға өтесіз. Security group name ретінде DB Security Group көрсетейік, Description ретінде – Permit access from Web Security Group, VPC ретінде Lab VPC көрсетуіміз керек. Ашылмалы мәзір болады және осы тізімнен бізге қажет пунктті таңдауымыз керек. Егер біз аздап төмен айналдырсақ, Inbound және Outbound rules реттей алатынымызды көреміз. Inbound rules бөліміндегі Add rule батырмасын басайық. Әрі қарай, Type ретінде MySQL/Aurora, Source ретінде Custom көрсетеміз және өріске sg, яғни Security Group деп енгізе бастаймыз. Тізімде барлық қолданыстағы Security Groups көрсетілетінін көресіз. Web Security Group таңдайық. MySQL/Aurora түрін таңдағаннан кейін, Protocol және Port range өрістері автоматты түрде толтырылғанын көре аласыз. Бұл TCP және 3306 порты, MySQL деректер базасының стандартты порты. Керемет, біз осында барлық қажетті параметрлерді енгіздік. Ең төменгі жағына жылжытып, Create security group батырмасын басу керек.
Біз келесі тапсырмаға көшеміз. Бұл дерекқор инстансын жасаудан бұрын жасалуы керек келесі ресурс, атап айтқанда Subnet Group. Мұны істеу үшін сервистерді іздеу жолағында RDS деп енгізуді бастау керек. Сіз Amazon RDS сервисіне сілтемені көресіз. Осы сервиске өту үшін оны басайық. Сол жақ навигациялық мәзірінде Subnet groups пункті бар. Оны басу керек. Сіз бұл аккаунтта Subnet Group құрылмағанын көре аласыз. Біз қазір жаңасын құрамыз. Ол үшін парақшаның жоғарғы оң жағындағы Create DB subnet group батырмасын басу керек. Сіз оны басқаннан кейін, сізді қажетті кіріс деректерін енгізу үшін келесі парақшаға жібереді. Name ретінде DB-Subnet-Group дефис арқылы көрсету керек. Әрі қарай, Description ретінде DB Subnet Group, VPC ретінде ашылмалы тізімнен Lab VPC таңдау керек. Әрі қарай, аздап төмен жылжып, біздің Subnets туралы ақпаратты көрсету керек. Ең алдымен, Availability zone ретінде біз us-east-1a және us-east-1b таңдайық. Әрі қарай, Subnets-те ашылмалы мәзірден келесі Subnets таңдау керек, бұл – 10.0.1.0/24 және екіншісі – 10.0.3.0/24. Мұны жасағаннан кейін парақшаның ең төменгі жағындағы Create батырмасын басуыңыз керек. Осылайша, біз Subnet Group құрдық. Сіз тиісті хабарламаны көресіз. Енді сол жақ навигациялық мәзірде Databases пунктін басып, ашылған парақшада Create database батырмасын басу керек. Бізді бөлек парақшаға бағыттайды. Ол біршама көлемді. Мұнда бізге қажет барлық деректерді енгізу қажет. Біріншіден, Creation method ретінде Standard create таңдаймыз. Engine options ретінде MySQL таңдау керек. Төменде біз DB instance identifier ретінде – lab-db, Master username - main болады, Master password – сіздің зертханалық жұмысыңызда ұсынылған құпия сөз болады. Оны келесі өріске көшіру керек. Әрі қарай, Instance type ретінде ең алдымен class таңдау керек – бұл Burstable classes, яғни t classes. Содан кейін ашылмалы тізімде db.t3.micro түрін таңдау керек. Бұл типте бізде екі виртуалды процессор және 1 гигабайт жедел жады бар, бұл біздің зертханалық жұмысымыздың аясында жеткілікті болады. Келесі бөлім – біздің сақтау орны туралы ақпарат, яғни біз General Purpose SSD түрін және 20 гигабайт бөлінген жадты таңдаймыз. Бұл да зертханалық жұмыс аясында жеткілікті, сондықтан біз оны енгізіп, әрі қарай жалғастырамыз. Connectivity бөлімінде желілер туралы ақпаратты енгізу керек. Ең негізгісі – бұл VPC, біздің жағдайда – Lab VPC. Әрі қарай, жаңадан құрылған Subnet Group таңдау керек – бұл дефис арқылы жазылған db-subnet-group. Әрі қарай жүрейік. VPC security group ретінде Choose existing опциясын таңдап, ашылмалы мәзірден DB Security Group таңдау керек. Кішкене төмен жылжытып, Monitoring секциясындағы Enable Enhanced monitoring бөлімінде құсбелгіні алып тастау керек. Келесі Initial database name бөлімінде lab деп енгіземіз. Төмен жылжытамыз, Enable automated backups және Enable encryption-де құсбелгілерді алып тастау керек. Біз бұл құсбелгілерді алып тастаймыз, өйткені мұның бәрі зертханалық жұмыстың аясында қажет емес. Осылайша, біз дерекқор инстансын құру процесін тездетеміз. Production ортада дерекқормен жұмыс істегенде, барлық осы құсбелгілерді қосу ықтималдығы жоғары. Ең төменгі жағына жылжытамыз, біз Estimated monthly costs бөлімін көреміз. Осы видеоны жазу кезінде біздің барлық кіріс деректеріміз шамамен 30 доллар тұратынын көреміз. DB instance-тың өзі 12 доллардан көбірек тұрады. Біз келесі жолда да сондай соманы көреміз – бұл Multi-AZ standby instance, яғни сол инстанс басқа availability zone-да жасалады, сондықтан біз оған да сол соманы төлейміз. Storage ретінде, біздің 20 гигабайт SSD сақтау құны 5 доллардан азырақ тұрады. Барлық қажетті деректерді енгізгеннен кейін, Create database батырмасын басу керек. Бізді деректер базасы бар парақшаға жібереді. Жалғыз жазба – біз жасаған дерекқор және статус ретінде Creating деп тұрғанын көресіз. Біз кем дегенде 5 минут күтуіміз керек, содан кейін біз парақшаны жаңарта аламыз немесе тізімнің жоғарғы жағындағы тиісті батырманы басамыз және статус Available болып өзгеруі керек. Біздің дерекқор сәтті құрылғаннан кейін, сіз оның identifier-іне басуға болады – ол lab-db белсенді сілтемесі, ол біздің инстанс туралы барлық ақпарат бар парақшаға апарады. Сіз төменгі жағында, ақпарат Amazon EC2 instance сияқты түрлі қойындыларға топтастырылғанын көре аласыз. Ең бірінші қойындысын ашайық – бұл Connectivity & security және одан біз Endpoint мәнін көшіруіміз керек. Енді бізге Amazon EC2 сервисіне сервистерді іздеу жолағы арқылы өтуіміз керек. Өткеннен кейін, сол жақ навигация мәзірінде Instances батырмасын басу керек және сіз кем дегенде екі инстансты көресіз, бізге Instance Web Server 1 керек, оны басып, оның жалпыға ортақ IPv4-адресін көрейік. Ол үшін осы instance туралы көрсетілген деректерде Details қойындысына өту керек және бірінші жолда бізге қажет IP-адресті көресіз. Осы сілтеме бойынша өтейік, мұнда бізде қосымшалар орнатылғанын көресіз, RDS қойындысына өту керек және осы қосымшаға қажетті ақпаратты енгізу қажет. Бұрын көшірілген Endpoint-ты, содан кейін Database – lab, Username – main және Password ретінде дерекқорды құру кезінде көрсеткен password енгізу керек және Submit батырмасын басу керек. Сіз келесі команданың орындалып жатқанын көресіз, ол үшін біраз күту керек, барлығы сәтті іске қосылғаннан кейін, сіз контактілер туралы ақпарат бар келесі парақшаға бағытталасыз. Бұл контактілер ағымдағы дерекқорда бар деректер болып табылады, сіз оларды өзгерте аласыз, сонымен қатар жаңа контактілерді жасай аласыз және қоса аласыз, егер мұның бәрі жұмыс істеп тұрса, бұл Instance дерекқорын сәтті құрып, оларды біздің қосымшамен байланыстырғанымызды және қазір біздің қосымшамыз дұрыс жұмыс істеп тұрғанын білдіреді. Бұл жерде, болашақта нақты қосымшамен Production ортада жұмыс істегенде, мұндай әрекетті орындаудың қажеті болмайтындығына ерекше назар аударғым келеді, бұл ұсынылмайды, яғни біз шын мәнінде логинді, құпия сөзді және біздің дерекқорымыздың орналасқан жерін веб-форма арқылы енгіздік. Бұл танымал немесе ең жақсы тәжірибе емес. Ең жақсы тәжірибе – сіздің Environment Variables арқылы Amazon EC2 инстанстарыңыз, яғни орта айнымалылары, қажетті мәндерді бұдан әрі frontend-ке емес әрі қарай жіберу, backend тарапынан код ішінде дерекқорға дейін қажетті connection өңдеп, жөндеу және сәтті қосылу, содан кейін онымен жұмыс істеу және frontend-ке сіздің әлеуетті пайдаланушыларыңыз көре алатын және көруі керек деректерді ғана жіберу.
Осымен біздің зертханалық жұмысымызды аяқтаймыз және сіздерді құттықтаймын. Енді ең соңғы пункт қалды – біздің барлық жүйелерімізден дұрыс шығу керек. Біріншісі – AWS Management Console, жоғарғы оң жақ бөліктегі біздің пайдаланушы атын басу керек. Ашылмалы мәзірде Sign out батырмасын басыңыз, содан кейін AWS Academy-ден дұрыс шығу керек, атап айтқанда, зертханалық жұмысты дұрыс аяқтау керек. Жоғарғы оң жақ бөліктегі End lab батырмасын басу керек, зертхананы шынымен аяқтағыңыз келетіні туралы хабарлама пайда болады, "Yes" батырмасын басып, "You may close this message box now. Lab resources are terminating..." деген хабарламаны күту керек, бұл хабарлама біз жасаған барлық ресурстарды жою процесі басталғанын және біз қазір осы парақшаны/терезені жауып, AWS Academy-ден шыға алатынымызды білдіреді.
Осымен біз бүгінгі сессиямыздың соңына жеттік. Біз Amazon RDS сервисімен таныстық. Сіз толығырақ түсінік алдыңыз деп үміттенемін. Назар аударғаныңыз үшін рахмет. Сізбен келесі белсенділіктерімізде кездескенше.

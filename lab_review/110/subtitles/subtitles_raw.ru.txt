 Добрый день, уважаемые студенты! Я рад вас всех видеть на очередной сессии разбора лабораторной работы. В этой лабораторной работе мы с вами подробнее познакомимся и поработаем с сервисом Amazon RDS. Итак, давайте начнем. Ожидается, что мы уже находимся на основной странице лабораторной работы в AWS Academy. Мы уже инициировали создание временного AWS аккаунта. Сейчас нам необходимо нажать на кнопку AWS в верхней правой части для того, чтобы перейти в AWS Management Console. Как только мы переходим в AWS Management Console, мы начинаем с первой задачи. Это создание Security группы для нашей базы данных. Почему мы ее создаем? Нам необходимо предоставить доступ к этой базе данных для всех инстанцев, которые находятся в Web Security группе. Для того, чтобы это сделать, необходимо в строке поиска сервисов начать вводить VPC. В выдаче мы увидим необходимую нам ссылку. Давайте по ней перейдем. И в левом навигационном меню необходимо найти пункт Security группы. Как только вы на нее нажмете, вы увидите все существующие Security группы в нашем AWS аккаунте, в том числе и Web Security групп. Нам необходимо нажать на кнопку Create Security групп в верхней правой части страницы. Как только вы на нее нажимаете, вы переходите на специальную страницу для ввода некоторых входных данных. Давайте как Security групп name укажем DB Security групп, как description Permit access from Web Security групп. Как VPC нам необходимо указать Lab VPC. Будет выпадающее меню и в этом списке необходимо выбрать нужную нам. Если мы прокрутим чуть ниже, мы увидим, что мы можем настроить Inbound и Outbound rules. Давайте нажмем на кнопку Add Rule в секции Inbound rules. Далее как Type укажем MySQL Aurora, как Source укажем Custom и в поле начнем вводить SG, то есть Security группа. Вы увидите в списке отобразятся все существующие Security группы. Давайте выберем Web Security групп. Вы видите, что после того как мы выбрали тип MySQL Aurora, поля протокол и портретч уже были автозаполнены. Это TCP и порт 3306, стандартный порт для базы данных MySQL. Отлично. Здесь мы ввели все необходимые настройки. Необходимо прокрутить в самый низ и нажать на кнопку Create Security групп. Мы переходим к следующему заданию. Это следующий ресурс, который необходимо создать до создания инстанца базы данных, а именно Subnet групп. Для этого необходимо в строке поиски сервисов начать вводить RDS. Вы увидите ссылку на сервис RDS. Давайте на нее нажмем, чтобы перейти на этот сервис. В левом навигационном меню есть пункт Subnet groups. Необходимо нажать на него. Вы видите, что в этом аккаунте не было создано Subnet групп. Мы сейчас создадим новую. Для этого необходимо нажать на кнопку Create DB Subnet групп в верхней правой части страницы. Как только вы на нее нажмете, вас направят на страницу для ввода необходимых входных данных. Как на им необходимо указать DB Subnet групп через тире. Далее как description указать DB Subnet групп. Как VPC необходимо из выпадающего списка выбрать Lab VPC. Далее необходимо прокрутить чуть ниже и указать информацию о наших Subnet. Первым делом как availability зоны давайте выберем US East 1A и US East 1B. Далее в Subnet в выпадающем меню необходимо будет выбрать следующие Subnets это 10.0.1.0.0 и 2 это 10.0.3.0.24. Как только вы это сделаете необходимо нажать на кнопку Create в самой нижней части страницы. На этом мы создали Subnet группу. Вы увидите соответствующее сообщение. Теперь необходимо в левом на югационное меню нажать на пункт Databases и в открывшейся странице нажать на кнопку Create Database. Нас перенаправляет на отдельную страницу. Она достаточно длинная. Необходимо здесь ввести все необходимые для нас данные. Первым делом как creation метод выбираем стандарт Create. Как Engine Options необходимо выбрать MySQL. Чуть ниже нам необходимо ввести как DB Instance Identifier lab-db. Master username будет main. Master password будет рекомендованный пароль в вашей лабораторной работе. Необходимо его продублировать на следующее поле. Двигаемся дальше как instance type. Необходимо в первую очередь выбрать класс. Это burstable classes. То есть T-классы. Далее уже в выпадающем списке необходимо выбрать тип db, t3, micro. В этом типе у нас два виртуальных процессора и один гигабайт оперативной памяти. Что более чем достаточно в рамках нашей лабораторной работы. Следующая секция это информация о нашем хранилище. То есть мы выбираем тип General Purpose SSD и 20 гигабайтов выделенной памяти. Этого также более чем достаточно в рамках лабораторной работы. Поэтому вводим и двигаемся дальше. В разделе connectivity необходимо ввести информацию по сетям. Самое основное это VPC. В нашем случае это Lab VPC. Далее необходимо выбрать недавно созданную subnet группу. Это db subnet групп через Dash. Двигаемся дальше. VPC security group необходимо выбрать опцию choose existing и в выпадающем меню выбрать db security group. Прокручиваем чуть ниже. Там где секция monitoring необходимо флажок enable extended enhanced monitoring убрать галочку. Initial database name следующей секции вводим Lab. Прокручиваем чуть ниже. Там где enable automated backups и enable encryption необходимо галочки убрать. Мы все эти галочки убираем так как в рамках лабораторной работы это все не нужно. Таким образом мы ускоряем процесс создания инстенса баз данных. Когда вы будете работать с базы данных в production среде то с большой долей вероятностью все эти галочки должны быть включены. Прокручиваем в самый низ. Мы увидим секцию estimated monthly costs. На момент записи мы видим что все наши введенные входные данные они стоят в районе 30 долларов. db instance стоит сам по себе чуть больше чем 12 долларов. Мы видим такую же сумму в следующей строке это multi-AZ standby instance. То есть такой же инстенс создается в другой availability зоне. Поэтому за нее мы столько же оплачиваем как storage наши 20 гигабайт SSD для хранения будет стоить чуть менее 5 долларов. Как только мы ввели все необходимые данные необходимо нажать на кнопку create database. Нас направят на страницу со списком баз данных. Единственная запись это баз данных которую мы только что создали и как статус вы видите creating. Необходимо подождать какое-то время как минимум это 5 минут после чего мы можем либо обновить страницу либо нажать на соответствующую кнопку верхней части списка и статус должен поменяться на available. Как только наша база данных будет успешно создана вы можете нажать на ее identifier это lab-db активная ссылка по нажатию которой направляет на страницу со всей необходимой информацией о нашем инстенции. Вы видите что в нижней части информация сгруппирована по различным вкладкам точно так же как в EC2 instance. Давайте откроем самую первую вкладку это connectivity and security и нам необходимо скопировать endpoint. Теперь нам необходимо перейти в сервис EC2 через строку поиска сервисов. Как только вы переходите в левом навигационном меню вам необходимо нажать на instances и вы увидите как минимум два инстанца нас интересует instance web-сервер one давайте на нее нажмем и посмотрим ее публичный IP4 адрес. Для этого необходимо в отобразившихся данных о этом instance перейти на вкладку details и в самой первой строке вы увидите нужный нам IP адрес. Давайте перейдем по этой ссылке вы увидите что здесь у нас уже настроены приложения необходимо перейти во вкладку RDS и здесь необходимо ввести информацию необходимую для этого приложения необходимо ввести endpoint ранее скопированный далее database, lab, username, main и как паспорт тот паспорт который вы указали при создании баз данных и нажать на кнопку submit. Вы увидите что исполняется следующая команда для этого необходимо подождать некоторое время как только все успешно запустится то вас перенаправить на следующую страницу с информацией о контактах. Эти контакты данные которые есть в текущей базе данных вы можете эти данные контакты изменять также создавать и добавлять новые контакты если все это работает это говорит о том что мы успешно создали instance базы данных и привязали к нашему приложению и сейчас наше приложение корректно работает. Здесь бы я хотел особое внимание обратить что в будущем когда вы будете работать в продакшн среде с реальным приложением то подобного рода действия делать не придется это крайне не рекомендуется то есть мы ввели фактически логин пароль и местонахождение нашей базы данных через веб форму. Это не является популярной и лучшей практикой. Лучшая практика это ваши C2 инстанции через environment variables то есть переменные среды передать необходимые значения дальше уже не передавая это на frontend на стороне backend внутри кода обработать и настроить необходимый connection до базы данных и успешно подключиться далее с ним работать и на frontend уже передавать только те данные которые ваши потенциальные пользователи могут и должны видеть. На этом мы завершаем нашу лабораторную работу я вас с этим поздравляю. Теперь остается самый последний пункт необходимо корректно разлагиниться со всех наших систем. Первое это AWS Management консоль необходимо верхней правой части нажать на имя нашего пользователя в выпадающем меню нажать на кнопку sign out далее необходимо правильно разлагиниться с AWS Academy а именно правильно завершить лабораторную работу. Необходимо верхней правой части нажать на кнопку end lab выйдет сообщение о том что действительно ли вы хотите завершить лабораторную работу нажимаем да и необходимо дождаться сообщения you may close this message box now lab resources are terminating что говорит о том что процесс удаления всех созданных нами ресурсов он запустился и теперь мы можем закрывать эту страницу это окно и проходить с AWS Academy. На этом мы добрались до конца нашей сегодняшней сессии мы чуть подробнее познакомились с сервисом Amazon RDS я очень надеюсь что вы получили более полное представление спасибо вам за внимание увидимся с вами на следующих наших активностях.

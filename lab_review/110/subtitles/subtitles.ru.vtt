WEBVTT

00:00:00.000 --> 00:00:06.640
Добрый день, уважаемые студенты! Я рад 
вас всех видеть на очередной сессии разбора

00:00:06.640 --> 00:00:11.800
лабораторной работы. В этой лабораторной 
работе мы с вами подробнее познакомимся

00:00:11.800 --> 00:00:15.840
и поработаем с сервисом Amazon RDS.
Итак, давайте начнем.

00:00:15.840 --> 00:00:26.080
Ожидается, что мы уже находимся на основной 
странице лабораторной работы в AWS Academy.

00:00:26.080 --> 00:00:30.160
Мы уже инициировали создание 
временного AWS аккаунта.

00:00:30.160 --> 00:00:33.320
Сейчас нам необходимо нажать на 
кнопку AWS в верхней правой

00:00:33.320 --> 00:00:38.320
части для того, чтобы перейти 
в AWS Management Console.

00:00:38.320 --> 00:00:41.520
Как только мы переходим в 
AWS Management Console, мы 

00:00:41.520 --> 00:00:47.680
начинаем с первой задачи - это создание 
Security Group для нашей базы данных.

00:00:47.680 --> 00:00:54.840
Почему мы ее создаем? Нам необходимо 
предоставить доступ к этой базе данных

00:00:54.840 --> 00:00:59.200
для всех инстансов, которые 
находятся в Web Security Group.

00:00:59.200 --> 00:01:04.080
Для того, чтобы это сделать, необходимо 
в строке поиска сервисов начать вводить VPC.

00:01:04.080 --> 00:01:08.840
В выдаче мы увидим необходимую нам 
ссылку. Давайте по ней перейдем, 

00:01:08.840 --> 00:01:13.680
и в левом навигационном меню 
необходимо найти пункт Security groups.

00:01:13.680 --> 00:01:17.440
Как только вы на нее нажмете, 
вы увидите все существующие

00:01:17.440 --> 00:01:23.960
Security Groups в нашем AWS аккаунте, 
в том числе и Web Security Group.

00:01:23.960 --> 00:01:30.400
Нам необходимо нажать на кнопку Create Security 
group в верхней правой части страницы.

00:01:30.400 --> 00:01:33.720
Как только вы на нее нажимаете, 
вы переходите на специальную

00:01:33.720 --> 00:01:36.840
страницу для ввода некоторых 
входных данных.

00:01:36.840 --> 00:01:40.360
Давайте как Security group name 
укажем DB Security Group, 

00:01:40.360 --> 00:01:44.080
как Description – Permit access 
from Web Security Group,

00:01:44.080 --> 00:01:50.400
как VPC нам необходимо указать Lab VPC. Будет 
выпадающее меню и в этом списке необходимо

00:01:50.400 --> 00:01:55.660
выбрать нужный нам пункт. Если мы 
прокрутим чуть ниже, мы увидим,  

00:01:55.660 --> 00:01:59.320
что мы можем настроить 
Inbound и Outbound rules.

00:01:59.320 --> 00:02:05.040
Давайте нажмем на кнопку 
Add Rule в секции Inbound rules.

00:02:05.040 --> 00:02:09.400
Далее, как Type укажем MySQL/Aurora, 
как Source укажем Custom и в поле

00:02:09.400 --> 00:02:17.440
начнем вводить sg, т.е. Security Group. 
Вы увидите, что в списке отобразятся все

00:02:17.440 --> 00:02:23.640
существующие Security Groups. 
Давайте выберем Web Security Group.

00:02:23.640 --> 00:02:28.240
Вы видите, что после того как 
мы выбрали тип MySQL/Aurora,

00:02:28.240 --> 00:02:35.520
поля Protocol и Port range уже 
были автоматически заполнены.

00:02:35.520 --> 00:02:42.440
Это TCP и порт 3306, стандартный 
порт для базы данных MySQL.

00:02:42.440 --> 00:02:46.080
Отлично, здесь мы ввели 
все необходимые настройки.

00:02:46.080 --> 00:02:52.640
Необходимо прокрутить в самый низ и 
нажать на кнопку Create security group.

00:02:52.640 --> 00:02:58.280
Мы переходим к следующему заданию. Это следующий
ресурс, который необходимо создать до создания

00:02:58.280 --> 00:03:02.680
инстанса базы данных, 
а именно Subnet Group. 

00:03:02.680 --> 00:03:07.440
Для этого необходимо в строке 
поиске сервисов начать вводить RDS.

00:03:07.440 --> 00:03:12.480
Вы увидите ссылку на сервис Amazon RDS. Давайте 
на нее нажмем, чтобы перейти на этот сервис.

00:03:12.480 --> 00:03:18.840
В левом навигационном меню есть пункт 
Subnet groups. Необходимо нажать на него.

00:03:18.840 --> 00:03:23.840
Вы видите, что в этом аккаунте 
не было создано Subnet Group.

00:03:23.840 --> 00:03:28.800
Мы сейчас создадим новую. Для этого необходимо 
нажать на кнопку Create DB Subnet group

00:03:28.800 --> 00:03:34.640
в верхней правой части страницы. Как только 
вы на нее нажмете, вас направят на страницу

00:03:34.640 --> 00:03:41.520
для ввода необходимых входных данных. Как Name 
необходимо указать DB-Subnet-Group через дефис.

00:03:41.520 --> 00:03:44.960
Далее, как Description 
указать DB Subnet Group,

00:03:44.960 --> 00:03:51.440
как VPC необходимо из выпадающего 
списка выбрать Lab VPC.

00:03:51.440 --> 00:03:57.560
Далее необходимо прокрутить чуть ниже 
и указать информацию о наших Subnets.

00:03:57.560 --> 00:04:04.640
Первым делом как Availability zone 
давайте выберем us-east-1a и us-east-1b.

00:04:04.640 --> 00:04:09.360
Далее в Subnets в выпадающем 
меню необходимо будет

00:04:09.360 --> 00:04:21.520
выбрать следующие Subnets, это 
10.0.1.0/24 и второй — это 10.0.3.0/24.

00:04:21.520 --> 00:04:25.840
Как только вы это сделаете 
необходимо нажать на кнопку

00:04:25.840 --> 00:04:32.880
Create в самой нижней части страницы. 
На этом мы создали Subnet Group.

00:04:32.880 --> 00:04:40.440
Вы увидите соответствующее сообщение. Теперь 
необходимо в левом навигационном меню нажать

00:04:40.440 --> 00:04:46.280
на пункт Databases и в открывшейся 
странице нажать на кнопку Create database.

00:04:46.280 --> 00:04:53.960
Нас перенаправляет на отдельную 
страницу. Она достаточно длинная.

00:04:53.960 --> 00:04:58.080
Необходимо здесь ввести все 
необходимые для нас данные.

00:04:58.080 --> 00:05:02.120
Первым делом как Creation method 
выбираем Standard create.

00:05:02.120 --> 00:05:06.000
Как Engine options 
необходимо выбрать MySQL.

00:05:06.000 --> 00:05:13.080
Чуть ниже нам необходимо ввести 
как DB instance identifier – lab-db,

00:05:13.080 --> 00:05:21.360
Master username будет main, Master password 
будет рекомендованный пароль в вашей

00:05:21.360 --> 00:05:27.480
лабораторной работе. Необходимо 
его продублировать на следующее поле.

00:05:27.480 --> 00:05:34.600
Двигаемся дальше, как Instance type 
необходимо в первую очередь выбрать 

00:05:34.600 --> 00:05:37.680
class - это Burstable 
classes, т.е. t classes.

00:05:37.680 --> 00:05:45.240
Далее уже в выпадающем списке 
необходимо выбрать тип db.t3.micro.

00:05:45.240 --> 00:05:52.040
В этом типе у нас два виртуальных 
процессора и 1 гигабайт оперативной памяти,

00:05:52.040 --> 00:05:56.200
что более чем достаточно в рамках 
нашей лабораторной работы.

00:05:56.200 --> 00:06:00.400
Следующая секция – это информация 
о нашем хранилище, т.е.

00:06:00.400 --> 00:06:06.240
мы выбираем тип General Purpose SSD и 
20 гигабайтов выделенной памяти.

00:06:06.240 --> 00:06:11.760
Этого также более чем достаточно 
в рамках лабораторной работы,

00:06:11.760 --> 00:06:19.320
поэтому вводим и двигаемся дальше. В разделе 
Connectivity необходимо ввести информацию 

00:06:19.320 --> 00:06:25.120
по сетям. Самое основное – это VPC, 
в нашем случае это – Lab VPC.

00:06:25.120 --> 00:06:30.280
Далее необходимо выбрать 
недавно созданную Subnet Group –

00:06:30.280 --> 00:06:33.960
это db-subnet-group через 
дефис. Двигаемся дальше.

00:06:33.960 --> 00:06:41.600
VPC security group необходимо выбрать 
опцию Choose existing и в выпадающем

00:06:41.600 --> 00:06:46.880
меню выбрать DB Security Group. 
Прокручиваем чуть ниже,

00:06:46.880 --> 00:06:53.960
там где секция Monitoring необходимо убрать 
галочку в пункте Enable Enhanced monitoring.

00:06:53.960 --> 00:06:59.680
В следующей секции Initial database name 
вводим lab. Прокручиваем чуть ниже,

00:06:59.680 --> 00:07:07.360
там где Enable automated backups и 
Enable encryption необходимо убрать галочки.

00:07:07.360 --> 00:07:14.040
Мы все эти галочки убираем так как в рамках 
лабораторной работы это все не нужно.

00:07:14.040 --> 00:07:19.640
Таким образом мы ускоряем процесс 
создания инстанса базы данных.

00:07:19.640 --> 00:07:23.720
Когда вы будете работать с базой 
данных в Production среде,

00:07:23.720 --> 00:07:31.840
то с большой долей вероятностью все 
эти галочки должны быть включены.

00:07:31.840 --> 00:07:37.240
Прокручиваем в самый низ, мы увидим 
секцию Estimated monthly costs.

00:07:37.240 --> 00:07:48.080
На момент записи мы видим, что все наши введенные
входные данные они стоят в районе 30 долларов.

00:07:48.080 --> 00:07:52.800
DB instance стоит сам по себе 
чуть больше чем 12 долларов.

00:07:52.800 --> 00:07:58.400
Мы видим такую же сумму в следующей 
строке – это Multi-AZ standby instance, т.е.

00:07:58.400 --> 00:08:01.960
такой же инстанс создается 
в другой availability zone,

00:08:01.960 --> 00:08:04.840
поэтому за нее мы столько же 
оплачиваем. Как Storage

00:08:04.840 --> 00:08:14.160
наши 20 гигабайт SSD для хранения 
будет стоить чуть менее 5 долларов.

00:08:14.160 --> 00:08:21.320
Как только мы ввели все необходимые данные 
необходимо нажать на кнопку Create database.

00:08:21.320 --> 00:08:24.600
Нас направит на страницу 
со списком базы данных.

00:08:24.600 --> 00:08:27.480
Единственная запись это 
база данных, которую мы

00:08:27.480 --> 00:08:31.460
только что создали и как 
статус вы видите Сreating.

00:08:31.460 --> 00:08:34.360
Необходимо подождать какое-то 
время как минимум это 5 минут,

00:08:34.360 --> 00:08:37.640
после чего мы можем 
либо обновить страницу,

00:08:37.640 --> 00:08:41.980
либо нажать на соответствующую 
кнопку верхней части списка и

00:08:41.980 --> 00:08:52.680
статус должен поменяться на Available. Как 
только наша база данных будет успешно создана 

00:08:52.680 --> 00:08:58.000
вы можете нажать на ее identifier 
это lab-db активная ссылка,

00:08:58.000 --> 00:09:02.800
по нажатию которой направляет 
на страницу со всей необходимой

00:09:02.800 --> 00:09:09.360
информацией о нашем инстансе. Вы видите, 
что в нижней части информация сгруппирована

00:09:09.360 --> 00:09:13.800
по различным вкладкам точно 
так же как в Amazon EC2 instance.

00:09:13.800 --> 00:09:18.240
Давайте откроем самую первую 
вкладку – это Connectivity & security и

00:09:18.240 --> 00:09:27.520
нам необходимо скопировать Endpoint. Теперь 
нам необходимо перейти в сервис Amazon EC2 через

00:09:27.520 --> 00:09:31.880
строку поиска сервисов. Как только вы 
переходите в левом навигационном меню

00:09:31.880 --> 00:09:36.280
вам необходимо нажать на 
Instances и вы увидите

00:09:36.280 --> 00:09:39.880
как минимум два инстанса, нас 
интересует Instance Web Server 1,

00:09:39.880 --> 00:09:48.080
давайте на нее нажмем и 
посмотрим ее публичный IPv4-адрес.

00:09:48.080 --> 00:09:54.840
Для этого необходимо в отобразившихся 
данных об этом instance перейти

00:09:54.840 --> 00:10:01.120
на вкладку Details и в самой первой 
строке вы увидите нужный нам IP-адрес.

00:10:01.120 --> 00:10:04.120
Давайте перейдем по этой 
ссылке вы увидите, что здесь

00:10:04.120 --> 00:10:10.400
у нас уже настроены приложения, 
необходимо перейти во вкладку

00:10:10.400 --> 00:10:15.720
RDS и здесь необходимо ввести 
информацию необходимую

00:10:15.720 --> 00:10:20.640
для этого приложения. Необходимо 
ввести Endpoint ранее скопированный,

00:10:20.640 --> 00:10:25.960
далее Database – lab, Username – 
main и как Password тот password,

00:10:25.960 --> 00:10:30.400
который вы указали при создании 
базы данных и нажать на кнопку Submit.

00:10:30.400 --> 00:10:34.200
Вы увидите, что исполняется 
следующая команда, для этого

00:10:34.200 --> 00:10:40.560
необходимо подождать некоторое 
время, как только все успешно

00:10:40.560 --> 00:10:47.320
запустится, то вас перенаправят на следующую 
страницу с информацией о контактах.

00:10:47.320 --> 00:10:54.040
Эти контакты – данные, которые 
есть в текущей базе данных,

00:10:54.040 --> 00:10:58.240
вы можете эти данные контакты 
изменять, также создавать

00:10:58.240 --> 00:11:01.480
и добавлять новые контакты, 
если все это работает, это

00:11:01.480 --> 00:11:06.040
говорит о том, что мы успешно 
создали Instance базы данных

00:11:06.040 --> 00:11:10.320
и привязали к нашему приложению и 
сейчас наше приложение корректно работает.

00:11:10.320 --> 00:11:14.200
Здесь я бы хотел особое внимание 
обратить, что в будущем,

00:11:14.200 --> 00:11:19.040
когда вы будете работать в 
Production среде с реальным

00:11:19.040 --> 00:11:25.040
приложением, то подобного рода 
действия делать не придется,

00:11:25.040 --> 00:11:29.380
это крайне не рекомендуется,
т.е. мы ввели фактически

00:11:29.380 --> 00:11:34.920
логин, пароль и местонахождение 
нашей базы данных через веб форму.

00:11:34.920 --> 00:11:38.080
Это не является популярной 
и лучшей практикой.

00:11:38.080 --> 00:11:42.440
Лучшая практика – это ваши 
Amazon EC2 инстансы через

00:11:42.440 --> 00:11:45.560
Environment Variables, т.е. переменные 
среды, передать необходимые

00:11:45.560 --> 00:11:51.640
значения дальше уже не передавая 
это на frontend, на стороне backend

00:11:51.640 --> 00:11:55.080
внутри кода обработать и 
настроить необходимый

00:11:55.080 --> 00:11:57.960
connection до базы данных и 
успешно подключиться, далее

00:11:57.960 --> 00:12:01.320
с ним работать, и на frontend уже 
передавать только те данные,

00:12:01.320 --> 00:12:06.960
которые ваши потенциальные 
пользователи могут и должны видеть.

00:12:06.960 --> 00:12:13.240
На этом мы завершаем нашу лабораторную 
работу, я вас с этим поздравляю.

00:12:13.240 --> 00:12:17.600
Теперь остается самый последний 
пункт – необходимо корректно

00:12:17.600 --> 00:12:23.820
разлогиниться со всех наших систем. Первое – это 
AWS Management Console, необходимо в верхней

00:12:23.820 --> 00:12:28.880
правой части нажать на имя нашего 
пользователя. В выпадающем меню

00:12:28.880 --> 00:12:32.760
нажать на кнопку Sign out, 
далее необходимо правильно

00:12:32.760 --> 00:12:38.960
разлогиниться с AWS Academy, а именно 
правильно завершить лабораторную работу.

00:12:38.960 --> 00:12:42.760
Необходимо в верхней правой 
части нажать на кнопку

00:12:42.760 --> 00:12:46.480
End lab, выйдет сообщение 
о том, что действительно ли

00:12:46.480 --> 00:12:49.600
вы хотите завершить 
лабораторную работу, нажимаем

00:12:49.600 --> 00:12:53.400
"Yes" и необходимо дождаться 
сообщения "You may close this message

00:12:53.400 --> 00:12:58.160
box now. Lab resources are terminating...", 
что говорит о том, что процесс

00:12:58.160 --> 00:13:02.820
удаления всех созданных 
нами ресурсов запустился и

00:13:02.820 --> 00:13:11.280
теперь мы можем закрывать эту 
страницу/окно и выходить с AWS Academy.

00:13:11.280 --> 00:13:13.800
На этом мы добрались до конца 
нашей сегодняшней сессии.

00:13:13.800 --> 00:13:20.400
Мы чуть подробнее познакомились 
с сервисом Amazon RDS.

00:13:20.400 --> 00:13:24.800
Я очень надеюсь, что вы получили 
более полное представление.

00:13:24.800 --> 00:13:38.760
Спасибо вам за внимание. Увидимся с вами 
на следующих наших активностях.
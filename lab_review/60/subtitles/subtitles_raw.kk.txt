Қайырлы күн, құрметті студенттер, зертханалық шолу сессиясында. Зертхананың тақырыбы - Amazon VPC және оның компоненттері. Бұл сессия шолу болғандықтан, мен бұл зертханалық жұмысты орындаймын, және мен не істеп жатқанымызды түсіндіру үшін қосымша түсініктемелер беремін.
Сонымен, бастайық. Біз бұл сессияны негізгі зертханалық беттен бастаймыз. Осы бетке жету үшін сізге AWS академиясына кіріп, тиісті Cloud Practitioner курсына өту керек. Әрі қарай, сіз бесінші модульде Lab 2 әрекетін табуыңыз керек: VPC құрыңыз және веб-серверді іске қосыңыз. Сілтемені басқаннан кейін сіз осы бетке түсесіз. Сондай-ақ, жоғарғы оң жақ мәзірдегі “Бастау зертханасы” түймесін басу арқылы сіздің сессияңыз үшін уақытша AWS есептік жазбасын құруды бастадыңыз деп күтілуде. Мұның бәрі дайын болғаннан кейін, біз бастай аламыз. Біз AWS түймесін басуымыз керек. Біз AWS басқару консолінің басты бетіне бағытталамыз.
Жоғарғы оң жақтағы AWS басқару консолінде біз зертханалық жұмысымызды орындау үшін уақытша пайдаланушы ретінде кіргенімізді көре аламыз. Жарайды, біз Amazon VPC басты бетіне өтуіміз керек. Мұны істеу үшін біз VPC-ді қызмет іздеу жолағында теруді бастаймыз және іздеу нәтижелерінде қажет бірінші сілтемені көреміз. Amazon VPC-ге бару үшін оны басайық. Amazon VPC басты бетінде біз жоғарғы жағындағы сол жақ навигация мәзірінде қосқыштың қосулы екеніне көз жеткізуіміз керек және біз жаңа Amazon VPC интерфейсінде отырамыз. Содан кейін, сол жақ шарлау мәзірінде VPC бақылау тақтасы қойындысын нұқыңыз және ашылған бетте жаңа VPC жасау үшін VPC жасау түймесін басыңыз. Ашылған бетте біз қазір қажетті параметрлермен теңшелетін VPC жасау үшін қажетті мәндерді енгіземіз. VPC параметрлерінде осы VPC ішінде қосымша компоненттер жасау үшін VPC және басқаларын таңдайық. Біздің VPC атауы ретінде Lab енгізіп, тексеріп көрейік Auto-Generate, бұл құсбелгі өріске енгізген мәнмен тег атауын жасайды, атап айтқанда Lab. Әрі қарай, егер біз аздап айналдырсақ, VPC үшін IPv4 CIDR блогына кіре аламыз. 10.0.0.0/16 енгізейік, содан кейін төменде VPC-де болатын қол жетімділік аймақтарының саны үшін параметрлер бар, біз бір қол жетімділік аймағын таңдауымыз керек. Төменде бізде бір қоғамдық ішкі желі, сондай-ақ бір жеке ішкі желі болатынын көрсетуіміз керек. Егер біз ішкі желілерді CIDR блоктарын теңшеу бөлімін кеңейтсек, біз барлық ішкі желілер үшін CIDR блоктарын көрсете аламыз. Қоғамдық ішкі желілер үшін 10.0.0.0/24 көрсетіңіз. Жеке ішкі желілер үшін 10.0.1.0/24 көрсетіңіз. Әрі қарай, NAT шлюзінің параметрлерінде бізде бір қол жетімділік аймағында бір NAT шлюзі бар екенін көрсетеміз және біз VPC соңғы нүктелерін пайдаланбаймыз. Ең соңғы DNS параметрлері бөлімі, екі опция үшін де құсбелгілерді тексерейік, яғни DNS хост аттарын қосыңыз және DNS ажыратымдылығын қосыңыз. Оң жақтағы басты бетте сіз VPC қалай көрінетінін және оның қандай компоненттерден тұратынын алдын ала көре аласыз. Бізде Lab-vpc деп аталатын VPC болады. Бұл VPC-де екі ішкі желі болады, біреуі жеке, екіншісі жалпыға ортақ, сәйкес атаулары бар қол жетімділік аймақтары біз-шығыс-1а. Әрі қарай, біз екі маршрут кестесін жасаймыз, біреуі қоғамдық ішкі желі үшін және біреуі жеке ішкі желі үшін. Қосымша компоненттерге желілік қосылымдар кіреді, атап айтқанда Интернет шлюзі және NAT шлюзі, біз сол қол жетімділік аймағында жасаймыз.
Парақтың сол жағына оралып, VPC және барлық қажетті компоненттерді жасауды бастау үшін VPC жасау түймесін басыңыз. Біз VPC-мен жасалатын барлық компоненттерді тізімдейтін бетке бағыттаймыз. NAT шлюзін құру үшін біраз уақыт, бір-үш минут кетуі мүмкін, сондықтан біз барлық ресурстардың жасалуын күтуіміз керек. Барлық ресурстар жасалғаннан кейін сіз толық тізімді көресіз және кейбір ресурстарға тікелей сілтемелеріңіз болады. Беттің төменгі жағында VPC көру батырмасы жаңадан жасалған VPC басты бетіне өту үшін пайда болады. Оны басайық. Мұнда сіз біздің VPC туралы барлық мәліметтерді көре аласыз. Енді біздің VPC ішіндегі басқа қол жетімділік аймағында қосымша ішкі желілер жасайық. Мұны істеу үшін сол жақ шарлау мәзіріндегі ішкі желілер қойындысын нұқыңыз. Бізді осы AWS есептік жазбасындағы барлық ішкі желілер бар бетке апарамыз. Экранның жоғарғы оң жағындағы ішкі желі жасау түймесін басу керек. Біз Параметрлер бетінде боламыз, жаңа ішкі желі құру үшін кірістері бар. VPC идентификаторы ретінде ашылмалы тізімнен Lab-VPC деп аталатын жаңа VPC таңдауымыз керек. Әрі қарай, сіз Ішкі желі атауын көрсетуіңіз керек - бұл Lab-Subnet-Public2. Егер сіз сәл төмен айналдырсаңыз, бізде қол жетімділік аймағын таңдау мүмкіндігі бар. Біз басқа қол жетімділік аймағын таңдауымыз керек. VPC үшін бәріміз есімізде болғандықтан, біз VPC ішіндегі ішкі желі үшін біз-шығыс-1а қол жетімділік аймағын таңдадық, ал жаңа ішкі желі үшін біз басқа қол жетімділік аймағын таңдаймыз, атап айтқанда біз-шығыс-1b. Сондай-ақ, біз CIDR блогын көрсете аламыз, 10.0.2.0/24 жазайық, сонда ол бар ішкі желілермен қабаттаспайды, содан кейін экранның төменгі жағындағы ішкі желіні жасау түймесін басыңыз.
Біз барлық ішкі желілер бар бетке, ішкі желі сәтті жасалған жасыл хабарламаға және біздің жаңа ішкі желілеріміздің біреуі ғана жасалған тізімге қайта бағытталамыз, себебі сіз параққа кірген кезде осы Ішкі желі үшін сүзгі автоматты түрде жасалды. Енді біз екінші жеке ішкі желі жасауымыз керек. Мұны істеу үшін сіз ішкі желі жасау түймесін басуыңыз керек. Ашылған жаңа ішкі желі параметрлері мәзірінде біз Lab-VPC деп аталатын VPC таңдауымыз керек. Әрі қарай, біз ішкі желі атауы ретінде lab-subnet-private2 көрсетеміз. Қол жетімділік аймағы ретінде біз екінші қол жетімділік аймағын таңдаймыз, атап айтқанда us-East-1b, ал CIDR блогы ретінде келесі қиылыспайтын блокты көрсетеміз — 10.0.3.0/24. Осыдан кейін, ішкі желі жасау түймесін басыңыз.
Сондай-ақ, біз Ішкі желінің сәтті құрылуы туралы хабарды және жаңа ішкі желімізбен сүзілген тізімді көреміз. Әрі қарай, біз жаңадан құрылған ішкі желілерді маршрут кестелеріне байланыстыруымыз керек. Мұны істеу үшін сол жақ шарлау мәзіріндегі Маршрут кестелері қойындысын нұқыңыз. Сіз AWS есептік жазбасындағы барлық маршрут кестелерінің тізімін көресіз. Бастайық Маршрут кестесі, ол үшін жасалған Жеке ішкі желілер. Оны тізімнен таңдап, экранның төменгі жағындағы Маршрут кестелері қойындысына өтіңіз. Бізде екі маршрут бар екенін көреміз, ал екіншісі - әдепкі, бұл VPC ішіндегі барлық ішкі желілерге бір-бірімен ақпарат алмасуға мүмкіндік береді. Біріншісі - біздің VPC құрумен жасалған маршрут, яғни NAT Gateway арқылы біз Интернетке мақсатты ретінде кіреміз, ол Destination ретінде тізімделеді.
Осы маршрут кестесіне қай ішкі желілер байланыстырылғанын көру үшін келесі Ішкі желі қауымдастықтары қойындысына барайық. Біз VPC құрумен бірге құрылған және жеке ішкі желі болып табылатын нақты байланыстырылған ішкі желі бар екенін көреміз. Әрі қарай, біз ішкі желі қауымдастықтарын өңдеу түймесін басып, екінші жеке ішкі желіні осы Маршрут кестесіне байланыстыруымыз керек. Пайда болған тізімде біз бірінші жеке ішкі желі таңдалғанын көреміз, екінші жеке ішкі желіні қосу үшін біз оны белгілеп, экранның төменгі оң жақ бөлігінде Сақтау түймесін басыңыз бірлестіктер.
Жарайды, біз Қауымдастықтарды сәтті құрдық. Біздің жеке ішкі желілеріміздің екеуі де қазір жеке маршруттар кестесімен байланысты. Әрі қарай, біз қоғамдық маршрут кестесі үшін де солай істеуіміз керек. Мұны жасамас бұрын, осы Маршрут кестесін таңдап, бізде қандай маршруттар бар екенін көрейік. Біз мұнда екі маршрутты көреміз, ал екінші маршрут - бұл VPC ішіндегі барлық ішкі желілерге деректерді бір-бірімен бөлісуге мүмкіндік беретін әдепкі маршрут. Бірінші маршрут - бұл VPC және басқа компоненттерді құрумен бірге жасалған маршрут, және мақсатты Интернет-шлюзге нұсқайтын болсақ, біз тағайындалған жерге барамыз Интернет арқылы көрсетілген. Осылайша, біз Интернет шлюзі арқылы Интернетке қол жеткіземіз. Келесі ішкі желі қауымдастықтары қойындысына барайық. Мұнда біз бірінші қоғамдық ішкі желі осы маршрут кестесімен байланыстырылғанын көреміз. Ішкі желі қауымдастықтарын өңдеу түймесін басып, ашылатын жаңа бетте, бірінші қоғамдық ішкі желіге қосымша, екінші қоғамдық ішкі желіні таңдаңыз. Осыдан кейін Бірлестіктерді сақтау түймесін басыңыз. Әрі қарай, біз қауіпсіздік топтарын жасауымыз керек, мұны істеу үшін сол жақ шарлау мәзіріндегі Қауіпсіздік топтары қойындысын нұқыңыз. Ашылған бетте Қауіпсіздік тобын жасау түймесін басыңыз. Біз жаңа қауіпсіздік тобын құру параметрлеріне барамыз. Веб-қауіпсіздік тобын жаңа қауіпсіздік тобының атауы ретінде таныстырайық. Әрі қарай, Сипаттама ретінде жазайық HTTP кіруін қосыңыз және VPC ретінде ашылмалы тізімнен жаңадан құрылған VPC, Lab-VPC таңдаңыз. Осы Қауіпсіздік тобы үшін біз зертханалық жұмысымыздың бөлігі ретінде бір Кіріс ережесін жасаймыз. Мұны істеу үшін, жаңа жолды қосу үшін осы бөлімдегі ережені қосу түймесін басыңыз және осы жолда HTTP түрін таңдаңыз, IPv4-тен кез-келген жерде Source ретінде таңдаңыз, сонда сіз барлық нөлдер бар квадрат пайда болатынын көресіз Интернетті білдіреді. Әрі қарай, соңғы Сипаттама бағанында біз веб-сұрауларға рұқсат береміз. Бұл сіз осы Қауіпсіздік тобында істеу керек барлық болып табылады. Төмен жылжып, Қауіпсіздік тобын жасау түймесін басыңыз. Осы батырманы басқаннан кейін біз жаңадан құрылған Қауіпсіздік тобының басты бетіне өтеміз және экранның жоғарғы жағында біздің қауіпсіздік тобы жасыл хабарландыруда сәтті жасалған хабарды көреміз.
Келесі қадам - веб-серверді құру және мұны істеу үшін біз Amazon EC2 қызметтеріне ауысамыз. Қызметтер үшін жоғарғы іздеу жолағында EC2 теруді бастаймыз және бірінші сілтеме бізге қажет сілтеме болады. Оған ауысайық. Amazon EC2 басты бетінде болғаннан кейін, осы қызмет үшін жаңа AWS Management консоль интерфейсін көрсету үшін жоғарғы жағындағы сол жақ шарлау мәзірінде New EC2 Experience қосқышы қосылғанына көз жеткізуіміз керек Содан кейін сол жақ шарлау мәзірінде EC2 бақылау тақтасы қойындысын таңдаңыз. Төменгі жағында ашылатын бетте Іске қосу данасын нұқыңыз. Жаңа Instance жасау үшін барлық қажетті кірістермен бет ашылады. Name өрісіне веб-сервер 1 енгізейік, содан кейін AMI, яғни Amazon Machine Image, бізге ұсынылғанды таңдаңыз - Amazon Linux, және дәлірек айтқанда Amazon Linux 2 AMI (HVM). Естеріңізге сала кетейік, AMI - бұл EC2 Instance үшін кескін, ол жерде қай амалдық жүйе орнатылатынын анықтайды. Егер біз аздап айналдырсақ, Instance түрін таңдай аламыз, яғни бұл қуатты сервер немесе әлсіз, біздің жағдайда t2.micro үшін әдепкі мәнді қалдырайық. Төменде, SSH арқылы қосылу үшін кілт жұбы таңдалады. Біздің зертханалық жұмысымыздың бір бөлігі ретінде Vockey жұбы жасалды, оны таңдайық.
Әрі қарай жүрейік. Желілік параметрлерде біз осы параметрлерді өзгертуіміз керек екенін көреміз, сондықтан Өңдеу түймесін басамыз. Біз қазір құндылықтарды өзгерте аламыз, өйткені VPC біздің Lab-VPC таңдайды. Әрі қарай, Ішкі желі ретінде біз Lab-Subnet-Public-2 деп аталатын құрылған екінші қоғамдық ішкі желіні таңдаймыз. Төменде, қоғамдық IP автоматты түрде тағайындайтын жерде, біз опцияны таңдаймыз Қосу опциясы, осылайша уақытша жалпы IP мекенжайы автоматты түрде жасалады EC2 Instance. Бұл біз осы веб-серверге қосылу үшін пайдаланатын IP мекенжайы. Алдымен бірінші нәрсе. Әрі қарай, біз қауіпсіздік тобын таңдауымыз керек, мұны істеу үшін брандмауэр (қауіпсіздік топтары) бөлімінде біз қолданыстағы қауіпсіздік тобын таңдау опциясын таңдауымыз керек және пайда болатын ашылмалы мәзірде біз жасаған жаңа қауіпсіздік тобын таңдауымыз керек. Бұл Қауіпсіздік тобы Веб-қауіпсіздік тобы деп аталады. Төменде сақтау параметрлері бар, яғни. бұл амалдық жүйе орнатылатын қатты диск, басқаша айтқанда Түбір көлемі. Түбірлік көлем ретінде gp2 пайдалану ұсынылады, бұл жалпы мақсаттағы (SSD) қатты диск және 8 гигабайт бөлінген. Осы әдепкі мәндерді сақтайық, өйткені бұл зертханада біз үшін жеткілікті.
Ең соңғы бөлім Қосымша мәліметтер, I.E. Қосымша параметрлер. Оны ашып, оны Пайдаланушы деректері өрісіне орналастырайық. Пайдаланушы деректері - бұл EC2 данасын алғаш рет іске қосқан кезде орындалатын пәрмендер жиынтығын енгізуге болатын арнайы өріс. Серверіңізді қайта жүктесеңіз, Пайдаланушы деректері қайтадан іске қосылмайды. Тағы да, Пайдаланушы деректері EC2 Instance алғаш рет іске қосылған кезде ғана осы командаларды іске қосады. Осы беттегі зертханалық қағазда берілген командаларды көшіріп, оларды осында қояйық. Бұл код PHP веб-серверіне арналған кодты қамтитын Zip мұрағатын көшіреді. Біз осы веб-серверді орнату және оны іске қосу үшін командаларды қолданамыз. Бұл жасалуы керек соңғы түзетулер. Енді EC2 Instance жасау үшін беттің оң жағындағы Launch данасын нұқыңыз. Келесі бетте біз осы Instance құруды сәтті бастаған жасыл хабарламаны көреміз. Беттің төменгі оң жағындағы барлық даналарды қарау түймесін басайық және біз сол AWS тіркелгісі мен аймағындағы барлық даналары бар бетке апарамыз. Егер бұл тізім пайда болмаса, жоғарғы оң жақ бөлігінде Солтүстік Вирджинияның аймақ немесе жүйе атауы ретінде таңдалғанын тексеріңіз. Пайда болған даналар тізімінде біз көре аламыз Instance Web Server 1 біз жасаған. Күйді тексеру бағанының Initializing деп белгіленгенін байқай аласыз, яғни жүйенің осы Instance тексерулері өткізілмегенін және әлі пайдалануға дайын емес екенін білдіреді. Біз осы кестені мезгіл-мезгіл жаңарту үшін жаңарту белгішесін қолдана аламыз және мән жасылға айналғаннан кейін, екіден екі тексеру сәтті өтті деп жазылады, содан кейін біз өз данамызды таңдай аламыз. Төменде пайда болатын мәзірде Мәліметтер қойындысын таңдаңыз. Бұл қойындыда сіз осы Instance туралы негізгі ақпаратты көре аласыз, сонымен қатар басқа қойындылар бар Қауіпсіздік, Желі, Сақтау, Күй тексерулері, Мониторинг, және Тегтер тақырыбы. Бізді мәліметтер қойындысындағы Public IPv4-мекен-жай өрісі қызықтырады. Біз осы IP мекенжайын көшіріп, оны жаңа беттегі шолғышта ашуымыз керек. Мұны жасағаннан кейін сізге AWS логотипі бар ұқсас бет, сондай-ақ жаңадан жасалған EC2 Instance мета деректері ұсынылады. Егер сіз осындай бетті ашсаңыз, мен сізді құттықтаймын, сіз бәрін дұрыс жасадыңыз, және зертханалық жұмыстың көп бөлігі аяқталды.
Енді сіз бұл бетті жаба аласыз, ал қалған барлық жүйелерден дұрыс шығу керек. Ашылмалы мәзірдегі Шығу түймесін басу үшін жоғарғы оң жақтағы AWS басқару консоліндегі пайдаланушыны басу керек. Оны басқаннан кейін сіз AWS Management Console кіру бетіне қайта бағытталасыз. Ұқсас бетті көргеннен кейін, бұл сіз сәтті кіргеніңізді көрсетеді, сіз осы бетті жаба аласыз. Келесі зертханалық жұмысты ашуда қиындықтар болмауы үшін зертханалық жұмысты дұрыс аяқтауымыз керек. Мұны істеу үшін зертханалық мәзірдегі End Lab түймесін басыңыз. Зертханалық жұмысты шынымен аяқтағымыз келетін-келмейтіні хабарланады. Иә түймесін басыңыз, содан кейін қалқымалы терезе пайда болады және хабарды көргеннен кейін сіз осы хабарлама жолағын жабуыңыз мүмкін, ол сіздің командаңыздың зертхана аяқталғаннан кейін екенін көрсетеді жүйеге ауыстырылды және барлық ресурстарды жою процесі және уақытша жасалған AWS есептік жазбасы Сіз бастамашы болды үшін. Біз бұл процесс аяқталғанша күте алмаймыз және осы терезені жабыңыз, немесе біз AWS академиясынан шыға аламыз.
Осы сәтте біз зертханалық жұмысты сәтті аяқтап, оны бөлшектедік. Сіздерді осы мерекемен құттықтаймын. Енді біз сізді көретін келесі іс-шараларымызға көшеміз. Жақында сізді қараңыз!